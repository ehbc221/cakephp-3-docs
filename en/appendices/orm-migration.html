

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>New ORM Upgrade Guide - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="pt_BR" href="../../pt/appendices/orm-migration.html" /><link rel="alternate" hreflang="es" href="../../es/appendices/orm-migration.html" /><link rel="alternate" hreflang="ja" href="../../ja/appendices/orm-migration.html" /><link rel="alternate" hreflang="fr" href="../../fr/appendices/orm-migration.html" /><link rel="alternate" hreflang="zh" href="../../zh/appendices/orm-migration.html" /><link rel="alternate" hreflang="tr" href="../../tr/appendices/orm-migration.html" /><link rel="alternate" hreflang="ru" href="../../ru/appendices/orm-migration.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 3.5 documentation" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 3.5 documentation" href="../index.html" />
    <link rel="up" title="3.x Migration Guide" href="3-x-migration-guide.html" />
    <link rel="next" title="Tutorials &amp; Examples" href="../tutorials-and-examples.html" />
    <link rel="prev" title="3.0 Migration Guide" href="3-0-migration-guide.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Search" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        en
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li></li>
                                            
                                                <li><a href="../../pt/appendices/orm-migration.html">pt</a></li>
                                            
                                                <li><a href="../../es/appendices/orm-migration.html">es</a></li>
                                            
                                                <li><a href="../../ja/appendices/orm-migration.html">ja</a></li>
                                            
                                                <li><a href="../../fr/appendices/orm-migration.html">fr</a></li>
                                            
                                                <li><a href="../../zh/appendices/orm-migration.html">zh</a></li>
                                            
                                                <li><a href="../../tr/appendices/orm-migration.html">tr</a></li>
                                            
                                                <li><a href="../../ru/appendices/orm-migration.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/en">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/en">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/en/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/en/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/en/appendices/orm-migration.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">New ORM Upgrade Guide</a><ul>
<li><a class="reference internal" href="#design-of-the-new-orm">Design of the New ORM</a><ul>
<li><a class="reference internal" href="#table-objects">Table Objects</a></li>
<li><a class="reference internal" href="#query-objects">Query Objects</a></li>
<li><a class="reference internal" href="#entity-objects">Entity Objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-differences">Key Differences</a><ul>
<li><a class="reference internal" href="#inflection-rules-updated">Inflection Rules Updated</a></li>
<li><a class="reference internal" href="#find-returns-a-query-object">Find returns a Query Object</a></li>
<li><a class="reference internal" href="#finder-method-changes">Finder Method Changes</a></li>
<li><a class="reference internal" href="#recursive-and-containablebehavior-removed">Recursive and ContainableBehavior Removed</a></li>
<li><a class="reference internal" href="#no-afterfind-event-or-virtual-fields">No afterFind Event or Virtual Fields</a></li>
<li><a class="reference internal" href="#associations-no-longer-defined-as-properties">Associations No Longer Defined as Properties</a></li>
<li><a class="reference internal" href="#validation-no-longer-defined-as-a-property">Validation No Longer Defined as a Property</a></li>
<li><a class="reference internal" href="#identifier-quoting-disabled-by-default">Identifier Quoting Disabled by Default</a></li>
</ul>
</li>
<li><a class="reference internal" href="#updating-behaviors">Updating Behaviors</a><ul>
<li><a class="reference internal" href="#new-base-class">New Base Class</a></li>
<li><a class="reference internal" href="#mixin-methods-signature-changes">Mixin Methods Signature Changes</a></li>
<li><a class="reference internal" href="#callback-method-signature-changes">Callback Method Signature Changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="new-orm-upgrade-guide">
<h1>New ORM Upgrade Guide<a class="headerlink" href="#new-orm-upgrade-guide" title="Permalink to this headline">¶</a></h1>
<p>CakePHP 3.0 features a new ORM that has been re-written from the ground up.
While the ORM used in 1.x and 2.x has served us well for a long time it had
a few issues that we wanted to fix.</p>
<ul class="simple">
<li>Frankenstein - Is it a record, or a table? Currently it&#8217;s both.</li>
<li>Inconsistent API - Model::read() for example.</li>
<li>No query object - Queries are always defined as arrays, this has some
limitations and restrictions. For example it makes doing unions and
sub-queries much harder.</li>
<li>Returns arrays - This is a common complaint about CakePHP, and has probably
reduced adoption at some levels.</li>
<li>No record object - This makes attaching formatting methods
difficult/impossible.</li>
<li>Containable - Should be part of the ORM, not a crazy hacky behavior.</li>
<li>Recursive - This should be better controlled as defining which associations
are included, not a level of recursiveness.</li>
<li>DboSource - It is a beast, and Model relies on it more than datasource.  That
separation could be cleaner and simpler.</li>
<li>Validation - Should be separate, it&#8217;s a giant crazy function right now.  Making
it a reusable bit would make the framework more extensible.</li>
</ul>
<p>The ORM in CakePHP 3.0 solves these and many more problems. The new ORM
focuses on relational data stores right now. In the future and through plugins
we will add non relational stores like ElasticSearch and others.</p>
<div class="section" id="design-of-the-new-orm">
<h2>Design of the New ORM<a class="headerlink" href="#design-of-the-new-orm" title="Permalink to this headline">¶</a></h2>
<p>The new ORM solves several problems by having more specialized and focused
classes. In the past you would use <code class="docutils literal"><span class="pre">Model</span></code> and a Datasource for all
operations. Now the ORM is split into more layers:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Cake\Database\Connection</span></code> - Provides a platform independent way to create
and use connections. This class provides a way to use transactions,
execute queries and access schema data.</li>
<li><code class="docutils literal"><span class="pre">Cake\Database\Dialect</span></code> - The classes in this namespace provide platform
specific SQL and transform queries to work around platform specific
limitations.</li>
<li><code class="docutils literal"><span class="pre">Cake\Database\Type</span></code> - Is the gateway class to CakePHP database type
conversion system. It is a pluggable framework for adding abstract column
types and providing mappings between database,  PHP representations and PDO
bindings for each data type. For example datetime columns are represented as
<code class="docutils literal"><span class="pre">DateTime</span></code> instances in your code now.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Table</span></code> - The main entry point into the new ORM. Provides access
to a single table. Handles the definition of association, use of behaviors and
creation of entities and query objects.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Behavior</span></code> - The base class for behaviors, which act very similar
to behaviors in previous versions of CakePHP.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Query</span></code> - A fluent object based query builder that replaces
the deeply nested arrays used in previous versions of CakePHP.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\ResultSet</span></code> - A collection of results that gives powerful tools
for manipulating data in aggregate.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Entity</span></code> - Represents a single row result. Makes accessing data
and serializing to various formats a snap.</li>
</ul>
<p>Now that you are more familiar with some of the classes you&#8217;ll interact with
most frequently in the new ORM it is good to look at the three most important
classes. The <code class="docutils literal"><span class="pre">Table</span></code>, <code class="docutils literal"><span class="pre">Query</span></code> and <code class="docutils literal"><span class="pre">Entity</span></code> classes do much of the heavy
lifting in the new ORM, and each serves a different purpose.</p>
<div class="section" id="table-objects">
<h3>Table Objects<a class="headerlink" href="#table-objects" title="Permalink to this headline">¶</a></h3>
<p>Table objects are the gateway into your data. They handle many of the tasks that
<code class="docutils literal"><span class="pre">Model</span></code> did in previous releases. Table classes handle tasks like:</p>
<ul class="simple">
<li>Creating queries.</li>
<li>Providing finders.</li>
<li>Validating and saving entities.</li>
<li>Deleting entities.</li>
<li>Defining and accessing associations.</li>
<li>Triggering callback events.</li>
<li>Interacting with behaviors.</li>
</ul>
<p>The documentation chapter on <a class="reference internal" href="../orm/table-objects.html"><span class="doc">Table Objects</span></a> provides far more detail
on how to use table objects than this guide can. Generally when moving existing
model code over it will end up in a table object. Table objects don&#8217;t contain
any platform dependent SQL. Instead they collaborate with entities and the query
builder to do their work. Table objects also interact with behaviors and other
interested parties through published events.</p>
</div>
<div class="section" id="query-objects">
<h3>Query Objects<a class="headerlink" href="#query-objects" title="Permalink to this headline">¶</a></h3>
<p>While these are not classes you will build yourself, your application code will
make extensive use of the <a class="reference internal" href="../orm/query-builder.html"><span class="doc">Query Builder</span></a> which is central to the new
ORM. The query builder makes it easy to build simple or complex queries
including those that were previously very difficult in CakePHP like <code class="docutils literal"><span class="pre">HAVING</span></code>,
<code class="docutils literal"><span class="pre">UNION</span></code> and sub-queries.</p>
<p>The various find() calls your application has currently will need to be updated
to use the new query builder. The Query object is responsible for containing the
data to make a query without executing the query itself. It collaborates with
the connection/dialect to generate platform specific SQL which is executed
creating a <code class="docutils literal"><span class="pre">ResultSet</span></code> as the output.</p>
</div>
<div class="section" id="entity-objects">
<h3>Entity Objects<a class="headerlink" href="#entity-objects" title="Permalink to this headline">¶</a></h3>
<p>In previous versions of CakePHP the <code class="docutils literal"><span class="pre">Model</span></code> class returned dumb arrays that
could not contain any logic or behavior. While the community made this
short-coming less painful with projects like CakeEntity, the array results were
often a short coming that caused many developers trouble. For CakePHP 3.0, the
ORM always returns object result sets unless you explicitly disable that
feature. The chapter on <a class="reference internal" href="../orm/entities.html"><span class="doc">Entities</span></a> covers the various tasks you can
accomplish with entities.</p>
<p>Entities are created in one of two ways. Either by loading data from the
database, or converting request data into entities. Once created, entities allow
you to manipulate the data they contain and persist their data by collaborating
with table objects.</p>
</div>
</div>
<div class="section" id="key-differences">
<h2>Key Differences<a class="headerlink" href="#key-differences" title="Permalink to this headline">¶</a></h2>
<p>The new ORM is a large departure from the existing <code class="docutils literal"><span class="pre">Model</span></code> layer. There are
many important differences that are important in understanding how the new ORM
operates and how to update your code.</p>
<div class="section" id="inflection-rules-updated">
<h3>Inflection Rules Updated<a class="headerlink" href="#inflection-rules-updated" title="Permalink to this headline">¶</a></h3>
<p>You may have noticed that table classes have a pluralized name. In addition to
tables having pluralized names, associations are also referred in the plural
form. This is in contrast to <code class="docutils literal"><span class="pre">Model</span></code> where class names and association aliases
were singular. There are a few reasons for this change:</p>
<ul class="simple">
<li>Table classes represent <strong>collections</strong> of data, not single rows.</li>
<li>Associations link tables together, describing the relations between many
things.</li>
</ul>
<p>While the conventions for table objects are to always use plural forms, your
entity association properties will be populated based on the association type.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">BelongsTo and HasOne associations will use the singular form in entity
properties, while HasMany and BelongsToMany (HABTM) will use plural forms.</p>
</div>
<p>The convention change for table objects is most apparent when building queries.
Instead of expressing queries like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Wrong</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;User.active&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>
</pre></div>
</div>
<p>You need to use the plural form:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Correct</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;Users.active&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="find-returns-a-query-object">
<h3>Find returns a Query Object<a class="headerlink" href="#find-returns-a-query-object" title="Permalink to this headline">¶</a></h3>
<p>One important difference in the new ORM is that calling <code class="docutils literal"><span class="pre">find</span></code> on a table will
not return the results immediately, but will return a Query object; this serves
several purposes.</p>
<p>It is possible to alter queries further, after calling <code class="docutils literal"><span class="pre">find</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$articles</span> <span class="o">=</span> <span class="nx">TableRegistry</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">order</span><span class="p">([</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>It is possible to stack custom finders to append conditions, sorting, limit and
any other clause to the same query before it is executed:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;approved&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;popular&#39;</span><span class="p">);</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can compose queries one into the other to create subqueries easier than
ever:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;approved&#39;</span><span class="p">);</span>
<span class="nv">$favoritesQuery</span> <span class="o">=</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;favorites&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="p">]);</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$favoritesQuery</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">])]);</span>
</pre></div>
</div>
<p>You can decorate queries with iterators and call methods without even touching
the database. This is great when you have parts of your view cached and having
the results taken from the database is not actually required:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// No queries made in this example!</span>
<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">order</span><span class="p">([</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">formatResults</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Cake\Collection\CollectionInterface</span> <span class="nv">$results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">extract</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
    <span class="p">});</span>
</pre></div>
</div>
<p>Queries can be seen as the result object, trying to iterate the query, calling
<code class="docutils literal"><span class="pre">toArray()</span></code> or any method inherited from <a class="reference internal" href="../core-libraries/collections.html"><span class="doc">collection</span></a>,
will result in the query being executed and results returned to you.</p>
<p>The biggest difference you will find when coming from CakePHP 2.x is that
<code class="docutils literal"><span class="pre">find('first')</span></code> does not exist anymore. There is a trivial replacement for it,
and it is the <code class="docutils literal"><span class="pre">first()</span></code> method:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Before</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">);</span>

<span class="c1">// Now</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

<span class="c1">// Before</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">]);</span>

<span class="c1">// Now</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

<span class="c1">// Can also be written</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
</pre></div>
</div>
<p>If you are loading a single record by its primary key, it will be better to
just call <code class="docutils literal"><span class="pre">get()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="finder-method-changes">
<h3>Finder Method Changes<a class="headerlink" href="#finder-method-changes" title="Permalink to this headline">¶</a></h3>
<p>Returning a query object from a find method has several advantages, but comes at
a cost for people migrating from 2.x. If you had some custom find methods in
your models, they will need some modifications. This is how you create custom
finder methods in 3.0:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">findPopular</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;times_viewed&#39;</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">findFavorites</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$for</span> <span class="o">=</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">&#39;for&#39;</span><span class="p">];</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">matching</span><span class="p">(</span><span class="s1">&#39;Users.Favorites&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$q</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$for</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$q</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;Favorites.user_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$for</span><span class="p">]);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see, they are pretty straightforward, they get a Query object instead
of an array and must return a Query object back. For 2.x users that implemented
afterFind logic in custom finders, you should check out the <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#map-reduce"><span class="std std-ref">Modifying Results with Map/Reduce</span></a>
section, or use the features found on the
<a class="reference internal" href="../core-libraries/collections.html"><span class="doc">collection objects</span></a>. If in your
models you used to rely on having an afterFind for all find operations you can
migrate this code in one of a few ways:</p>
<ol class="arabic simple">
<li>Override your entity constructor method and do additional formatting there.</li>
<li>Create accessor methods in your entity to create the virtual properties.</li>
<li>Redefine <code class="docutils literal"><span class="pre">findAll()</span></code> and use <code class="docutils literal"><span class="pre">formatResults</span></code>.</li>
</ol>
<p>In the 3rd case above your code would look like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">findAll</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">formatResults</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Cake\Collection\CollectionInterface</span> <span class="nv">$results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Your afterfind logic</span>
        <span class="p">});</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You may have noticed that custom finders receive an options array. You can pass
any extra information to your finder using this parameter. This is great
news for people migrating from 2.x. Any of the query keys that were used in
previous versions will be converted automatically for you in 3.x to the correct
functions:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// This works in both CakePHP 2.x and 3.0</span>
<span class="nv">$articles</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">],</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;OR&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake&#39;</span><span class="p">,</span> <span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">],</span>
        <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">],</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Authors&#39;</span><span class="p">],</span> <span class="c1">// The only change! (notice plural)</span>
    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">],</span>
    <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>If your application uses &#8216;magic&#8217; or <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#dynamic-finders"><span class="std std-ref">Dynamic Finders</span></a>, you will have to
adapt those calls. In 3.x the <code class="docutils literal"><span class="pre">findAllBy*</span></code> methods have been removed, instead
<code class="docutils literal"><span class="pre">findBy*</span></code> always returns a query object. To get the first result, you need to
use the <code class="docutils literal"><span class="pre">first()</span></code> method:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">findByTitle</span><span class="p">(</span><span class="s1">&#39;A great post!&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
</pre></div>
</div>
<p>Hopefully, migrating from older versions is not as daunting as it first seems.
Many of the features we have added will help you remove code as you can better
express your requirements using the new ORM and at the same time the
compatibility wrappers will help you rewrite those tiny differences in a fast
and painless way.</p>
<p>One of the other nice improvements in 3.x around finder methods is that
behaviors can implement finder methods with no fuss. By simply defining a method
with a matching name and signature on a Behavior the finder will automatically
be available on any tables the behavior is attached to.</p>
</div>
<div class="section" id="recursive-and-containablebehavior-removed">
<h3>Recursive and ContainableBehavior Removed<a class="headerlink" href="#recursive-and-containablebehavior-removed" title="Permalink to this headline">¶</a></h3>
<p>In previous versions of CakePHP you needed to use <code class="docutils literal"><span class="pre">recursive</span></code>,
<code class="docutils literal"><span class="pre">bindModel()</span></code>, <code class="docutils literal"><span class="pre">unbindModel()</span></code> and <code class="docutils literal"><span class="pre">ContainableBehavior</span></code> to reduce the
loaded data to the set of associations you were interested in. A common tactic
to manage associations was to set <code class="docutils literal"><span class="pre">recursive</span></code> to <code class="docutils literal"><span class="pre">-1</span></code> and use Containable to
manage all associations. In CakePHP 3.0 ContainableBehavior, recursive,
bindModel, and unbindModel have all been removed. Instead the <code class="docutils literal"><span class="pre">contain()</span></code>
method has been promoted to be a core feature of the query builder. Associations
are only loaded if they are explicitly turned on. For example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Will <strong>only</strong> load data from the <code class="docutils literal"><span class="pre">articles</span></code> table as no associations have been
included. To load articles and their related authors you would do:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Authors&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>By only loading associated data that has been specifically requested you spend
less time fighting the ORM trying to get only the data you want.</p>
</div>
<div class="section" id="no-afterfind-event-or-virtual-fields">
<h3>No afterFind Event or Virtual Fields<a class="headerlink" href="#no-afterfind-event-or-virtual-fields" title="Permalink to this headline">¶</a></h3>
<p>In previous versions of CakePHP you needed to make extensive use of the
<code class="docutils literal"><span class="pre">afterFind</span></code> callback and virtual fields in order to create generated data
properties. These features have been removed in 3.0. Because of how ResultSets
iteratively generate entities, the <code class="docutils literal"><span class="pre">afterFind</span></code> callback was not possible.
Both afterFind and virtual fields can largely be replaced with virtual
properties on entities. For example if your User entity has both first and last
name columns you can add an accessor for <cite>full_name</cite> and generate the property
on the fly:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Entity</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">_getFullName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">first_name</span> <span class="o">.</span> <span class="s1">&#39;  &#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">last_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once defined you can access your new property using <code class="docutils literal"><span class="pre">$user-&gt;full_name</span></code>.
Using the <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#map-reduce"><span class="std std-ref">Modifying Results with Map/Reduce</span></a> features of the ORM allow you to build aggregated
data from your results, which is another use case that the <code class="docutils literal"><span class="pre">afterFind</span></code>
callback was often used for.</p>
<p>While virtual fields are no longer an explicit feature of the ORM, adding
calculated fields is easy to do in your finder methods. By using the query
builder and expression objects you can achieve the same results that virtual
fields gave:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">findAverage</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span> <span class="o">=</span> <span class="p">[])</span>
    <span class="p">{</span>
        <span class="nv">$avg</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">func</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">avg</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">);</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">([</span><span class="s1">&#39;average&#39;</span> <span class="o">=&gt;</span> <span class="nv">$avg</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="associations-no-longer-defined-as-properties">
<h3>Associations No Longer Defined as Properties<a class="headerlink" href="#associations-no-longer-defined-as-properties" title="Permalink to this headline">¶</a></h3>
<p>In previous versions of CakePHP the various associations your models had were
defined in properties like <code class="docutils literal"><span class="pre">$belongsTo</span></code> and <code class="docutils literal"><span class="pre">$hasMany</span></code>. In CakePHP 3.0,
associations are created with methods. Using methods allows us to sidestep the
many limitations class definitions have, and provide only one way to define
associations. Your <code class="docutils literal"><span class="pre">initialize()</span></code> method and all other parts of your application
code, interact with the same API when manipulating associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Movies&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Ratings&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>As you can see from the example above each of the association types uses
a method to create the association. One other difference is that
<code class="docutils literal"><span class="pre">hasAndBelongsToMany</span></code> has been renamed to <code class="docutils literal"><span class="pre">belongsToMany</span></code>. To find out more
about creating associations in 3.0 see the section on <a class="reference internal" href="../orm/associations.html"><span class="doc">Associations - Linking Tables Together</span></a>.</p>
<p>Another welcome improvement to CakePHP is the ability to create your own
association classes. If you have association types that are not covered by the
built-in relation types you can create a custom <code class="docutils literal"><span class="pre">Association</span></code> sub-class and
define the association logic you need.</p>
</div>
<div class="section" id="validation-no-longer-defined-as-a-property">
<h3>Validation No Longer Defined as a Property<a class="headerlink" href="#validation-no-longer-defined-as-a-property" title="Permalink to this headline">¶</a></h3>
<p>Like associations, validation rules were defined as a class property in previous
versions of CakePHP. This array would then be lazily transformed into
a <code class="docutils literal"><span class="pre">ModelValidator</span></code> object. This transformation step added a layer of
indirection, complicating rule changes at runtime. Furthermore, validation rules
being defined as a property made it difficult for a model to have multiple sets
of validation rules. In CakePHP 3.0, both these problems have been remedied.
Validation rules are always built with a <code class="docutils literal"><span class="pre">Validator</span></code> object, and it is trivial
to have multiple sets of rules:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\Validation\Validator</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">validationDefault</span><span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">requirePresence</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Reviews must be 20 characters or more&#39;</span><span class="p">,</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;numeric&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;numeric&#39;</span>
            <span class="p">]);</span>
        <span class="k">return</span> <span class="nv">$validator</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>You can define as many validation methods as you need. Each method should be
prefixed with <code class="docutils literal"><span class="pre">validation</span></code> and accept a <code class="docutils literal"><span class="pre">$validator</span></code> argument.</p>
<p>In previous versions of CakePHP &#8216;validation&#8217; and the related callbacks covered
a few related but different uses. In CakePHP 3.0, what was formerly called
validation is now split into two concepts:</p>
<ol class="arabic simple">
<li>Data type and format validation.</li>
<li>Enforcing application, or business rules.</li>
</ol>
<p>Validation is now applied before ORM entities are created from request data.
This step lets you ensure data matches the data type, format, and basic shape
your application expects. You can use your validators when converting request
data into entities by using the <code class="docutils literal"><span class="pre">validate</span></code> option. See the documentation on
<a class="reference internal" href="../orm/saving-data.html#converting-request-data"><span class="std std-ref">Converting Request Data into Entities</span></a> for more information.</p>
<p><a class="reference internal" href="../orm/validation.html#application-rules"><span class="std std-ref">Application rules</span></a> allow you to define rules that
ensure your application&#8217;s rules, state and workflows are enforced. Rules are
defined in your Table&#8217;s <code class="docutils literal"><span class="pre">buildRules()</span></code> method. Behaviors can add rules using
the <code class="docutils literal"><span class="pre">buildRules()</span></code> hook method. An example <code class="docutils literal"><span class="pre">buildRules()</span></code> method for our
articles table could be:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In src/Model/Table/ArticlesTable.php</span>
<span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\RulesChecker</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildRules</span><span class="p">(</span><span class="nx">RulesChecker</span> <span class="nv">$rules</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">existsIn</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;Users&#39;</span><span class="p">));</span>
        <span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
            <span class="k">function</span> <span class="p">(</span><span class="nv">$article</span><span class="p">,</span> <span class="nv">$options</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">(</span><span class="nv">$article</span><span class="o">-&gt;</span><span class="na">published</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$article</span><span class="o">-&gt;</span><span class="na">reviewer</span><span class="p">));</span>
            <span class="p">},</span>
            <span class="s1">&#39;isReviewed&#39;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s1">&#39;errorField&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;published&#39;</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles must be reviewed before publishing.&#39;</span>
            <span class="p">]</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="nv">$rules</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="identifier-quoting-disabled-by-default">
<h3>Identifier Quoting Disabled by Default<a class="headerlink" href="#identifier-quoting-disabled-by-default" title="Permalink to this headline">¶</a></h3>
<p>In the past CakePHP has always quoted identifiers. Parsing SQL snippets and
attempting to quote identifiers was both error prone and expensive. If you are
following the conventions CakePHP sets out, the cost of identifier quoting far
outweighs any benefit it provides. Because of this identifier quoting has been
disabled by default in 3.0. You should only need to enable identifier quoting if
you are using column names or table names that contain special characters or are
reserved words. If required, you can enable identifier quoting when configuring
a connection:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In config/app.php</span>
<span class="s1">&#39;Datasources&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake\Database\Driver\Mysql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;super_secret&#39;</span><span class="p">,</span>
        <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;cakephp&#39;</span><span class="p">,</span>
        <span class="s1">&#39;quoteIdentifiers&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">],</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Identifiers in <code class="docutils literal"><span class="pre">QueryExpression</span></code> objects will not be quoted, and you will
need to quote them manually or use IdentifierExpression objects.</p>
</div>
</div>
</div>
<div class="section" id="updating-behaviors">
<h2>Updating Behaviors<a class="headerlink" href="#updating-behaviors" title="Permalink to this headline">¶</a></h2>
<p>Like most ORM related features, behaviors have changed in 3.0 as well. They now
attach to <code class="docutils literal"><span class="pre">Table</span></code> instances which are the conceptual descendant of the
<code class="docutils literal"><span class="pre">Model</span></code> class in previous versions of CakePHP. There are a few key
differences from behaviors in CakePHP 2.x:</p>
<ul class="simple">
<li>Behaviors are no longer shared across multiple tables. This means you no
longer have to &#8216;namespace&#8217; settings stored in a behavior. Each table using
a behavior will get its own instance.</li>
<li>The method signatures for mixin methods have changed.</li>
<li>The method signatures for callback methods have changed.</li>
<li>The base class for behaviors have changed.</li>
<li>Behaviors can add finder methods.</li>
</ul>
<div class="section" id="new-base-class">
<h3>New Base Class<a class="headerlink" href="#new-base-class" title="Permalink to this headline">¶</a></h3>
<p>The base class for behaviors has changed. Behaviors should now extend
<code class="docutils literal"><span class="pre">Cake\ORM\Behavior</span></code>; if a behavior does not extend this class an exception
will be raised. In addition to the base class changing, the constructor for
behaviors has been modified, and the <code class="docutils literal"><span class="pre">startup()</span></code> method has been removed.
Behaviors that need access to the table they are attached to should define
a constructor:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Behavior</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Behavior</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SluggableBehavior</span> <span class="k">extends</span> <span class="nx">Behavior</span>
<span class="p">{</span>

    <span class="k">protected</span> <span class="nv">$_table</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Table</span> <span class="nv">$table</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_table</span> <span class="o">=</span> <span class="nv">$table</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mixin-methods-signature-changes">
<h3>Mixin Methods Signature Changes<a class="headerlink" href="#mixin-methods-signature-changes" title="Permalink to this headline">¶</a></h3>
<p>Behaviors continue to offer the ability to add &#8216;mixin&#8217; methods to Table objects,
however the method signature for these methods has changed. In CakePHP 3.0,
behavior mixin methods can expect the <strong>same</strong> arguments provided to the table
&#8216;method&#8217;. For example:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Assume table has a slug() method provided by a behavior.</span>
<span class="nv">$table</span><span class="o">-&gt;</span><span class="na">slug</span><span class="p">(</span><span class="nv">$someValue</span><span class="p">);</span>
</pre></div>
</div>
<p>The behavior providing the <code class="docutils literal"><span class="pre">slug()</span></code> method will receive only 1 argument, and its
method signature should look like:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">slug</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Code here.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="callback-method-signature-changes">
<h3>Callback Method Signature Changes<a class="headerlink" href="#callback-method-signature-changes" title="Permalink to this headline">¶</a></h3>
<p>Behavior callbacks have been unified with all other listener methods. Instead of
their previous arguments, they need to expect an event object as their first
argument:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeFind</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">,</span> <span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Code.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../orm/table-objects.html#table-callbacks"><span class="std std-ref">Lifecycle Callbacks</span></a> for the signatures of all the callbacks a behavior
can subscribe to.</p>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="en">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Preface</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3-x-migration-guide.html">3.x Migration Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3-5-migration-guide.html">3.5 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-4-migration-guide.html">3.4 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-3-migration-guide.html">3.3 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-2-migration-guide.html">3.2 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-1-migration-guide.html">3.1 Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-0-migration-guide.html">3.0 Migration Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">New ORM Upgrade Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Request &amp; Response Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm.html">Database Access &amp; ORM</a></li>
</ul>
<p class="caption"><span class="caption-text">Using CakePHP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Bake Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/caching.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Console Tools, Shells &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/errors.html">Error &amp; Exception Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/events.html">Events System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/internationalization-and-localization.html">Internationalization &amp; Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/form.html">Modelless Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utility Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/app.html">App Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/httpclient.html">Http Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/registry-objects.html">Registry Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Upgrade Tool</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/global-constants-and-functions.html">Constants &amp; Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Last updated on Aug 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>
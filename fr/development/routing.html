

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Routing" lang="fr" name="title" />
<meta content="controller actions,default routes,mod rewrite,code index,string url,php class,incoming requests,dispatcher,url url,meth,maps,match,parameters,array,config,cakephp,apache,routeur,router" lang="fr" name="keywords" />

    <title>Routing - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/development/routing.html" /><link rel="alternate" hreflang="pt_BR" href="../../pt/development/routing.html" /><link rel="alternate" hreflang="es" href="../../es/development/routing.html" /><link rel="alternate" hreflang="ja" href="../../ja/development/routing.html" /><link rel="alternate" hreflang="zh" href="../../zh/development/routing.html" /><link rel="alternate" hreflang="tr" href="../../tr/development/routing.html" /><link rel="alternate" hreflang="ru" href="../../ru/development/routing.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within documentation CakePHP Cookbook 3.5" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="documentation CakePHP Cookbook 3.5" href="../index.html" />
    <link rel="next" title="Filtres du Dispatcher" href="dispatch-filters.html" />
    <link rel="prev" title="Configuration" href="configuration.html" />

    <script type="text/javascript">
    window.lang = "fr";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Recherche" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        fr
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li><a href="../../en/development/routing.html">en</a></li>
                                            
                                                <li><a href="../../pt/development/routing.html">pt</a></li>
                                            
                                                <li><a href="../../es/development/routing.html">es</a></li>
                                            
                                                <li><a href="../../ja/development/routing.html">ja</a></li>
                                            
                                                <li></li>
                                            
                                                <li><a href="../../zh/development/routing.html">zh</a></li>
                                            
                                                <li><a href="../../tr/development/routing.html">tr</a></li>
                                            
                                                <li><a href="../../ru/development/routing.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/fr">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/fr">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/fr/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/fr/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/fr/development/routing.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Routing</a><ul>
<li><a class="reference internal" href="#tour-rapide">Tour Rapide</a></li>
<li><a class="reference internal" href="#connecter-les-routes">Connecter les Routes</a><ul>
<li><a class="reference internal" href="#les-elements-de-route">Les Eléments de Route</a></li>
<li><a class="reference internal" href="#configurer-les-options-de-route">Configurer les Options de Route</a></li>
<li><a class="reference internal" href="#passer-des-parametres-a-l-action">Passer des Paramètres à l&#8217;Action</a></li>
<li><a class="reference internal" href="#utiliser-les-routes-nommees">Utiliser les Routes Nommées</a></li>
<li><a class="reference internal" href="#prefix-de-routage">Prefix de Routage</a></li>
<li><a class="reference internal" href="#routing-des-plugins">Routing des Plugins</a></li>
<li><a class="reference internal" href="#creer-des-liens-vers-des-routes-de-plugins">Créer des Liens vers des Routes de Plugins</a></li>
<li><a class="reference internal" href="#routing-favorisant-le-seo">Routing Favorisant le SEO</a></li>
<li><a class="reference internal" href="#matching-des-methodes-http-specifiques">Matching des Méthodes HTTP Spécifiques</a></li>
<li><a class="reference internal" href="#matching-de-noms-de-domaine-specifiques">Matching de Noms de Domaine Spécifiques</a></li>
<li><a class="reference internal" href="#routing-des-extensions-de-fichier">Routing des Extensions de Fichier</a></li>
<li><a class="reference internal" href="#connecter-des-middlewares-a-un-scope">Connecter des Middlewares à un scope</a></li>
<li><a class="reference internal" href="#grouper-les-middlewares">Grouper les Middlewares</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creer-des-routes-restful">Créer des Routes RESTful</a><ul>
<li><a class="reference internal" href="#creer-des-routes-de-ressources-imbriquees">Créer des Routes de Ressources Imbriquées</a></li>
<li><a class="reference internal" href="#limiter-la-creation-des-routes">Limiter la Création des Routes</a></li>
<li><a class="reference internal" href="#changer-les-actions-du-controller">Changer les Actions du Controller</a></li>
<li><a class="reference internal" href="#mapper-des-routes-de-ressource-supplementaires">Mapper des Routes de Ressource Supplémentaires</a></li>
<li><a class="reference internal" href="#classes-de-route-personnalisee-pour-les-ressources">Classes de Route Personnalisée pour les Ressources</a></li>
<li><a class="reference internal" href="#inflection-de-l-url-pour-les-routes-ressource">Inflection de l&#8217;URL pour les Routes Ressource</a></li>
<li><a class="reference internal" href="#changer-le-chemin-d-un-element">Changer le chemin d&#8217;un élément</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arguments-passes">Arguments Passés</a></li>
<li><a class="reference internal" href="#generer-des-urls">Générer des URLs</a></li>
<li><a class="reference internal" href="#routing-de-redirection">Routing de Redirection</a></li>
<li><a class="reference internal" href="#classes-route-personnalisees">Classes Route Personnalisées</a><ul>
<li><a class="reference internal" href="#classe-de-route-par-defaut">Classe de Route par Défaut</a></li>
<li><a class="reference internal" href="#methode-fallbacks">Méthode Fallbacks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creer-des-parametres-d-url-persistants">Créer des Paramètres d&#8217;URL Persistants</a></li>
<li><a class="reference internal" href="#gerer-les-parametres-nommes-dans-les-urls">Gérer les Paramètres Nommés dans les URLs</a></li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="namespace-Cake\Routing">
<span id="routing"></span><h1>Routing<a class="headerlink" href="#namespace-Cake\Routing" title="Lien permanent vers ce titre">¶</a></h1>
<dl class="class">
<dt id="Cake\Routing\Router">
<em class="property">class </em><code class="descclassname">Cake\Routing\</code><code class="descname">Router</code><a class="headerlink" href="#Cake\Routing\Router" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Le Routing est une fonctionnalité qui fait correspondre les URLs aux actions du
controller. En définissant des routes, vous pouvez séparer la façon dont votre
application est intégrée de la façon dont ses URLs sont structurées.</p>
<p>Le Routing dans CakePHP englobe aussi l&#8217;idée de routing inversé, où un tableau
de paramètres peut être transformé en une URL. En utilisant le routing inversé,
vous pouvez reconstruire la structure d&#8217;URL de votre application sans mettre à
jour tous vos codes.</p>
<div class="section" id="tour-rapide">
<span id="index-0"></span><h2>Tour Rapide<a class="headerlink" href="#tour-rapide" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette section va vous apprendre les utilisations les plus habituelles du Router
de CakePHP. Typiquement si vous voulez afficher quelque chose en page d&#8217;accueil,
vous ajoutez ceci au fichier <strong>routes.php</strong>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Router</span><span class="p">;</span>

<span class="c1">// EN utilisant le route builder scopé.</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// En utilisant la méthode statique.</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Router</span></code> fournit deux interfaces pour connecter les routes. La méthode
statique est une interface retro-compatible, alors que le builder scopé (lié la
portée) offre une syntaxe plus laconique pour construire des routes multiples,
et de meilleures performances.</p>
<p>Ceci va exécuter la méthode <code class="docutils literal"><span class="pre">index</span></code> dans <code class="docutils literal"><span class="pre">ArticlesController</span></code> quand la page
d&#8217;accueil de votre site est visitée. Parfois vous avez besoin de routes
dynamiques qui vont accepter plusieurs paramètres, ce sera par exemple le cas
d&#8217;une route pour voir le contenu d&#8217;un article:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/articles/*&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>La route ci-dessus accepte toute URL qui ressemble à <code class="docutils literal"><span class="pre">/articles/15</span></code> et appelle
la méthode <code class="docutils literal"><span class="pre">view(15)</span></code> dans <code class="docutils literal"><span class="pre">ArticlesController</span></code>. En revanche, ceci ne va pas
empêcher les visiteurs d&#8217;accéder à une URLs ressemblant à
<code class="docutils literal"><span class="pre">/articles/foobar</span></code>. Si vous le souhaitez, vous pouvez restreindre certains
paramètres grâce à une expression régulière:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/articles/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
<span class="p">)</span>
<span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">])</span>
<span class="o">-&gt;</span><span class="na">setPass</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">]);</span>

<span class="c1">// Avant 3.5, utilisez les tableaux d&#39;options</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/articles/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="s1">&#39;pass&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Dans l&#8217;exemple précédent, le caractère jocker <code class="docutils literal"><span class="pre">*</span></code> est remplacé par un
placeholder <code class="docutils literal"><span class="pre">:id</span></code>. Utiliser les placeholders nous permet de valider les
parties de l&#8217;URL, dans ce cas, nous utilisons l&#8217;expression régulière <code class="docutils literal"><span class="pre">\d+</span></code>
pour que seuls les chiffres fonctionnent. Finalement, nous disons au Router de
traiter le placeholder <code class="docutils literal"><span class="pre">id</span></code> comme un argument de fonction pour la fonction
<code class="docutils literal"><span class="pre">view()</span></code> en spécifiant l&#8217;option <code class="docutils literal"><span class="pre">pass</span></code>. Vous pourrez en voir plus sur leur
utilisation plus tard.</p>
<p>Le Router de CakePHP peut aussi faire correspondre les routes en reverse. Cela
signifie qu&#8217;à partir d&#8217;un tableau contenant des paramètres similaires, il est
capable de générer une chaîne URL:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Router</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">15</span><span class="p">]);</span>
<span class="c1">// Va afficher</span>
<span class="o">/</span><span class="nx">articles</span><span class="o">/</span><span class="mi">15</span>
</pre></div>
</div>
<p>Les routes peuvent aussi être labellisées avec un nom unique, cela vous permet
de rapidement leur faire référence lors de la construction des liens plutôt
que de spécifier chacun des paramètres de routing:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans le fichier routes.php</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/login&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">]</span>
<span class="p">);</span>

<span class="k">use</span> <span class="nx">Cake\Routing\Router</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span><span class="s1">&#39;_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">]);</span>
<span class="c1">// Va afficher</span>
<span class="o">/</span><span class="nx">login</span>
</pre></div>
</div>
<p>Pour aider à garder votre code de router &#8220;DRY&#8221;, le router apporte le concept
de &#8216;scopes&#8217;. Un scope (étendue) défini un segment de chemin commun, et
optionnellement des routes par défaut. Toute route connectée à l&#8217;intérieur d&#8217;un
scope héritera du chemin et des routes par défaut du scope qui la contient:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blog&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Le route ci-dessus matchera <code class="docutils literal"><span class="pre">/blog/</span></code> et renverra
<code class="docutils literal"><span class="pre">Blog\Controller\ArticlesController::index()</span></code>.</p>
<p>Le squelette d&#8217;application contient quelques routes pour vous aider à commencer.
Une fois que vous avez ajouté vos propres routes, vous pouvez retirer les routes
par défaut si vous n&#8217;en avez pas besoin.</p>
<span class="target" id="index-1"></span></div>
<div class="section" id="connecter-les-routes">
<span id="routes-configuration"></span><span id="connecting-routes"></span><span id="index-2"></span><h2>Connecter les Routes<a class="headerlink" href="#connecter-les-routes" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="method">
<dt id="Cake\Routing\Router::connect">
<code class="descclassname">Cake\Routing\Router::</code><code class="descname">connect</code><span class="sig-paren">(</span><em>$route</em>, <em>$defaults = []</em>, <em>$options = []</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::connect" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Pour garder votre code <a class="reference internal" href="../appendices/glossary.html#term-dry"><span class="xref std std-term">DRY</span></a>, vous pouvez utiliser les &#8216;routing scopes&#8217;.
Les scopes de Routing permettent non seulement de garder votre code DRY mais
aident aussi le Router à optimiser son opération. Comme vous l&#8217;avez vu
précédemment. Cette méthode va par défaut vers le scope <code class="docutils literal"><span class="pre">/</span></code>. Pour créer un
scope et connecter certaines routes, nous allons utiliser la méthode
<code class="docutils literal"><span class="pre">scope()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans config/routes.php</span>
<span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Connecte la route de &#39;fallback&#39; générique</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">fallbacks</span><span class="p">(</span><span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La méthode <code class="docutils literal"><span class="pre">connect()</span></code> prend trois paramètres: l&#8217;URL que vous souhaitez faire
correspondre, les valeurs par défaut pour les éléments de votre route, et les
règles d&#8217;expression régulière pour aider le router à faire correspondre les
éléments dans l&#8217;URL.</p>
<p>Le format basique pour une définition de route est:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/url/template&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;defaultValue&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;option&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;matchingRegex&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Le premier paramètre est utilisé pour dire au router quelle sorte d&#8217;URL vous
essayez de contrôler. L&#8217;URL est une chaîne normale délimitée par des slashes,
mais peut aussi contenir une wildcard (*) ou <a class="reference internal" href="#route-elements"><span class="std std-ref">Les Eléments de Route</span></a>. Utiliser
une wildcard dit au router que vous êtes prêt à accepter tout argument
supplémentaire fourni. Les Routes sans un * ne matchent que le pattern template
exact fourni.</p>
<p>Une fois que vous spécifiez une URL, vous utilisez les deux derniers paramètres
de <code class="docutils literal"><span class="pre">connect()</span></code> pour dire à CakePHP quoi faire avec une requête une fois
qu&#8217;elle a été matchée. Le deuxième paramètre est un tableau associatif. Les clés
du tableau devraient être appelées après les éléments de route dans l&#8217;URL, ou
les éléments par défaut: <code class="docutils literal"><span class="pre">:controller</span></code>, <code class="docutils literal"><span class="pre">:action</span></code>, et <code class="docutils literal"><span class="pre">:plugin</span></code>. Les
valeurs dans le tableau sont les valeurs par défaut pour ces clés. Regardons
quelques exemples simples avant que nous commencions à voir l&#8217;utilisation du
troisième paramètre de <code class="docutils literal"><span class="pre">connect()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/pages/*&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;display&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Cette route est trouvée dans le fichier routes.php distribué avec CakePHP. Cette
route matche toute URL commençant par <code class="docutils literal"><span class="pre">/pages/</span></code> et il tend vers l&#8217;action
<code class="docutils literal"><span class="pre">display()</span></code> de <code class="docutils literal"><span class="pre">PagesController</span></code> La requête <code class="docutils literal"><span class="pre">/pages/products</span></code> serait mappé
vers <code class="docutils literal"><span class="pre">PagesController-&gt;display('products')</span></code>.</p>
<p>En plus de l&#8217;étoile greedy <code class="docutils literal"><span class="pre">/*</span></code> il y aussi la syntaxe de l&#8217;étoile trailing
<code class="docutils literal"><span class="pre">/**</span></code>. Utiliser une étoile double trailing, va capturer le reste de l&#8217;URL en
tant qu&#8217;argument unique passé. Ceci est utile quand vous voulez utilisez un
argument qui incluait un <code class="docutils literal"><span class="pre">/</span></code> dedans:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/pages/**&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;show&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>L&#8217;URL entrante de <code class="docutils literal"><span class="pre">/pages/the-example-/-and-proof</span></code> résulterait en un argument
unique passé de <code class="docutils literal"><span class="pre">the-example-/-and-proof</span></code>.</p>
<p>Vous pouvez utiliser le deuxième paramètre de <code class="docutils literal"><span class="pre">connect()</span></code> pour fournir tout
paramètre de routing qui est composé des valeurs par défaut de la route:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/government&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;display&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Cet exemple montre comment vous pouvez utiliser le deuxième paramètre de
<code class="docutils literal"><span class="pre">connect()</span></code> pour définir les paramètres par défaut. Si vous construisez un
site qui propose des produits pour différentes catégories de clients, vous
pourriez considérer la création d&#8217;une route. Cela vous permet de vous lier à
<code class="docutils literal"><span class="pre">/government</span></code> plutôt qu&#8217;à <code class="docutils literal"><span class="pre">/pages/display/5</span></code>.</p>
<p>Une utilisation classique du routing peut impliquer la création de segments
d&#8217;URL qui ne correspondent pas aux noms de vos controllers ou de vos models.
Imaginons qu&#8217;au lieu de vouloir accéder à une URL <code class="docutils literal"><span class="pre">/users/some_action/5</span></code>,
vous souhaitiez y accéder via <code class="docutils literal"><span class="pre">/cooks/une_action/5</span></code>. Pour ce faire,
vous devriez configurer la route suivante:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/cooks/:action/*&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Cela dit au Router que toute URL commençant par <code class="docutils literal"><span class="pre">/cooks/</span></code> devrait être envoyée
au <code class="docutils literal"><span class="pre">UsersController</span></code>. L&#8217;action appelée dépendra de la valeur du paramètre
<code class="docutils literal"><span class="pre">:action</span></code>. En utilisant <a class="reference internal" href="#route-elements"><span class="std std-ref">Les Eléments de Route</span></a>, vous pouvez créer des routes
variables, qui acceptent les entrées utilisateur ou les variables. La route
ci-dessus utilise aussi l&#8217;étoile greedy. L&#8217;étoile greedy indique au
<a class="reference internal" href="#Cake\Routing\Router" title="Cake\Routing\Router"><code class="xref php php-class docutils literal"><span class="pre">Router</span></code></a> que cette route devrait accepter tout argument de position
supplémentaire donné. Ces arguments seront rendus disponibles dans le tableau
<a class="reference internal" href="#passed-arguments"><span class="std std-ref">Arguments Passés</span></a>.</p>
<p>Quand on génère les URLs, les routes sont aussi utilisées. Utiliser
<code class="docutils literal"><span class="pre">['controller'</span> <span class="pre">=&gt;</span> <span class="pre">'Users',</span> <span class="pre">'action'</span> <span class="pre">=&gt;</span> <span class="pre">'some_action',</span> <span class="pre">5]</span></code> en URL va sortir
<code class="docutils literal"><span class="pre">/cooks/some_action/5</span></code> si la route ci-dessus est la première correspondante
trouvée.</p>
<p>Les routes connectées jusque là fonctionneront avec n&#8217;importe quel verbe HTTP.
Si vous souhaitez construire une API REST, vous aurez probablement besoin de faire
correspondre des actions HTTP à des méthodes de controller différentes.
Le <code class="docutils literal"><span class="pre">RouteBuilder</span></code> met à disposition des méthodes qui rendent plus facile la
définition de routes pour des verbes HTTP spécifiques:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Crée une route qui ne répondra qu&#39;aux requêtes GET.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span>
    <span class="s1">&#39;/cooks/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
    <span class="s1">&#39;users:view&#39;</span>
<span class="p">);</span>

<span class="c1">// Crée une route qui ne répondra qu&#39;aux requêtes PUT</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">put</span><span class="p">(</span>
    <span class="s1">&#39;/cooks/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;update&#39;</span><span class="p">],</span>
    <span class="s1">&#39;users:update&#39;</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Les méthodes ci-dessus <em>mappent</em> la même URL à des actions différentes en fonction
du verbe HTTP utilisé. Les requêtes GET pointeront sur l&#8217;action &#8216;view&#8217; tandis que les
requêtes PUT pointeront sur l&#8217;action &#8216;update&#8217;. Ces méthodes sont disponibles pour les
verbes :</p>
<ul class="simple">
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>PATCH</li>
<li>DELETE</li>
<li>OPTIONS</li>
<li>HEAD</li>
</ul>
<p>Toutes ces méthodes retournent une instance de Route ce qui vous permet d&#8217;utiliser les
<a class="reference internal" href="#route-fluent-methods"><span class="std std-ref">setters fluides</span></a> pour configurer plus précisément vos
routes.</p>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.5.0: </span>Les méthodes pour les verbes HTTP ont été ajoutées dans 3.5.0</p>
</div>
<div class="section" id="les-elements-de-route">
<span id="route-elements"></span><h3>Les Eléments de Route<a class="headerlink" href="#les-elements-de-route" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez spécifier vos propres éléments de route et ce faisant
cela vous donne le pouvoir de définir des places dans l&#8217;URL où les
paramètres pour les actions du controller doivent se trouver. Quand
une requête est faite, les valeurs pour ces éléments de route se
trouvent dans <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam()</span></code> dans le controller. Quand vous
définissez un élément de route personnalisé, vous pouvez spécifier en option
une expression régulière - ceci dit à CakePHP comment savoir si l&#8217;URL est
correctement formée ou non. Si vous choisissez de ne pas fournir une expression
régulière, toute expression non <code class="docutils literal"><span class="pre">/</span></code> sera traitée comme une partie du
paramètre:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">]);</span>

<span class="c1">// Avant 3.5, utilisez les options de tableau</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:id&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Cet exemple simple montre comment créer une manière rapide de voir les models
à partir de tout controller en élaborant une URL qui ressemble à
<code class="docutils literal"><span class="pre">/controllername/:id</span></code>. L&#8217;URL fournie à connect() spécifie deux éléments de
route: <code class="docutils literal"><span class="pre">:controller</span></code> et <code class="docutils literal"><span class="pre">:id</span></code>. L&#8217;élément <code class="docutils literal"><span class="pre">:controller</span></code> est l&#8217;élément de
route par défaut de CakePHP, donc le router sait comment matcher et identifier
les noms de controller dans les URLs. L&#8217;élément <code class="docutils literal"><span class="pre">:id</span></code> est un élément de route
personnalisé, et doit être clarifié plus loin en spécifiant une expression
régulière correspondante dans le troisième paramètre de <code class="docutils literal"><span class="pre">connect()</span></code>.</p>
<p>CakePHP ne produit pas automatiquement d&#8217;urls en minuscule avec des tirets quand
vous utilisez le paramètre <code class="docutils literal"><span class="pre">:controller</span></code>. Si vous avez besoin de ceci,
l&#8217;exemple ci-dessus peut être réécrit en:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="c1">// Crée un builder avec une classe de Route différente.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>

    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setRouteClass</span><span class="p">(</span><span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller/:id&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">])</span>
        <span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">]);</span>

    <span class="c1">// Avant 3.5, utilisez le tableau d&#39;options</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/:controller/:id&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">]</span>
    <span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La classe spéciale <code class="docutils literal"><span class="pre">DashedRoute</span></code> va s&#8217;assurer que les paramètres
<code class="docutils literal"><span class="pre">:controller</span></code> et <code class="docutils literal"><span class="pre">:plugin</span></code> sont correctement mis en minuscule et avec des
tirets. Si vous avez besoin d&#8217;URLs en minuscule avec des underscores en migrant
d&#8217;une application CakePHP 2.x, vous pouvez utiliser à la place la classe
<code class="docutils literal"><span class="pre">InflectedRoute</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les Patrons utilisés pour les éléments de route ne doivent pas contenir
de groupes capturés. S&#8217;ils le font, le Router ne va pas fonctionner
correctement.</p>
</div>
<p>Une fois que cette route a été définie, la requête <code class="docutils literal"><span class="pre">/apples/5</span></code> est la même
que celle requêtant <code class="docutils literal"><span class="pre">/apples/view/5</span></code>. Les deux appelleraient la méthode <code class="docutils literal"><span class="pre">view()</span></code>
de ApplesController. A l&#8217;intérieur de la méthode <code class="docutils literal"><span class="pre">view()</span></code>, vous aurez besoin
d&#8217;accéder à l&#8217;ID passé à <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('id')</span></code>.</p>
<p>Si vous avez un unique controller dans votre application et que vous ne
voulez pas que le nom du controller apparaisse dans l&#8217;URL, vous pouvez mapper
toutes les URLs aux actions dans votre controller. Par exemple, pour mapper
toutes les URLs aux actions du controller <code class="docutils literal"><span class="pre">home</span></code>, par ex avoir des URLs
comme <code class="docutils literal"><span class="pre">/demo</span></code> à la place de <code class="docutils literal"><span class="pre">/home/demo</span></code>, vous pouvez faire ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:action&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Home&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Si vous souhaitez fournir une URL non sensible à la casse, vous pouvez utiliser
les modificateurs en ligne d&#8217;expression régulière:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Avant 3.5, utilisez le tableau d&#39;options à la place de setPatterns()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:userShortcut&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Teachers&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span><span class="s1">&#39;userShortcut&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;(?i:principal)&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Un exemple de plus, et vous serez un pro du routing:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Avant 3.5, utilisez le tableau d&#39;options à la place de setPatterns()</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:controller/:year/:month/:day&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span>
    <span class="s1">&#39;year&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[12][0-9]{3}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;month&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;0[1-9]|1[012]&#39;</span><span class="p">,</span>
    <span class="s1">&#39;day&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;0[1-9]|[12][0-9]|3[01]&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>C&#8217;est assez complexe, mais montre comme les routes peuvent vraiment
devenir puissantes. L&#8217;URL fournie a quatre éléments de route. Le premier
nous est familier: c&#8217;est une route par défaut qui dit à CakePHP d&#8217;attendre
un nom de controller.</p>
<p>Ensuite, nous spécifions quelques valeurs par défaut. Quel que soit le
controller, nous voulons que l&#8217;action <code class="docutils literal"><span class="pre">index()</span></code> soit appelée.</p>
<p>Finalement, nous spécifions quelques expressions régulières qui vont
matcher les années, mois et jours sous forme numérique. Notez que les
parenthèses (le groupement) ne sont pas supportées dans les expressions
régulières. Vous pouvez toujours spécifier des alternatives, comme
dessus, mais ne pas grouper avec les parenthèses.</p>
<p>Une fois définie, cette route va matcher <code class="docutils literal"><span class="pre">/articles/2007/02/01</span></code>,
<code class="docutils literal"><span class="pre">/posts/2004/11/16</span></code>, gérant les requêtes
pour les actions <code class="docutils literal"><span class="pre">index()</span></code> de ses controllers respectifs, avec les paramètres de
date dans <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam()</span></code>.</p>
<p>Il y a plusieurs éléments de route qui ont une signification spéciale dans
CakePHP, et ne devraient pas être utilisés à moins que vous ne souhaitiez
spécifiquement utiliser leur signification.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">controller</span></code> Utilisé pour nommer le controller pour une route.</li>
<li><code class="docutils literal"><span class="pre">action</span></code> Utilisé pour nommer l&#8217;action de controller pour une route.</li>
<li><code class="docutils literal"><span class="pre">plugin</span></code> Utilisé pour nommer le plugin dans lequel un controller est
localisé.</li>
<li><code class="docutils literal"><span class="pre">prefix</span></code> Utilisé pour <a class="reference internal" href="#prefix-routing"><span class="std std-ref">Prefix de Routage</span></a>.</li>
<li><code class="docutils literal"><span class="pre">_ext</span></code> Utilisé pour <a class="reference internal" href="#file-extensions"><span class="std std-ref">Routing des Extensions de Fichier</span></a>.</li>
<li><code class="docutils literal"><span class="pre">_base</span></code> Défini à <code class="docutils literal"><span class="pre">false</span></code> pour retirer le chemin de base de l&#8217;URL générée.
Si votre application n&#8217;est pas dans le répertoire racine, cette option peut
être utilisée pour générer les URLs qui sont &#8216;liées à cake&#8217;.</li>
<li><code class="docutils literal"><span class="pre">_scheme</span></code> Défini pour créer les liens sur les schémas différents comme
<cite>webcal</cite> ou <cite>ftp</cite>. Par défaut, au schéma courant.</li>
<li><code class="docutils literal"><span class="pre">_host</span></code> Définit l&#8217;hôte à utiliser pour le lien. Par défaut à l&#8217;hôte courant.</li>
<li><code class="docutils literal"><span class="pre">_port</span></code> Définit le port si vous avez besoin de créer les liens sur des ports
non-standards.</li>
<li><code class="docutils literal"><span class="pre">_full</span></code> Si à <code class="docutils literal"><span class="pre">true</span></code>, la constante <cite>FULL_BASE_URL</cite> va être ajoutée devant
les URLS générées.</li>
<li><code class="docutils literal"><span class="pre">#</span></code> Vous permet de définir les fragments de hash d&#8217;URL.</li>
<li><code class="docutils literal"><span class="pre">_ssl</span></code> Défini à <code class="docutils literal"><span class="pre">true</span></code> pour convertir l&#8217;URL générée à https, ou <code class="docutils literal"><span class="pre">false</span></code>
pour forcer http.</li>
<li><code class="docutils literal"><span class="pre">_method</span></code> Defini la méthode HTTP à utiliser. utile si vous travaillez avec
<a class="reference internal" href="#resource-routes"><span class="std std-ref">Créer des Routes RESTful</span></a>.</li>
<li><code class="docutils literal"><span class="pre">_name</span></code> Nom de route. Si vous avez configuré les routes nommées, vous
pouvez utiliser cette clé pour les spécifier.</li>
</ul>
</div>
<div class="section" id="configurer-les-options-de-route">
<span id="route-fluent-methods"></span><h3>Configurer les Options de Route<a class="headerlink" href="#configurer-les-options-de-route" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il y a de nombreuses options de routes qui peuvent être définies pour chaque route.
Après avoir connecté une route, vous pouvez utiliser ses méthodes de construction
fluide pour la configurer. Ces méthodes remplacent la majorité des clés du paramètre
<code class="docutils literal"><span class="pre">$options</span></code> de la méthode <code class="docutils literal"><span class="pre">connect()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/:lang/articles/:slug&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
<span class="p">)</span>
<span class="c1">// Autorise les requêtes GET &amp; POST.</span>
<span class="o">-&gt;</span><span class="na">setMethods</span><span class="p">([</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>

<span class="c1">// Match seulement le sous-domaine &#39;blog&#39;</span>
<span class="o">-&gt;</span><span class="na">setHost</span><span class="p">(</span><span class="s1">&#39;blog.example.com&#39;</span><span class="p">)</span>

<span class="c1">// Définit l&#39;élément de la route qui devrait être converti en argument</span>
<span class="o">-&gt;</span><span class="na">setPass</span><span class="p">([</span><span class="s1">&#39;slug&#39;</span><span class="p">])</span>

<span class="c1">// Définit les patterns de correspondance pour les éléments de route</span>
<span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span>
    <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[a-z0-9-_]+&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lang&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;en|fr|es&#39;</span><span class="p">,</span>
<span class="p">])</span>

<span class="c1">// Autorise également l&#39;extension JSON</span>
<span class="o">-&gt;</span><span class="na">setExtenions</span><span class="p">([</span><span class="s1">&#39;json&#39;</span><span class="p">])</span>

<span class="c1">// Définit &#39;lang&#39; pour être un paramètre persistant</span>
<span class="o">-&gt;</span><span class="na">setPersist</span><span class="p">([</span><span class="s1">&#39;lang&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.5.0: </span>Les méthodes fluides ont été ajoutées dans 3.5.0</p>
</div>
</div>
<div class="section" id="passer-des-parametres-a-l-action">
<h3>Passer des Paramètres à l&#8217;Action<a class="headerlink" href="#passer-des-parametres-a-l-action" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand vous connectez les routes en utilisant
<a class="reference internal" href="#route-elements"><span class="std std-ref">Les Eléments de Route</span></a> vous voudrez peut-être que des éléments routés
soient passés aux arguments à la place. L&#8217;option <code class="docutils literal"><span class="pre">pass</span></code> défini une liste
des éléments de route doit également être rendu disponible en tant qu&#8217;arguments
passé aux fonctions du controller:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// src/Controller/BlogsController.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">view</span><span class="p">(</span><span class="nv">$articleId</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$slug</span> <span class="o">=</span> <span class="k">null</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// du code ici...</span>
<span class="p">}</span>

<span class="c1">// routes.php</span>
<span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/blog/:id-:slug&#39;</span><span class="p">,</span> <span class="c1">// E.g. /blog/3-CakePHP_Rocks</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blogs&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="c1">// Défini les éléments de route dans le template de route</span>
    <span class="c1">// à passer en tant qu&#39;arguments à la fonction. L&#39;ordre est</span>
    <span class="c1">// important car cela fera simplement correspondre &quot;:id&quot; avec</span>
    <span class="c1">// articleId dans votre action.</span>
    <span class="o">-&gt;</span><span class="na">setPass</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;slug&#39;</span><span class="p">])</span>
    <span class="c1">// Defini un pattern que `id` doit avoir.</span>
    <span class="o">-&gt;</span><span class="na">setPatterns</span><span class="p">([</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;[0-9]+&#39;</span><span class="p">,</span>
    <span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Maintenant, grâce aux possibilités de routing inversé, vous pouvez passer
dans le tableau d&#8217;URL comme ci-dessous et CakePHP sait comment former l&#8217;URL
comme définie dans les routes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// view.ctp</span>
<span class="c1">// ceci va retourner un lien vers /blog/3-CakePHP_Rocks</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;CakePHP Rocks&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blog&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;slug&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CakePHP_Rocks&#39;</span>
<span class="p">]);</span>

<span class="c1">// Vous pouvez aussi utiliser des paramètres indexés numériquement.</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;CakePHP Rocks&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Blog&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;CakePHP_Rocks&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="utiliser-les-routes-nommees">
<span id="named-routes"></span><h3>Utiliser les Routes Nommées<a class="headerlink" href="#utiliser-les-routes-nommees" title="Lien permanent vers ce titre">¶</a></h3>
<p>Parfois vous trouvez que taper tous les paramètres de l&#8217;URL pour une route est
trop verbeux, ou bien vous souhaitez tirer avantage des améliorations de la
performance que les routes nommées permettent. Lorsque vous connectez les
routes, vous pouvez spécifier une option <code class="docutils literal"><span class="pre">_name</span></code>, cette option peut être
utilisée pour le routing inversé pour identifier la route que vous souhaitez
utiliser:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Connecter une route avec un nom.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
    <span class="s1">&#39;/login&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="s1">&#39;_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">]</span>
<span class="p">);</span>

<span class="c1">// Nommage d&#39;une route liée à un verbe spécifique (3.5.0+)</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span>
    <span class="s1">&#39;/logout&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;logout&#39;</span><span class="p">],</span>
    <span class="s1">&#39;logout&#39;</span>
<span class="p">);</span>

<span class="c1">// Génère une URL en utilisant une route nommée.</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span><span class="s1">&#39;_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;logout&#39;</span><span class="p">]);</span>

<span class="c1">// Génère une URL en utilisant une route nommée,</span>
<span class="c1">// avec certains args query string</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span><span class="s1">&#39;_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jimmy&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Si votre template de route contient des éléments de route comme <code class="docutils literal"><span class="pre">:controller</span></code>,
vous aurez besoin de fournir ceux-ci comme options de <code class="docutils literal"><span class="pre">Router::url()</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les noms de Route doivent être uniques pour l&#8217;ensemble de votre application.
Le même <code class="docutils literal"><span class="pre">_name</span></code> ne peut être utilisé deux fois, même si les noms
apparaissent dans un scope de routing différent.</p>
</div>
<p>Quand vous construisez vos noms de routes, vous voudrez probablement coller
à certaines conventions pour les noms de route. CakePHP facilite la construction
des noms de route en vous permtttant de définir des préfixes de nom dans chaque
scope:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_namePrefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;api:&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// le nom de cette route sera `api:ping`</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/ping&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pings&#39;</span><span class="p">],</span> <span class="s1">&#39;ping&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;Contacts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_namePrefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;contacts:&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Connecte les routes.</span>
<span class="p">});</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;Admin&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_namePrefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin:&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Connecte les routes.</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Vous pouvez aussi utiliser l&#8217;option <code class="docutils literal"><span class="pre">_namePrefix</span></code> dans les scopes imbriqués et
elle fonctionne comme vous pouvez vous y attendre:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;Contacts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_namePrefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;contacts:&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;_namePrefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;api:&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Le nom de cette route sera `contacts:api:ping`</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/ping&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pings&#39;</span><span class="p">],</span> <span class="s1">&#39;ping&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Les routes connectées dans les scopes nommés auront seulement des noms ajoutés
si la route est aussi nommée. Les routes sans nom ne se verront pas appliquées
<code class="docutils literal"><span class="pre">_namePrefix</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.1: </span>L&#8217;option <code class="docutils literal"><span class="pre">_namePrefix</span></code> a été ajoutée dans 3.1</p>
</div>
</div>
<div class="section" id="prefix-de-routage">
<span id="prefix-routing"></span><span id="index-3"></span><h3>Prefix de Routage<a class="headerlink" href="#prefix-de-routage" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="staticmethod">
<dt id="Cake\Routing\Router::prefix">
<em class="property">static </em><code class="descclassname">Cake\Routing\Router::</code><code class="descname">prefix</code><span class="sig-paren">(</span><em>$name</em>, <em>$callback</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::prefix" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>De nombreuses applications nécessitent une section d&#8217;administration dans
laquelle les utilisateurs privilégiés peuvent faire des modifications.
Ceci est souvent réalisé grâce à une URL spéciale telle que
<code class="docutils literal"><span class="pre">/admin/users/edit/5</span></code>. Dans CakePHP, les préfixes de routage peuvent être
activés depuis le fichier de configuration du cœur en configurant les
préfixes avec Routing.prefixes. Les préfixes peuvent être soit activés en
utilisant la valeur de configuration <code class="docutils literal"><span class="pre">Routing.prefixes</span></code>, soit en définissant
la clé <code class="docutils literal"><span class="pre">prefix</span></code> avec un appel de <code class="docutils literal"><span class="pre">Router::connect()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Toutes les routes ici seront préfixées avec `/admin` et auront</span>
    <span class="c1">// l&#39;élément de route prefix =&gt; admin ajouté.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">fallbacks</span><span class="p">(</span><span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Les préfixes sont mappés aux sous-espaces de noms dans l&#8217;espace de nom
<code class="docutils literal"><span class="pre">Controller</span></code> de votre application. En ayant des préfixes en tant que
controller séparés, vous pouvez créer de plus petits et/ou de plus simples
controllers. Les comportements communs aux controllers préfixés et non-préfixés
peuvent être encapsulés via l&#8217;héritage, les <a class="reference internal" href="../controllers/components.html"><span class="doc">Components (Composants)</span></a>, ou
les traits. En utilisant notre exemple des utilisateurs, accéder à l&#8217;url
<code class="docutils literal"><span class="pre">/admin/users/edit/5</span></code> devrait appeler la méthode <code class="docutils literal"><span class="pre">edit()</span></code> de notre
<code class="docutils literal"><span class="pre">App\Controller\Admin\UsersController</span></code> en passant 5 comme premier paramètre.
Le fichier de vue utilisé serait <strong>src/Template/Admin/Users/edit.ctp</strong>.</p>
<p>Vous pouvez faire correspondre l&#8217;URL /admin à votre action <code class="docutils literal"><span class="pre">index()</span></code>
du controller Pages en utilisant la route suivante:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Parce que vous êtes dans le scope admin, vous n&#39;avez pas besoin</span>
    <span class="c1">// d&#39;inclure le prefix /admin ou l&#39;élément de route admin.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Quand vous créez des routes préfixées, vous pouvez définir des paramètres de
route supplémentaires en utilisant l&#8217;argument <code class="docutils literal"><span class="pre">$options</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;param&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;value&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Routes connectées ici sont préfixées par &#39;/admin&#39; et</span>
    <span class="c1">// ont la clé &#39;param&#39; de routing définie.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Vous pouvez aussi définir les préfixes dans les scopes de plugin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;DebugKit&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Ce qui est au-dessus va créer un template de route de type
<code class="docutils literal"><span class="pre">/debug_kit/admin/:controller</span></code>. La route connectée aura les éléments de
route <code class="docutils literal"><span class="pre">plugin</span></code> et <code class="docutils literal"><span class="pre">prefix</span></code> définis.</p>
<p>Quand vous définissez des préfixes, vous pouvez imbriquer plusieurs préfixes
si besoin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;manager&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Ce qui est au-dessus va créer un template de route de type
<code class="docutils literal"><span class="pre">/manager/admin/:controller</span></code>. La route connectée aura l&#8217;élément de
route <code class="docutils literal"><span class="pre">prefix</span></code> défini à <code class="docutils literal"><span class="pre">manager/admin</span></code>.</p>
<p>Le préfixe actuel sera disponible à partir des méthodes du controller avec
<code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('prefix')</span></code></p>
<p>Quand vous utilisez les routes préfixées, il est important de définir l&#8217;option
prefix. Voici comment construire ce lien en utilisant le helper HTML:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Aller vers une route préfixée.</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;Manage articles&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;manager&#39;</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;add&#39;</span><span class="p">]</span>
<span class="p">);</span>

<span class="c1">// Enlever un prefix</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;View Post&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Vous devez connecter les routes préfixées <em>avant</em> de connecter les routes
fallback.</p>
</div>
</div>
<div class="section" id="routing-des-plugins">
<span id="index-4"></span><h3>Routing des Plugins<a class="headerlink" href="#routing-des-plugins" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="staticmethod">
<dt id="Cake\Routing\Router::plugin">
<em class="property">static </em><code class="descclassname">Cake\Routing\Router::</code><code class="descname">plugin</code><span class="sig-paren">(</span><em>$name</em>, <em>$options = []</em>, <em>$callback</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::plugin" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Les routes des <a class="reference internal" href="../plugins.html"><span class="doc">Plugins</span></a> sont plus faciles à créer en utilisant la méthode
<code class="docutils literal"><span class="pre">plugin()</span></code>. Cette méthode crée un nouveau scope pour les routes de plugin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;DebugKit&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Les routes connectées ici sont préfixées par &#39;/debug_kit&#39; et ont</span>
    <span class="c1">// l&#39;élément de route plugin défini à &#39;DebugKit&#39;.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Lors de la création des scopes de plugin, vous pouvez personnaliser le chemin de
l&#8217;élément avec l&#8217;option <code class="docutils literal"><span class="pre">path</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;DebugKit&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/debugger&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Les routes connectées ici sont préfixées par &#39;/debugger&#39; et ont</span>
    <span class="c1">// l&#39;élément de route plugin défini à &#39;DebugKit&#39;.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Lors de l&#8217;utilisation des scopes, vous pouvez imbriquer un scope de plugin dans
un scope de prefix:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">prefix</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;DebugKit&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Le code ci-dessus devrait créer une route similaire à
<code class="docutils literal"><span class="pre">/admin/debug_kit/:controller</span></code>. Elle devrait avoir les éléments de route
<code class="docutils literal"><span class="pre">prefix</span></code> et <code class="docutils literal"><span class="pre">plugin</span></code> définis. Référez-vous à la section <a class="reference internal" href="../plugins.html#plugin-routes"><span class="std std-ref">Routes de Plugins</span></a>
pour avoir plus d&#8217;informations sur comment construire des routes de plugin.</p>
</div>
<div class="section" id="creer-des-liens-vers-des-routes-de-plugins">
<h3>Créer des Liens vers des Routes de Plugins<a class="headerlink" href="#creer-des-liens-vers-des-routes-de-plugins" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez créer des liens qui pointent vers un plugin, en ajoutant la clé
<code class="docutils literal"><span class="pre">plugin</span></code> au tableau de l&#8217;URL:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;New todo&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Todo&#39;</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;TodoItems&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;create&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Inversement, si la requête active est une requête de plugin et que vous
souhaitez créer un lien qui n&#8217;a pas de plugin, vous pouvez faire ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;New todo&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;plugin&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;profile&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>En définissant <code class="docutils literal"><span class="pre">'plugin'</span> <span class="pre">=&gt;</span> <span class="pre">null</span></code>, vous dites au Router que vous souhaitez
créer un lien qui n&#8217;appartient pas à un plugin.</p>
</div>
<div class="section" id="routing-favorisant-le-seo">
<h3>Routing Favorisant le SEO<a class="headerlink" href="#routing-favorisant-le-seo" title="Lien permanent vers ce titre">¶</a></h3>
<p>Certains développeurs préfèrent utiliser des tirets dans les URLs, car cela
semble donner un meilleur classement dans les moteurs de recherche.
La classe <code class="docutils literal"><span class="pre">DashedRoute</span></code> fournit à votre application la possibilité de créer
des URLs avec des tirets pour vos plugins, controllers, et les noms d&#8217;action en
<code class="docutils literal"><span class="pre">camelCase</span></code>.</p>
<p>Par exemple, si nous avons un plugin <code class="docutils literal"><span class="pre">ToDo</span></code> avec un controller <code class="docutils literal"><span class="pre">TodoItems</span></code>
et une action <code class="docutils literal"><span class="pre">showItems()</span></code>, la route générée sera
<code class="docutils literal"><span class="pre">/to-do/todo-items/show-items</span></code> avec le code qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">plugin</span><span class="p">(</span><span class="s1">&#39;ToDo&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;to-do&#39;</span><span class="p">],</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">fallbacks</span><span class="p">(</span><span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="matching-des-methodes-http-specifiques">
<h3>Matching des Méthodes HTTP Spécifiques<a class="headerlink" href="#matching-des-methodes-http-specifiques" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les routes peuvent &#8220;matcher&#8221; des méthodes HTTP spécifiques en utilisant
les méthodes spécifiques:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Cette route matchera seulement les requêtes POST.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span>
        <span class="s1">&#39;/reviews/start&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Reviews&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;start&#39;</span><span class="p">]</span>
    <span class="p">);</span>

    <span class="c1">// Matcher plusieurs verbes</span>
    <span class="c1">// Avant 3.5, utilisez $options[&#39;_method&#39;] pour définir les méthodes</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/reviews/start&#39;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Reviews&#39;</span><span class="p">,</span>
            <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span><span class="o">-&gt;</span><span class="na">setMethods</span><span class="p">([</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Vous pouvez &#8220;matcher&#8221; plusieurs méthodes HTTP en fournissant un tableau.
Puisque que l&#8217;option <code class="docutils literal"><span class="pre">_method</span></code> est une clé de routage, elle est utilisée à la
fois dans le parsing des URL et la génération des URL. Pour générer des URL pour
des routes spécifiques, vous devez utiliser la clé <code class="docutils literal"><span class="pre">_method</span></code> lors de la génération:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$url</span> <span class="o">=</span> <span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Reviews&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span>
    <span class="s1">&#39;_method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="matching-de-noms-de-domaine-specifiques">
<h3>Matching de Noms de Domaine Spécifiques<a class="headerlink" href="#matching-de-noms-de-domaine-specifiques" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les routes peuvent utiliser l&#8217;option <code class="docutils literal"><span class="pre">_host</span></code> pour &#8220;matcher&#8221; des noms de
domaines spécifiques. Vous pouvez utiliser la wildcard <code class="docutils literal"><span class="pre">*.</span></code> pour &#8220;matcher&#8221;
n&#8217;importe quelle sous-domaine:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Cette route ne va &quot;matcher&quot; que sur le domaine http://images.example.com</span>
    <span class="c1">// Avant 3.5, utilisez l&#39;option _host</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/images/default-logo.png&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Images&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;default&#39;</span><span class="p">]</span>
    <span class="p">)</span><span class="o">-&gt;</span><span class="na">setHost</span><span class="p">(</span><span class="s1">&#39;images.example.com&#39;</span><span class="p">);</span>

    <span class="c1">// Cette route matchera sur tous les sous-domaines http://*.example.com</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/images/old-log.png&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Images&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;oldLogo&#39;</span><span class="p">]</span>
    <span class="p">)</span><span class="o">-&gt;</span><span class="na">setHost</span><span class="p">(</span><span class="s1">&#39;images.example.com&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>L&#8217;option <code class="docutils literal"><span class="pre">_host</span></code> n&#8217;affecte que le parsing des URL depuis les requêtes et
n&#8217;intervient jamais dans la génération d&#8217;URL.</p>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.4.0: </span>L&#8217;option <code class="docutils literal"><span class="pre">_host</span></code> a été ajoutée dans la version 3.4.0</p>
</div>
</div>
<div class="section" id="routing-des-extensions-de-fichier">
<span id="file-extensions"></span><span id="index-5"></span><h3>Routing des Extensions de Fichier<a class="headerlink" href="#routing-des-extensions-de-fichier" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="staticmethod">
<dt id="Cake\Routing\Router::extensions">
<em class="property">static </em><code class="descclassname">Cake\Routing\Router::</code><code class="descname">extensions</code><span class="sig-paren">(</span><em>string|array|null $extensions</em>, <em>$merge = true</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::extensions" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Pour manipuler différentes extensions de fichier avec vos routes, vous pouvez
définir vos extensions de manière globale ou dans un <em>scope</em>. Définir des
extensions globales peut se faire via la méthode static <a class="reference internal" href="#Cake\Routing\Router::extensions" title="Cake\Routing\Router::extensions"><code class="xref php php-meth docutils literal"><span class="pre">Router::extensions()</span></code></a></p>
<blockquote>
<div>Router::extensions([&#8216;json&#8217;, &#8216;xml&#8217;]);
// ...</div></blockquote>
<p>Ceci affectera <strong>toutes</strong> les routes qui seront connectées <strong>après</strong> cet appel,
quelque soit leur <em>scope</em>.</p>
<p>Pour restreindre les extensions à un <em>scope</em> spécifique, vous pouvez les définir
en utilisant la méthode <code class="xref php php-meth docutils literal"><span class="pre">Cake\Routing\RouteBuilder::extensions()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Avant 3.5.0 utilisez `extensions()`</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setExtensions</span><span class="p">([</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">]);</span>
    <span class="c1">// ...</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Cela activera les extensions pour toutes les routes qui seront définies dans ce
scope <strong>après</strong> l&#8217;appel à <code class="docutils literal"><span class="pre">extensions()</span></code>, tout en incluant les routes inclus
dans les scopes imbriqués. De la même manière que la méthode <a class="reference internal" href="#Cake\Routing\Router::extensions" title="Cake\Routing\Router::extensions"><code class="xref php php-meth docutils literal"><span class="pre">Router::extensions()</span></code></a>,
toutes les routes connectées avant cet appel n&#8217;hériteront pas de ces extensions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Le réglage des extensions devrait être la première chose que vous devriez
faire dans un scope, car les extensions seront appliquées uniquement aux
routes qui sont définies <strong>après</strong> la déclaration des extensions.</p>
<p class="last">Lorsque vous définissez des routes dans le même scope mais dans deux appels
différents, les extensions ne seront pas héritées d&#8217;un appel à l&#8217;autre.</p>
</div>
<p>En utilisant des extensions, vous dites au router de supprimer toutes les
extensions de fichiers correspondant, puis d&#8217;analyser le reste. Si vous
souhaitez créer une URL comme <code class="docutils literal"><span class="pre">/page/title-of-page.html</span></code> vous devriez créer
un scope comme ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/page&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setExtensions</span><span class="p">([</span><span class="s1">&#39;json&#39;</span><span class="p">,</span> <span class="s1">&#39;xml&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">]);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
        <span class="s1">&#39;/:title&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">]</span>
    <span class="p">)</span><span class="o">-&gt;</span><span class="na">setPass</span><span class="p">([</span><span class="s1">&#39;title&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Ensuite, pour créer des liens, utilisez simplement:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;Link title&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Pages&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;super-article&#39;</span><span class="p">,</span> <span class="s1">&#39;_ext&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Les extensions de fichier sont utilisées par le
<a class="reference internal" href="../controllers/components/request-handling.html"><span class="doc">Request Handling (Gestion des requêtes)</span></a> qui fait la commutation des
vues automatiquement en se basant sur les types de contenu.</p>
</div>
<div class="section" id="connecter-des-middlewares-a-un-scope">
<span id="connecting-scoped-middleware"></span><h3>Connecter des Middlewares à un scope<a class="headerlink" href="#connecter-des-middlewares-a-un-scope" title="Lien permanent vers ce titre">¶</a></h3>
<p>Bien que les middlewares puissent être appliqués à toute votre application, appliquer
les middlewares à des &#8216;scopes&#8217; de routing offre plus de flexibilité puisque vous
pouvez appliquer des middlewares seulement où ils sont nécessaires permettant à vos
middlewares de ne pas nécessiter de logique spécifique sur le comment / où il doit
s&#8217;appliquer.</p>
<p>Avant qu&#8217;un middleware ne puisse être appliqué à un scope, il a besoin d&#8217;être
enregistré dans la collection de routes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// in config/routes.php</span>
<span class="k">use</span> <span class="nx">Cake\Http\Middleware\CsrfProtectionMiddleware</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\Http\Middleware\EncryptedCookieMiddleware</span><span class="p">;</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">registerMiddleware</span><span class="p">(</span><span class="s1">&#39;csrf&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">CsrfProtectionMiddleware</span><span class="p">());</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">registerMiddleware</span><span class="p">(</span><span class="s1">&#39;cookies&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">EncryptedCookieMiddleware</span><span class="p">());</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Une fois enregistré dans le builder de routes, le middleware peut être appliqué
à des scopes spécifiques:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/cms&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Active les middlewares enregistrés pour ce scope.</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">applyMiddleware</span><span class="p">(</span><span class="s1">&#39;csrf&#39;</span><span class="p">,</span> <span class="s1">&#39;cookies&#39;</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/articles/:action/*&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">])</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Dans le cas où vous auriez des &#8216;scopes&#8217; imbriqués, les &#8220;sous&#8221; scopes hériteront
des middlewares apppliqués dans le scope contenant:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">applyMiddleware</span><span class="p">(</span><span class="s1">&#39;ratelimit&#39;</span><span class="p">,</span> <span class="s1">&#39;auth.api&#39;</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/v1&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">applyMiddleware</span><span class="p">(</span><span class="s1">&#39;v1compat&#39;</span><span class="p">);</span>
        <span class="c1">// Définissez vos routes</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Dans l&#8217;exemple ci-dessus, les routes définies dans <code class="docutils literal"><span class="pre">/v1</span></code> auront les middlewares
&#8216;ratelimit&#8217;, &#8216;auth.api&#8217;, and &#8216;v1compat&#8217; appliqués. Si vous ré-ouvrez un scope, les
middlewares appliqués aux routes dans chaque scopes seront isolés:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">applyMiddleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">);</span>
    <span class="c1">// Connecter les actions qui nécessitent l&#39;authentification aux &#39;blog&#39; ici</span>
<span class="p">});</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/blog&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Connecter les actions publiques pour le &#39;blog&#39; ici</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Dans l&#8217;exemple ci-dessus, les 2 utilisations du scope <code class="docutils literal"><span class="pre">/blog</span></code> ne partagent
pas les middlewares. Par contre, les 2 scopes hériteront des middlewares définis
dans le scope qui les contient.</p>
</div>
<div class="section" id="grouper-les-middlewares">
<h3>Grouper les Middlewares<a class="headerlink" href="#grouper-les-middlewares" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour vous aider à garder votre code <abbr title="Do not Repeat Yourself">DRY</abbr>, les
middlewares peuvent être combinés en groupes. Une fois créés, les groupes peuvent
être appliqués comme des middlewares:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">registerMiddleware</span><span class="p">(</span><span class="s1">&#39;cookie&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">EncryptedCookieMiddleware</span><span class="p">());</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">registerMiddleware</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">AuthenticationMiddleware</span><span class="p">());</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">registerMiddleware</span><span class="p">(</span><span class="s1">&#39;csrf&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">CsrfProtectionMiddleware</span><span class="p">());</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">middlewareGroup</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;cookie&#39;</span><span class="p">,</span> <span class="s1">&#39;auth&#39;</span><span class="p">,</span> <span class="s1">&#39;csrf&#39;</span><span class="p">]);</span>

<span class="c1">// Application du groupe</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">applyMiddleware</span><span class="p">(</span><span class="s1">&#39;web&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.5.0: </span>Le support des middlewares par scope et des groupes de middlewares
a été ajouté dans 3.5.0</p>
</div>
</div>
</div>
<div class="section" id="creer-des-routes-restful">
<span id="resource-routes"></span><h2>Créer des Routes RESTful<a class="headerlink" href="#creer-des-routes-restful" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le router rend facile la génération des routes RESTful pour vos controllers.
Les routes RESTful sont utiles lorsque vous créez des points de terminaison
d&#8217;API pour vos applications. Si nous voulions permettre l&#8217;accès à une base
de données REST, nous ferions quelque chose comme ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">//Dans config/routes.php</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setExtensions</span><span class="p">([</span><span class="s1">&#39;json&#39;</span><span class="p">]);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Recipes&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La première ligne définit un certain nombre de routes par défaut pour l&#8217;accès
REST où la méthode spécifie le format du résultat souhaité (par exemple, xml,
json, rss). Ces routes sont sensibles aux méthodes de requêtes HTTP.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="34%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HTTP format</th>
<th class="head">URL.format</th>
<th class="head">Controller action invoked</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GET</td>
<td>/recipes.format</td>
<td>RecipesController::index()</td>
</tr>
<tr class="row-odd"><td>GET</td>
<td>/recipes/123.format</td>
<td>RecipesController::view(123)</td>
</tr>
<tr class="row-even"><td>POST</td>
<td>/recipes.format</td>
<td>RecipesController::add()</td>
</tr>
<tr class="row-odd"><td>PUT</td>
<td>/recipes/123.format</td>
<td>RecipesController::edit(123)</td>
</tr>
<tr class="row-even"><td>PATCH</td>
<td>/recipes/123.format</td>
<td>RecipesController::edit(123)</td>
</tr>
<tr class="row-odd"><td>DELETE</td>
<td>/recipes/123.format</td>
<td>RecipesController::delete(123)</td>
</tr>
</tbody>
</table>
<p>La classe Router de CakePHP utilise un nombre différent d&#8217;indicateurs pour
détecter la méthode HTTP utilisée. Voici la liste dans l&#8217;ordre de préférence:</p>
<ol class="arabic simple">
<li>La variable POST _method</li>
<li>Le X_HTTP_METHOD_OVERRIDE</li>
<li>Le header REQUEST_METHOD</li>
</ol>
<p>La variable POST _method est utile dans l&#8217;utilisation d&#8217;un navigateur comme un
client REST (ou tout ce qui peut faire du POST). Il suffit de configurer la
valeur de _method avec le nom de la méthode de requête HTTP que vous souhaitez
émuler.</p>
<div class="section" id="creer-des-routes-de-ressources-imbriquees">
<h3>Créer des Routes de Ressources Imbriquées<a class="headerlink" href="#creer-des-routes-de-ressources-imbriquees" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une fois que vous avez connecté une ressource dans un scope, vous pouvez aussi
connecter des routes pour des sous-ressources. Les routes de sous-ressources
seront préfixées par le nom de la ressource originale et par son paramètre id.
Par exemple:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Le code ci-dessus va générer une ressource de routes pour <code class="docutils literal"><span class="pre">articles</span></code> et
<code class="docutils literal"><span class="pre">comments</span></code>. Les routes des <code class="docutils literal"><span class="pre">comments</span></code> vont ressembler à ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">articles</span><span class="o">/:</span><span class="nx">article_id</span><span class="o">/</span><span class="nx">comments</span>
<span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">articles</span><span class="o">/:</span><span class="nx">article_id</span><span class="o">/</span><span class="nx">comments</span><span class="o">/:</span><span class="nx">id</span>
</pre></div>
</div>
<p>You can get the <code class="docutils literal"><span class="pre">article_id</span></code> in <code class="docutils literal"><span class="pre">CommentsController</span></code> by:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;article_id&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>By default resource routes map to the same prefix as the containing scope. If
you have both nested and non-nested resource controllers you can use a different
controller in each context by using prefixes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/api&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles&#39;</span><span class="p">]);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The above would map the &#8216;Comments&#8217; resource to the
<code class="docutils literal"><span class="pre">App\Controller\Articles\CommentsController</span></code>. Having separate controllers lets
you keep your controller logic simpler. The prefixes created this way are
compatible with <a class="reference internal" href="#prefix-routing"><span class="std std-ref">Prefix de Routage</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Vous pouvez imbriquer autant de ressources que vous le souhaitez, mais il
n&#8217;est pas recommandé d&#8217;imbriquer plus de 2 ressources ensembles.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.3: </span>L&#8217;option <code class="docutils literal"><span class="pre">prefix</span></code> a été ajoutée à <code class="docutils literal"><span class="pre">resources()</span></code> dans la version 3.3.</p>
</div>
</div>
<div class="section" id="limiter-la-creation-des-routes">
<h3>Limiter la Création des Routes<a class="headerlink" href="#limiter-la-creation-des-routes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut, CakePHP va connecter 6 routes pour chaque ressource. Si vous
souhaitez connecter uniquement des routes spécifiques à une ressource, vous
pouvez utiliser l&#8217;option <code class="docutils literal"><span class="pre">only</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;only&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="s1">&#39;view&#39;</span><span class="p">]</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Le code ci-dessus devrait créer uniquement les routes de ressource <code class="docutils literal"><span class="pre">lecture</span></code>.
Les noms de route sont <code class="docutils literal"><span class="pre">create</span></code>, <code class="docutils literal"><span class="pre">update</span></code>, <code class="docutils literal"><span class="pre">view</span></code>, <code class="docutils literal"><span class="pre">index</span></code> et
<code class="docutils literal"><span class="pre">delete</span></code>.</p>
</div>
<div class="section" id="changer-les-actions-du-controller">
<h3>Changer les Actions du Controller<a class="headerlink" href="#changer-les-actions-du-controller" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous devrez peut-être modifier le nom des actions du controller qui sont
utilisés lors de la connexion des routes. Par exemple, si votre action
<code class="docutils literal"><span class="pre">edit()</span></code> est nommée <code class="docutils literal"><span class="pre">put()</span></code>, vous pouvez utiliser la clé <code class="docutils literal"><span class="pre">actions</span></code> pour
renommer vos actions:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;actions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;update&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;put&#39;</span><span class="p">,</span> <span class="s1">&#39;create&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;add&#39;</span><span class="p">]</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Le code ci-dessus va utiliser la méthode <code class="docutils literal"><span class="pre">put()</span></code> pour l&#8217;action <code class="docutils literal"><span class="pre">edit()</span></code>, et
<code class="docutils literal"><span class="pre">add()</span></code> au lieu de <code class="docutils literal"><span class="pre">create()</span></code>.</p>
</div>
<div class="section" id="mapper-des-routes-de-ressource-supplementaires">
<h3>Mapper des Routes de Ressource Supplémentaires<a class="headerlink" href="#mapper-des-routes-de-ressource-supplementaires" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez mapper des méthodes de ressource supplémentaires en utilisant
l&#8217;option <code class="docutils literal"><span class="pre">map</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
   <span class="s1">&#39;map&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
       <span class="s1">&#39;deleteAll&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
           <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;deleteAll&#39;</span><span class="p">,</span>
           <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DELETE&#39;</span>
       <span class="p">]</span>
   <span class="p">]</span>
<span class="p">]);</span>
<span class="c1">// Ceci connecterait /articles/deleteAll</span>
</pre></div>
</div>
<p>En plus des routes par défaut, ceci connecterait aussi une route pour
<cite>/articles/delete_all</cite>. Par défaut le segment de chemin va matcher le nom
de la clé. Vous pouvez utiliser la clé &#8216;path&#8217; à l&#8217;intérieur de la définition
de la ressource pour personnaliser le nom de chemin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;map&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;updateAll&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;updateAll&#39;</span><span class="p">,</span>
            <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">,</span>
            <span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/update_many&#39;</span>
        <span class="p">],</span>
    <span class="p">]</span>
<span class="p">]);</span>
<span class="c1">// Ceci connecterait /articles/update_many</span>
</pre></div>
</div>
<p>Si vous définissez &#8216;only&#8217; et &#8216;map&#8217;, assurez-vous que vos méthodes mappées sont
aussi dans la liste &#8216;only&#8217;.</p>
</div>
<div class="section" id="classes-de-route-personnalisee-pour-les-ressources">
<span id="custom-rest-routing"></span><h3>Classes de Route Personnalisée pour les Ressources<a class="headerlink" href="#classes-de-route-personnalisee-pour-les-ressources" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez spécifier la clé <code class="docutils literal"><span class="pre">connectOptions</span></code> dans le tableau <code class="docutils literal"><span class="pre">$options</span></code> de
la fonction <code class="docutils literal"><span class="pre">resources()</span></code> pour fournir une configuration personnalisée
utilisée par <code class="docutils literal"><span class="pre">connect()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;books&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;connectOptions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;routeClass&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ApiRoute&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">];</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="inflection-de-l-url-pour-les-routes-ressource">
<h3>Inflection de l&#8217;URL pour les Routes Ressource<a class="headerlink" href="#inflection-de-l-url-pour-les-routes-ressource" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut le fragment d&#8217;URL pour les controllers à plusieurs mots est la forme
en underscore du nom du controller. Par exemple, le fragment d&#8217;URL pour
<code class="docutils literal"><span class="pre">BlogPosts</span></code> serait <strong>/blog_posts</strong>.</p>
<p>Vous pouvez spécifier un type d&#8217;inflection alternatif en utilisant l&#8217;option
<code class="docutils literal"><span class="pre">inflect</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;BlogPosts&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;inflect&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;dasherize&#39;</span> <span class="c1">// Utilisera ``Inflector::dasherize()``</span>
    <span class="p">]);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Ce qui est au-dessus va générer des URLs de style <strong>/blog-posts*</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depuis CakePHP 3.1, le squelette de l&#8217;app officiel utilise <code class="docutils literal"><span class="pre">DashedRoute</span></code>
comme classe de route par défaut. Donc il est recommandé d&#8217;utiliser l&#8217;option
<code class="docutils literal"><span class="pre">'inflect'</span> <span class="pre">=&gt;</span> <span class="pre">'dasherize'</span></code> pour connecter les routes resssource afin de
garder la cohérence de l&#8217;URL.</p>
</div>
</div>
<div class="section" id="changer-le-chemin-d-un-element">
<h3>Changer le chemin d&#8217;un élément<a class="headerlink" href="#changer-le-chemin-d-un-element" title="Lien permanent vers ce titre">¶</a></h3>
<p>Par défaut, les ressources de routes utilisent le nom de ressource ayant subi
une inflexion en guise de segment d&#8217;URL. Vous pouvez définir un segment d&#8217;URL
personnalisé à l&#8217;aide de l&#8217;option <code class="docutils literal"><span class="pre">path</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">resources</span><span class="p">(</span><span class="s1">&#39;BlogPosts&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;path&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;posts&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.5.0: </span>L&#8217;option <code class="docutils literal"><span class="pre">path</span></code> a été ajoutée dans 3.5.0.</p>
</div>
</div>
</div>
<div class="section" id="arguments-passes">
<span id="passed-arguments"></span><span id="index-6"></span><h2>Arguments Passés<a class="headerlink" href="#arguments-passes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les arguments passés sont des arguments supplémentaires ou des segments
du chemin qui sont utilisés lors d&#8217;une requête. Ils sont souvent utilisés
pour transmettre des paramètres aux méthodes de vos controllers:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">http</span><span class="o">://</span><span class="nx">localhost</span><span class="o">/</span><span class="nx">calendars</span><span class="o">/</span><span class="nx">view</span><span class="o">/</span><span class="nx">recent</span><span class="o">/</span><span class="nx">mark</span>
</pre></div>
</div>
<p>Dans l&#8217;exemple ci-dessus, <code class="docutils literal"><span class="pre">recent</span></code> et <code class="docutils literal"><span class="pre">mark</span></code> sont tous deux des arguments
passés à <code class="docutils literal"><span class="pre">CalendarsController::view()</span></code>. Les arguments passés sont transmis aux
contrôleurs de trois manières. D&#8217;abord comme arguments de la méthode de
l&#8217;action appelée, deuxièmement en étant accessibles dans
<code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('pass')</span></code> sous la forme d&#8217;un tableau indexé
numériquement. Enfin, il y a <code class="docutils literal"><span class="pre">$this-&gt;passedArgs</span></code> disponible de la même
façon que par <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('pass')</span></code>. Lorsque vous utilisez des
routes personnalisées il est possible de forcer des paramètres particuliers
comme étant des paramètres passés également.</p>
<p>Si vous alliez visiter l&#8217;URL mentionné précédemment, et que vous aviez une
action de controller qui ressemblait à cela:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CalendarsController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">view</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">debug</span><span class="p">(</span><span class="nb">func_get_args</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous auriez le résultat suivant:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">recent</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">mark</span>
<span class="p">)</span>
</pre></div>
</div>
<p>La même donnée est aussi disponible dans <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('pass')</span></code> dans
vos controllers, vues, et helpers. Les valeurs dans le tableau pass sont
indicées numériquement basé sur l&#8217;ordre dans lequel elles apparaissent dans
l&#8217;URL appelé:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">debug</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>Le résultat des 2 debug() du dessus serait:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">Array</span>
<span class="p">(</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">recent</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">mark</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Quand vous générez des URLs, en utilisant un <a class="reference internal" href="../appendices/glossary.html#term-tableau-de-routing"><span class="xref std std-term">tableau de routing</span></a>, vous
ajoutez des arguments passés en valeurs sans clés de type chaîne dans le
tableau:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
<p>Comme <code class="docutils literal"><span class="pre">5</span></code> a une clé numérique, il est traité comme un argument passé.</p>
</div>
<div class="section" id="generer-des-urls">
<h2>Générer des URLs<a class="headerlink" href="#generer-des-urls" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="staticmethod">
<dt id="Cake\Routing\Router::url">
<em class="property">static </em><code class="descclassname">Cake\Routing\Router::</code><code class="descname">url</code><span class="sig-paren">(</span><em>$url = null</em>, <em>$full = false</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::url" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Le routing inversé est une fonctionnalité dans CakePHP qui est utilisée pour
vous permettre de changer votre structure d&#8217;URL sans avoir à modifier tout votre
code. En utilisant des <a class="reference internal" href="../appendices/glossary.html#term-tableau-de-routing"><span class="xref std std-term">tableaux de routing</span></a> pour
définir vos URLs, vous pouvez configurer les routes plus tard et les URLs
générés vont automatiquement être mises à jour.</p>
<p>Si vous créez des URLs en utilisant des chaînes de caractères comme:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="s1">&#39;View&#39;</span><span class="p">,</span> <span class="s1">&#39;/articles/view/&#39;</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">);</span>
</pre></div>
</div>
<p>Et ensuite plus tard, vous décidez que <code class="docutils literal"><span class="pre">/articles</span></code> devrait vraiment être
appelé &#8216;posts&#8217; à la place, vous devrez aller dans toute votre application
en renommant les URLs. Cependant, si vous définissiez votre lien comme:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Html</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span>
    <span class="s1">&#39;View&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="nv">$id</span><span class="p">]</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Ensuite quand vous décidez de changer vos URLs, vous pouvez le faire en
définissant une route. Cela changerait à la fois le mapping d&#8217;URL entrant,
ainsi que les URLs générés.</p>
<p>Quand vous utilisez les URLs en tableau, vous pouvez définir les paramètres
chaîne de la requête et les fragments de document en utilisant les clés
spéciales:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">url</span><span class="p">([</span>
    <span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span>
    <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span>
    <span class="s1">&#39;?&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;page&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s1">&#39;#&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;top&#39;</span>
<span class="p">]);</span>

<span class="c1">// Cela générera une URL comme:</span>
<span class="o">/</span><span class="nx">articles</span><span class="o">/</span><span class="nx">index</span><span class="o">?</span><span class="nx">page</span><span class="o">=</span><span class="mi">1</span><span class="c1">#top</span>
</pre></div>
</div>
<p>Le Router convertira également tout paramètre inconnu du tableau de routing
en paramètre d&#8217;URL. Le <code class="docutils literal"><span class="pre">?</span></code> est disponible pour la rétrocompatibilité avec
les anciennes versions de CakePHP.</p>
<p>Vous pouvez également utiliser n&#8217;importe quel élément spécial de route lorsque
vous générez des URLs:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">_ext</span></code> Utilisé pour <a class="reference internal" href="#file-extensions"><span class="std std-ref">Routing des Extensions de Fichier</span></a> .</li>
<li><code class="docutils literal"><span class="pre">_base</span></code> Défini à <code class="docutils literal"><span class="pre">false</span></code> pour retirer le chemin de base de l&#8217;URL générée.
Si votre application n&#8217;est pas dans le répertoire racine, cette option peut
être utilisée pour générer les URLs qui sont &#8216;liées à cake&#8217;.</li>
<li><code class="docutils literal"><span class="pre">_scheme</span></code> Défini pour créer les liens sur les schémas différents comme
<cite>webcal</cite> ou <cite>ftp</cite>. Par défaut, au schéma courant.</li>
<li><code class="docutils literal"><span class="pre">_host</span></code> Définit l&#8217;hôte à utiliser pour le lien. Par défaut à l&#8217;hôte courant.</li>
<li><code class="docutils literal"><span class="pre">_port</span></code> Définit le port si vous avez besoin de créer les liens sur des ports
non-standards.</li>
<li><code class="docutils literal"><span class="pre">_method</span></code> Définit le verbe HTTP à utiliser pour cette URL.</li>
<li><code class="docutils literal"><span class="pre">_full</span></code> Si à <code class="docutils literal"><span class="pre">true</span></code>, la constante <cite>FULL_BASE_URL</cite> va être ajoutée devant
les URLS générées.</li>
<li><code class="docutils literal"><span class="pre">_ssl</span></code> Défini à <code class="docutils literal"><span class="pre">true</span></code> pour convertir l&#8217;URL générée à https, ou <code class="docutils literal"><span class="pre">false</span></code>
pour forcer http.</li>
<li><code class="docutils literal"><span class="pre">_name</span></code> Nom de route. Si vous avez configuré les routes nommées, vous
pouvez utiliser cette clé pour les spécifier.</li>
</ul>
</div>
<div class="section" id="routing-de-redirection">
<span id="redirect-routing"></span><h2>Routing de Redirection<a class="headerlink" href="#routing-de-redirection" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le routing de redirection permet de créer des statuts HTTP de redirection
30x pour les routes entrantes et les pointer vers des URLs différentes.
C&#8217;est utile lorsque vous souhaitez informer les applications clientes qu&#8217;une
ressource a été déplacée et que vous ne voulez pas exposer deux URLs pour
le même contenu.</p>
<p>Les routes de redirection sont différentes des routes normales car elles
effectuent une redirection d&#8217;en-tête si une correspondance est trouvée. La
redirection peut se produire vers une destination au sein de votre
application ou un emplacement à extérieur:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span>
        <span class="s1">&#39;/home/*&#39;</span><span class="p">,</span>
        <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
        <span class="p">[</span><span class="s1">&#39;persist&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]</span>
        <span class="c1">// Or [&#39;persist&#39;=&gt;[&#39;id&#39;]] for default routing where the</span>
        <span class="c1">// view action expects $id as an argument.</span>
    <span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Redirige <code class="docutils literal"><span class="pre">/home/*</span></code> vers <code class="docutils literal"><span class="pre">/articles/view</span></code> et passe les paramètres vers
<code class="docutils literal"><span class="pre">/articles/view</span></code>. Utiliser un tableau comme destination de redirection vous
permet d&#8217;utiliser différentes routes pour définir où la chaine URL devrait
être redirigée. Vous pouvez rediriger vers des destinations externes en
utilisant des chaines URLs pour destination:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s1">&#39;/articles/*&#39;</span><span class="p">,</span> <span class="s1">&#39;http://google.com&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="mi">302</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Cela redirigerait <code class="docutils literal"><span class="pre">/articles/*</span></code> vers <code class="docutils literal"><span class="pre">http://google.com</span></code> avec un statut
HTTP 302.</p>
</div>
<div class="section" id="classes-route-personnalisees">
<span id="custom-route-classes"></span><h2>Classes Route Personnalisées<a class="headerlink" href="#classes-route-personnalisees" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les classes de route personnalisées vous permettent d&#8217;étendre et modifier la
manière dont les routes individuelles parsent les requêtes et gèrent le routing
inversé. Les classes de route suivent quelques conventions:</p>
<ul class="simple">
<li>Les classes de Route doivent se trouver dans le namespace <code class="docutils literal"><span class="pre">Routing\\Route</span></code>
de votre application ou plugin.</li>
<li>Les classes de Route doivent étendre <code class="xref php php-class docutils literal"><span class="pre">Cake\Routing\Route</span></code>.</li>
<li>Les classes de Route doivent implémenter au moins un des méthodes <code class="docutils literal"><span class="pre">match()</span></code>
et/ou <code class="docutils literal"><span class="pre">parse()</span></code>.</li>
</ul>
<p>La méthode <code class="docutils literal"><span class="pre">parse()</span></code> est utilisée pour parser une URL entrante. Elle doit
générer un tableau de paramètres de requêtes qui peuvent être résolus en
controller &amp; action. Renvoyez <code class="docutils literal"><span class="pre">false</span></code> pour indiquer une erreur de
correspondance.</p>
<p>La méthode <code class="docutils literal"><span class="pre">match()</span></code> est utilisée pour faire correspondre un tableau de
paramètres d&#8217;URL et créer une chaine URL. Si les paramètres d&#8217;URL ne
correspondent pas, <code class="docutils literal"><span class="pre">false</span></code> doit être renvoyé.</p>
<p>Vous pouvez utiliser votre classe de route personnalisée lors de la création
d&#8217;une route en utilisant l&#8217;option <code class="docutils literal"><span class="pre">routeClass</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
     <span class="s1">&#39;/:slug&#39;</span><span class="p">,</span>
     <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">],</span>
     <span class="p">[</span><span class="s1">&#39;routeClass&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;SlugRoute&#39;</span><span class="p">]</span>
<span class="p">);</span>

<span class="c1">// Ou en définissant la routeClass dans votre scope.</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">scope</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$routes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Avant 3.5.0, utilisez `routeClass()`</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">setRouteClass</span><span class="p">(</span><span class="s1">&#39;SlugRoute&#39;</span><span class="p">);</span>
    <span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span>
         <span class="s1">&#39;/:slug&#39;</span><span class="p">,</span>
         <span class="p">[</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;view&#39;</span><span class="p">]</span>
    <span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Cette route créera une instance de <code class="docutils literal"><span class="pre">SlugRoute</span></code> et vous permettra d&#8217;implémenter
une gestion des paramètres personnalisée. Vous pouvez utiliser les classes routes
des plugins en utilisant la <a class="reference internal" href="../appendices/glossary.html#term-syntaxe-de-plugin"><span class="xref std std-term">syntaxe de plugin</span></a> standard.</p>
<div class="section" id="classe-de-route-par-defaut">
<h3>Classe de Route par Défaut<a class="headerlink" href="#classe-de-route-par-defaut" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="staticmethod">
<dt id="Cake\Routing\Router::defaultRouteClass">
<em class="property">static </em><code class="descclassname">Cake\Routing\Router::</code><code class="descname">defaultRouteClass</code><span class="sig-paren">(</span><em>$routeClass = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::defaultRouteClass" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Si vous voulez utiliser une autre classe de route pour toutes vos routes
en plus de la <code class="docutils literal"><span class="pre">Route</span></code> par défaut, vous pouvez faire ceci en appelant
<code class="docutils literal"><span class="pre">Router::defaultRouteClass()</span></code> avant de définir la moindre route et éviter
de spécifier l&#8217;option <code class="docutils literal"><span class="pre">routeClass</span></code> pour chaque route. Par exemple en
utilisant:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\InflectedRoute</span><span class="p">;</span>

<span class="nx">Router</span><span class="o">::</span><span class="na">defaultRouteClass</span><span class="p">(</span><span class="nx">InflectedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
<p>Cela provoquera l&#8217;utilisation de la classe <code class="docutils literal"><span class="pre">InflectedRoute</span></code> pour toutes les
routes suivantes.
Appeler la méthode sans argument va retourner la classe de route courante par
défaut.</p>
</div>
<div class="section" id="methode-fallbacks">
<h3>Méthode Fallbacks<a class="headerlink" href="#methode-fallbacks" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="method">
<dt id="Cake\Routing\Router::fallbacks">
<code class="descclassname">Cake\Routing\Router::</code><code class="descname">fallbacks</code><span class="sig-paren">(</span><em>$routeClass = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Routing\Router::fallbacks" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>La méthode fallbacks (de repli) est un raccourci simple pour définir les routes
par défaut. La méthode utilise la classe de route passée pour les règles
définies ou, si aucune classe n&#8217;est passée, la classe retournée par
<code class="docutils literal"><span class="pre">Router::defaultRouteClass()</span></code> sera utilisée.</p>
<p>Appelez fallbacks comme ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">fallbacks</span><span class="p">(</span><span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
</pre></div>
</div>
<p>Est équivalent à ces appels explicites:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Routing\Route\DashedRoute</span><span class="p">;</span>

<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;routeClass&#39;</span> <span class="o">=&gt;</span> <span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">]);</span>
<span class="nv">$routes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">&#39;/:controller/:action/*&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[</span><span class="s1">&#39;routeClass&#39;</span> <span class="o">=&gt;</span> <span class="nx">DashedRoute</span><span class="o">::</span><span class="na">class</span><span class="p">]);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Utiliser la classe route par défaut (<code class="docutils literal"><span class="pre">Route</span></code>) avec fallbacks, ou toute
route avec les éléments <code class="docutils literal"><span class="pre">:plugin</span></code> et/ou <code class="docutils literal"><span class="pre">:controller</span></code> résultera en
URL incompatibles.</p>
</div>
</div>
</div>
<div class="section" id="creer-des-parametres-d-url-persistants">
<h2>Créer des Paramètres d&#8217;URL Persistants<a class="headerlink" href="#creer-des-parametres-d-url-persistants" title="Lien permanent vers ce titre">¶</a></h2>
<p>En utilisant les fonctions de filtre, vous pouvez vous immiscer dans le process
de génération d&#8217;URL. Les fonctions de filtres sont appelées <em>avant</em> que les
URLs ne soient vérifiées via les routes, cela vous permet donc de préparer les
URLs avant le routing.</p>
<p>Les fonctions de callback de filtre doivent attendre les paramètres suivants:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">$params</span></code> Le paramètre d&#8217;URL à traiter.</li>
<li><code class="docutils literal"><span class="pre">$request</span></code> La requête actuelle.</li>
</ul>
<p>La fonction filtre d&#8217;URL doit <em>toujours</em> retourner les paramètres même s&#8217;ils
n&#8217;ont pas été modifiés.</p>
<p>Les filtres d&#8217;URL vous permettent d&#8217;implémenter des fonctionnalités telles que
l&#8217;utilisation de paramètres d&#8217;URL persistants:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">addUrlFilter</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$params</span><span class="p">,</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;lang&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;lang&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;lang&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getParam</span><span class="p">(</span><span class="s1">&#39;lang&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$params</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Le fonctions de filtres sont appliquées dans l&#8217;ordre dans lequel elles sont
connectées.</p>
<p>Un autre cas lorsque l&#8217;on souhaite changer une route en particulier à la volée
(pour les routes de plugin par exemple):</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Router</span><span class="o">::</span><span class="na">addUrlFilter</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$params</span><span class="p">,</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;plugin&#39;</span><span class="p">])</span> <span class="o">||</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;plugin&#39;</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;MyPlugin&#39;</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;controller&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$params</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;controller&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;Languages&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;view&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;controller&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Locations&#39;</span><span class="p">;</span>
        <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span><span class="p">;</span>
        <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;language&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$params</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$params</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="gerer-les-parametres-nommes-dans-les-urls">
<h2>Gérer les Paramètres Nommés dans les URLs<a class="headerlink" href="#gerer-les-parametres-nommes-dans-les-urls" title="Lien permanent vers ce titre">¶</a></h2>
<p>Bien que les paramètres nommés aient été retirés dans CakePHP 3.0, les
applications peuvent publier des URLs les contenant. Vous pouvez continuer à
accepter les URLs contenant les paramètres nommés.</p>
<p>Dans la méthode de votre <code class="docutils literal"><span class="pre">beforeFilter()</span></code>, vous pouvez appeler
<code class="docutils literal"><span class="pre">parseNamedParams()</span></code> pour extraire tout paramètre nommé à partir des arguments
passés:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeFilter</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="na">beforeFilter</span><span class="p">(</span><span class="nv">$event</span><span class="p">);</span>
    <span class="nx">Router</span><span class="o">::</span><span class="na">parseNamedParams</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ceci va remplir <code class="docutils literal"><span class="pre">$this-&gt;request-&gt;getParam('named')</span></code> avec tout paramètre nommé
trouvé dans les arguments passés. Tout argument passé qui a été interprété comme
un paramètre nommé, sera retiré de la liste des arguments passés.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="dispatch-filters.html">Filtres du Dispatcher</a></li>
</ul>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="fr">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Préface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP en un Coup d&#8217;Oeil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Guide de Démarrage Rapide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/3-x-migration-guide.html">3.x Guide de Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutoriels et exemples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer</a></li>
</ul>
<p class="caption"><span class="caption-text">Pour Commencer</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dispatch-filters.html">Filtres du Dispatcher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Les Objets Request &amp; Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers (Contrôleurs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views (Vues)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm.html">Accès Base de Données &amp; ORM</a></li>
</ul>
<p class="caption"><span class="caption-text">Généralités</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Console Bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/caching.html">La mise en cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Outils de Console, Shells, &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Déploiement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="errors.html">Gestion des Erreurs &amp; Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/events.html">Événements système</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/internationalization-and-localization.html">Internationalisation &amp; Localisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/logging.html">Journalisation (logging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/form.html">Formulaires Sans Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilitaires</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/app.html">Classe App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/httpclient.html">Client Http</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/registry-objects.html">Objets Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Divers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/global-constants-and-functions.html">Globales &amp; Fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Outil d&#8217;Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Annexes</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Mis à jour le août 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Associations - Lier les Tables Ensemble - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/orm/associations.html" /><link rel="alternate" hreflang="pt_BR" href="../../pt/orm/associations.html" /><link rel="alternate" hreflang="es" href="../../es/orm/associations.html" /><link rel="alternate" hreflang="ja" href="../../ja/orm/associations.html" /><link rel="alternate" hreflang="zh" href="../../zh/orm/associations.html" /><link rel="alternate" hreflang="tr" href="../../tr/orm/associations.html" /><link rel="alternate" hreflang="ru" href="../../ru/orm/associations.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within documentation CakePHP Cookbook 3.5" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="documentation CakePHP Cookbook 3.5" href="../index.html" />
    <link rel="up" title="Accès Base de Données &amp; ORM" href="../orm.html" />
    <link rel="next" title="Behaviors (Comportements)" href="behaviors.html" />
    <link rel="prev" title="Supprimer des Données" href="deleting-data.html" />

    <script type="text/javascript">
    window.lang = "fr";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Recherche" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        fr
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li><a href="../../en/orm/associations.html">en</a></li>
                                            
                                                <li><a href="../../pt/orm/associations.html">pt</a></li>
                                            
                                                <li><a href="../../es/orm/associations.html">es</a></li>
                                            
                                                <li><a href="../../ja/orm/associations.html">ja</a></li>
                                            
                                                <li></li>
                                            
                                                <li><a href="../../zh/orm/associations.html">zh</a></li>
                                            
                                                <li><a href="../../tr/orm/associations.html">tr</a></li>
                                            
                                                <li><a href="../../ru/orm/associations.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/fr">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/fr">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/fr/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/fr/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/fr/orm/associations.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Associations - Lier les Tables Ensemble</a><ul>
<li><a class="reference internal" href="#associations-hasone">Associations HasOne</a></li>
<li><a class="reference internal" href="#associations-belongsto">Associations BelongsTo</a></li>
<li><a class="reference internal" href="#associations-hasmany">Associations HasMany</a></li>
<li><a class="reference internal" href="#associations-belongstomany">Associations BelongsToMany</a><ul>
<li><a class="reference internal" href="#utiliser-l-option-through">Utiliser l&#8217;Option &#8216;through&#8217;</a></li>
<li><a class="reference internal" href="#conditions-d-association-par-defaut">Conditions d&#8217;Association par Défaut</a></li>
<li><a class="reference internal" href="#charger-les-associations">Charger les Associations</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="associations-lier-les-tables-ensemble">
<h1>Associations - Lier les Tables Ensemble<a class="headerlink" href="#associations-lier-les-tables-ensemble" title="Lien permanent vers ce titre">¶</a></h1>
<p>Définir les relations entre les différents objets dans votre application
sera un processus naturel. Par exemple, un article peut avoir plusieurs
commentaires, et appartenir à un auteur. Les Auteurs peuvent avoir plusieurs
articles et plusieurs commentaires. CakePHP facilite la gestion de ces
associations. Les quatre types d&#8217;association dans CakePHP sont:
hasOne, hasMany, belongsTo, et belongsToMany.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="27%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Type d&#8217;Association</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>one to one</td>
<td>hasOne</td>
<td>Un user a un profile.</td>
</tr>
<tr class="row-odd"><td>one to many</td>
<td>hasMany</td>
<td>Un user peut avoir plusieurs articles.</td>
</tr>
<tr class="row-even"><td>many to one</td>
<td>belongsTo</td>
<td>Plusieurs articles appartiennent à un user.</td>
</tr>
<tr class="row-odd"><td>many to many</td>
<td>belongsToMany</td>
<td>Les Tags appartiennent aux articles.</td>
</tr>
</tbody>
</table>
<p>Les Associations sont définies durant la méthode <code class="docutils literal"><span class="pre">initialize()</span></code> de votre
objet table. Les méthodes ayant pour nom le type d&#8217;association vous permettent
de définir les associations dans votre application. Par exemple, si nous
souhaitions définir une association belongsTo dans notre ArticlesTable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La forme la plus simple de toute configuration d&#8217;association prend l&#8217;alias de
la table avec laquelle vous souhaitez l&#8217;associer. Par défaut, tous les détails
d&#8217;une association vont utiliser les conventions de CakePHP. Si vous souhaitez
personnaliser la façon dont sont gérées vos associations, vous pouvez les
modifier avec les setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Publishing.Authors&#39;</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;authorid&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setProperty</span><span class="p">(</span><span class="s1">&#39;person&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous pouvez également configurer votre association à l&#8217;aide d&#8217;un tableau de
paramètres:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="p">[</span>
   <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Publishing.Authors&#39;</span><span class="p">,</span>
   <span class="s1">&#39;foreignKey&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;authorid&#39;</span><span class="p">,</span>
   <span class="s1">&#39;propertyName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;person&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>La même table peut être utilisée plusieurs fois pour définir différents types
d&#8217;associations. Par exemple considérons le cas où vous voulez séparer les
commentaires approuvés et ceux qui n&#8217;ont pas encore été modérés:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;approved&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;UnapprovedComments&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comments&#39;</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;approved&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setProperty</span><span class="p">(</span><span class="s1">&#39;unapproved_comments&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Comme vous pouvez le voir, en spécifiant la clé <code class="docutils literal"><span class="pre">className</span></code>, il est possible
d&#8217;utiliser la même table avec des associations différentes pour la même table.
Vous pouvez même créer les tables associées avec elles-même pour créer des
relations parent-enfant:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CategoriesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;SubCategories&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Categories&#39;</span>
        <span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;ParentCategories&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Categories&#39;</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous pouvez aussi définir les associations en masse via un appel unique
à la méthode <code class="docutils literal"><span class="pre">Table::addAssociations()</span></code> qui accepte en paramètre un
tableau contenant les noms de tables indexés par association:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addAssociations</span><span class="p">([</span>
           <span class="s1">&#39;belongsTo&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
               <span class="s1">&#39;Users&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;App\Model\Table\UsersTable&#39;</span><span class="p">]</span>
           <span class="p">],</span>
           <span class="s1">&#39;hasMany&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Comments&#39;</span><span class="p">],</span>
           <span class="s1">&#39;belongsToMany&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Tags&#39;</span><span class="p">]</span>
       <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Chaque type d&#8217;association accepte plusieurs associations où les clés sont les
alias et les valeurs sont les données de configuration de l&#8217;association. Si
une clé numérique est utilisée, la valeur sera traitée en tant qu&#8217;alias.</p>
<div class="section" id="associations-hasone">
<span id="has-one-associations"></span><h2>Associations HasOne<a class="headerlink" href="#associations-hasone" title="Lien permanent vers ce titre">¶</a></h2>
<p>Mettons en place une Table Users avec une relation de type hasOne (a une seule)
Table Addresses.</p>
<p>Tout d&#8217;abord, les tables de votre base de données doivent être saisies
correctement. Pour qu&#8217;une relation de type hasOne fonctionne, une table doit
contenir une clé étrangère qui pointe vers un enregistrement de l&#8217;autre. Dans
notre cas, la table addresses contiendra un champ nommé <code class="docutils literal"><span class="pre">user_id</span></code>. Le motif de
base est:</p>
<p><strong>hasOne:</strong> l&#8217;<em>autre</em> model contient la clé étrangère.</p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Users hasOne Addresses</td>
<td>addresses.user_id</td>
</tr>
<tr class="row-odd"><td>Doctors hasOne Mentors</td>
<td>mentors.doctor_id</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il n&#8217;est pas obligatoire de suivre les conventions de CakePHP, vous pouvez
outrepasser l&#8217;utilisation de toute clé étrangère dans les définitions de vos
associations. Néanmoins, coller aux conventions donnera un code moins
répétitif, plus facile à lire et à maintenir.</p>
</div>
<p>Si nous avions les classes <code class="docutils literal"><span class="pre">UsersTable</span></code> et <code class="docutils literal"><span class="pre">AddressesTable</span></code>, nous
pourrions faire l&#8217;association avec le code suivant:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UsersTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Si vous avez besoin de plus de contrôle, vous pouvez définir vos associations
en utilisant les setters. Par exemple, vous voudrez peut-être limiter
l&#8217;association pour inclure seulement certains enregistrements:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UsersTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;Addresses.primary&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1&#39;</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setDependent</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Les clés possibles pour une association hasOne sont:</p>
<ul class="simple">
<li><strong>className</strong>: le nom de la classe de la table que l&#8217;on souhaite associer au
model actuel. Si l&#8217;on souhaite définir la relation &#8216;User a une Address&#8217;, la
valeur associée à la clé &#8216;className&#8217; devra être &#8216;Addresses&#8217;.</li>
<li><strong>foreignKey</strong>: le nom de la clé étrangère que l&#8217;on trouve dans l&#8217;autre table.
Ceci sera particulièrement pratique si vous avez besoin de définir des
relations hasOne multiples. La valeur par défaut de cette clé est le nom du
model actuel (avec des underscores) suffixé avec &#8216;_id&#8217;. Dans l&#8217;exemple
ci-dessus la valeur par défaut aurait été &#8216;user_id&#8217;.</li>
<li><strong>bindingKey</strong>: le nom de la colonne dans la table courante, qui sera utilisée
pour correspondre à la <code class="docutils literal"><span class="pre">foreignKey</span></code>. S&#8217;il n&#8217;est pas spécifié, la clé
primaire (par exemple la colonne id de la table <code class="docutils literal"><span class="pre">Users</span></code>) sera utilisée.</li>
<li><strong>conditions</strong>: un tableau des conditions compatibles avec find() ou un
fragment de code SQL tel que <code class="docutils literal"><span class="pre">['Addresses.primary'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code>.</li>
<li><strong>joinType</strong>: le type de join à utiliser dans la requête SQL, par défaut
à LEFT. Vous voulez peut-être utiliser INNER si votre association hasOne est
requis.</li>
<li><strong>dependent</strong>: Quand la clé dependent est définie à <code class="docutils literal"><span class="pre">true</span></code>, et qu&#8217;une
entity est supprimée, les enregistrements du model associé sont aussi
supprimés. Dans ce cas, nous le définissons à <code class="docutils literal"><span class="pre">true</span></code> pour que la
suppression d&#8217;un User supprime aussi son Address associée.</li>
<li><strong>cascadeCallbacks</strong>: Quand ceci et <strong>dependent</strong> sont à <code class="docutils literal"><span class="pre">true</span></code>, les
suppressions en cascade vont charger et supprimer les entities pour que les
callbacks soient lancés correctement. Quand il est à <code class="docutils literal"><span class="pre">false</span></code>.
<code class="docutils literal"><span class="pre">deleteAll()</span></code> est utilisée pour retirer les données associées et que aucun
callback ne soit lancé.</li>
<li><strong>propertyName</strong>: Le nom de la propriété qui doit être rempli avec les données
d&#8217;une table associée dans les résultats d&#8217;une table source. Par défaut, c&#8217;est
un nom en underscore et singulier de l&#8217;association, donc <code class="docutils literal"><span class="pre">address</span></code> dans
notre exemple.</li>
<li><strong>strategy</strong>: Définit la stratégie de requête à utiliser. Par défaut à
&#8216;join&#8217;. L&#8217;autre valeur valide est &#8216;select&#8217;, qui utilise une requête distincte
à la place.</li>
<li><strong>finder</strong>: La méthode finder à utiliser lors du chargement des
enregistrements associés.</li>
</ul>
<p>Une fois que cette association a été définie, les opérations find sur la table
Users peuvent contenir l&#8217;enregistrement Address, s&#8217;il existe:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans un controller ou dans une méthode table.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$users</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Addresses&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">address</span><span class="o">-&gt;</span><span class="na">street</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ce qui est au-dessus génèrera une commande SQL similaire à:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">users</span> <span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">addresses</span> <span class="nx">ON</span> <span class="nx">addresses</span><span class="o">.</span><span class="nx">user_id</span> <span class="o">=</span> <span class="nx">users</span><span class="o">.</span><span class="nx">id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="associations-belongsto">
<span id="belongs-to-associations"></span><h2>Associations BelongsTo<a class="headerlink" href="#associations-belongsto" title="Lien permanent vers ce titre">¶</a></h2>
<p>Maintenant que nous avons un accès des données Address à partir de la table
User, définissons une association belongsTo dans la table Addresses afin
d&#8217;avoir un accès aux données liées de l&#8217;User. L&#8217;association belongsTo est un
complément naturel aux associations hasOne et hasMany, permettant de voir les
données associées dans l&#8217;autre sens.</p>
<p>Lorsque vous remplissez les clés des tables de votre base de données pour une
relation belongsTo, suivez cette convention:</p>
<p><strong>belongsTo:</strong> le model <em>courant</em> contient la clé étrangère.</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Addresses belongsTo Users</td>
<td>addresses.user_id</td>
</tr>
<tr class="row-odd"><td>Mentors belongsTo Doctors</td>
<td>mentors.doctor_id</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Astuce</p>
<p class="last">Si une Table contient une clé étrangère, elle appartient à (belongsTo)
l&#8217;autre Table.</p>
</div>
<p>Nous pouvons définir l&#8217;association belongsTo dans notre table Addresses comme
ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AddressesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Users&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nous pouvons aussi définir une relation plus spécifique en utilisant les
setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AddressesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Users&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setJoinType</span><span class="p">(</span><span class="s1">&#39;INNER&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Les clés possibles pour les tableaux d&#8217;association belongsTo sont:</p>
<ul class="simple">
<li><strong>className</strong>: le nom de classe du model associé au model courant. Si vous
définissez une relation &#8216;Profile belongsTo User&#8217;, la clé className
devra être &#8216;Users&#8217;.</li>
<li><strong>foreignKey</strong>: le nom de la clé étrangère trouvée dans la table courante.
C&#8217;est particulièrement pratique si vous avez besoin de définir plusieurs
relations belongsTo au même model. La valeur par défaut pour cette clé est le
nom au singulier de l&#8217;autre model avec des underscores, suffixé avec <code class="docutils literal"><span class="pre">_id</span></code>.</li>
<li><strong>bindingKey</strong>: le nom de la colonne dans l&#8217;autre table, qui sera utilisée
pour correspondre à la <code class="docutils literal"><span class="pre">foreignKey</span></code>. S&#8217;il n&#8217;est pas spécifié, la clé
primaire (par exemple la colonne id de la table <code class="docutils literal"><span class="pre">Users</span></code>) sera utilisée.</li>
<li><strong>conditions</strong>: un tableau de conditions compatibles find() ou de chaînes SQL
comme <code class="docutils literal"><span class="pre">['Users.active'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code></li>
<li><strong>joinType</strong>: le type de join à utiliser dans la requête SQL, par défaut LEFT
ce qui peut ne pas correspondre à vos besoins dans toutes les situations,
INNER peut être utile quand vous voulez tout de votre model principal ainsi
que de vos models associés!</li>
<li><strong>propertyName</strong>: Le nom de la propriété qui devra être remplie avec les
données de la table associée dans les résultats de la table source. Par défaut
il s&#8217;agit du nom singulier avec des underscores de l&#8217;association donc
<code class="docutils literal"><span class="pre">user</span></code> dans notre exemple.</li>
<li><strong>strategy</strong>: Définit la stratégie de requête à utiliser. Par défaut à
&#8216;join&#8217;. L&#8217;autre valeur valide est &#8216;select&#8217;, qui utilise une requête distincte
à la place.</li>
<li><strong>finder</strong>: La méthode finder à utiliser lors du chargement des
enregistrements associés.</li>
</ul>
<p>Une fois que cette association a été définie, les opérations find sur la table
Addresses peuvent contenir l&#8217;enregistrement User s&#8217;il existe:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans un controller ou dans une méthode table.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$addresses</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Users&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$address</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">username</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ce qui est au-dessus génèrera une commande SQL similaire à:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">addresses</span> <span class="nx">LEFT</span> <span class="nx">JOIN</span> <span class="nx">users</span> <span class="nx">ON</span> <span class="nx">addresses</span><span class="o">.</span><span class="nx">user_id</span> <span class="o">=</span> <span class="nx">users</span><span class="o">.</span><span class="nx">id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="associations-hasmany">
<span id="has-many-associations"></span><h2>Associations HasMany<a class="headerlink" href="#associations-hasmany" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un exemple d&#8217;association hasMany est &#8220;Article hasMany Comments&#8221; (Un Article a
plusieurs Commentaires). Définir cette association va nous permettre de
récupérer les commentaires d&#8217;un article quand l&#8217;article est chargé.</p>
<p>Lors de la création des tables de votre base de données pour une relation
hasMany, suivez cette convention:</p>
<p><strong>hasMany:</strong> l&#8217;<em>autre</em> model contient la clé étrangère.</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Article hasMany Comment</td>
<td>Comment.article_id</td>
</tr>
<tr class="row-odd"><td>Product hasMany Option</td>
<td>Option.product_id</td>
</tr>
<tr class="row-even"><td>Doctor hasMany Patient</td>
<td>Patient.doctor_id</td>
</tr>
</tbody>
</table>
<p>Nous pouvons définir l&#8217;association hasMany dans notre model Articles comme
suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nous pouvons également définir une relation plus spécifique en utilisant les
setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;article_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setDependent</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Parfois vous voudrez configurer les clés composites dans vos associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans l&#39;appel ArticlesTable::initialize()</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Reviews&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">([</span>
        <span class="s1">&#39;article_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;article_hash&#39;</span>
    <span class="p">]);</span>
</pre></div>
</div>
<p>En se référant à l&#8217;exemple du dessus, nous avons passé un tableau contenant les
clés composites dans <code class="docutils literal"><span class="pre">setForeignKey()</span></code>. Par défaut <code class="docutils literal"><span class="pre">bindingKey</span></code> serait
automatiquement défini respectivement avec <code class="docutils literal"><span class="pre">id</span></code> et <code class="docutils literal"><span class="pre">hash</span></code>, mais imaginons
que vous souhaitiez spécifier avec des champs de liaisons différents de ceux par
défault, vous pouvez les configurer manuellement via <code class="docutils literal"><span class="pre">setForeignKey()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans un appel de ArticlesTable::initialize()</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Reviews&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">([</span>
        <span class="s1">&#39;article_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;article_hash&#39;</span>
    <span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">setBindingKey</span><span class="p">([</span>
        <span class="s1">&#39;whatever_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;whatever_hash&#39;</span>
    <span class="p">]);</span>
</pre></div>
</div>
<p>Il est important de noter que les valeurs de <code class="docutils literal"><span class="pre">foreignKey</span></code> font référence à la
table <strong>reviews</strong> et les valeurs de <code class="docutils literal"><span class="pre">bindingKey</span></code> font référence à la table
<strong>articles</strong>.</p>
<p>Les clés possibles pour les tableaux d&#8217;association hasMany sont:</p>
<ul class="simple">
<li><strong>className</strong>: le nom de la classe du model que l&#8217;on souhaite associer au
model actuel. Si l&#8217;on souhaite définir la relation &#8216;User hasMany Comment&#8217;
(l&#8217;User a plusieurs Commentaires), la valeur associée à la clef &#8216;className&#8217;
devra être &#8216;Comments&#8217;.</li>
<li><strong>foreignKey</strong>: le nom de la clé étrangère que l&#8217;on trouve dans l&#8217;autre
table. Ceci sera particulièrement pratique si vous avez besoin de définir
plusieurs relations hasMany. La valeur par défaut de cette clé est le nom
du model actuel (avec des underscores) suffixé avec &#8216;_id&#8217;.</li>
<li><strong>bindingKey</strong>: le nom de la colonne dans la table courante, qui sera utilisée
pour correspondre à la <code class="docutils literal"><span class="pre">foreignKey</span></code>. S&#8217;il n&#8217;est pas spécifié, la clé
primaire (par exemple la colonne id de la table <code class="docutils literal"><span class="pre">Users</span></code>) sera utilisée.</li>
<li><strong>conditions</strong>: un tableau de conditions compatibles avec find() ou des
chaînes SQL comme <code class="docutils literal"><span class="pre">['Comments.visible'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code>.</li>
<li><strong>sort</strong>: un tableau compatible avec les clauses order de find() ou les
chaînes SQL comme <code class="docutils literal"><span class="pre">['Comments.created'</span> <span class="pre">=&gt;</span> <span class="pre">'ASC']</span></code>.</li>
<li><strong>dependent</strong>: Lorsque dependent vaut <code class="docutils literal"><span class="pre">true</span></code>, une suppression récursive du
model est possible. Dans cet exemple, les enregistrements Comment seront
supprimés lorsque leur Article associé l&#8217;aura été.</li>
<li><strong>cascadeCallbacks</strong>: Quand ceci et <strong>dependent</strong> sont à <code class="docutils literal"><span class="pre">true</span></code>, les
suppressions en cascade chargeront les entities supprimés pour que les
callbacks soient correctement lancés. Si à <code class="docutils literal"><span class="pre">false</span></code>. <code class="docutils literal"><span class="pre">deleteAll()</span></code> est
utilisée pour retirer les données associées et aucun callback ne sera lancé.</li>
<li><strong>propertyName</strong>: Le nom de la propriété qui doit être rempli avec les données
des Table associées dans les résultats de la table source. Par défaut,
celui-ci est le nom au pluriel et avec des underscores de l&#8217;association donc
<code class="docutils literal"><span class="pre">comments</span></code> dans notre exemple.</li>
<li><strong>strategy</strong>: Définit la stratégie de requête à utiliser. Par défaut à
&#8216;select&#8217;. L&#8217;autre valeur valide est &#8216;subquery&#8217;, qui remplace la liste <code class="docutils literal"><span class="pre">IN</span></code>
avec une sous-requête équivalente.</li>
<li><strong>saveStrategy</strong>: Soit &#8216;append&#8217; ou bien &#8216;replace&#8217;. Par défaut à &#8216;append&#8217;.
Quand &#8216;append&#8217; est choisi, les enregistrements existants sont ajoutés aux
enregistrements de la base de données. Quand &#8216;replace&#8217; est choisi, les enregistrements
associés qui ne sont pas dans l&#8217;ensemble actuel seront retirés. Si la clé étrangère
est une colonne qui peut être null ou si <code class="docutils literal"><span class="pre">dependent</span></code> est à true, les
enregistrements seront orphelins.</li>
<li><strong>finder</strong>: La méthode finder à utiliser lors du chargement des
enregistrements associés.</li>
</ul>
<p>Une fois que cette association a été définie, les opérations de recherche sur
la table Articles récupèreront également les Comments liés s&#8217;ils existent:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans un controller ou dans une méthode de table.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Comments&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ce qui est au-dessus génèrera une commande SQL similaire à:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">comments</span> <span class="nx">WHERE</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>Quand la stratégie de sous-requête est utilisée, une commande SQL similaire à
ce qui suit sera générée:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">comments</span> <span class="nx">WHERE</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="nx">SELECT</span> <span class="nx">id</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">);</span>
</pre></div>
</div>
<p>Vous voudrez peut-être mettre en cache les compteurs de vos associations
hasMany. C&#8217;est utile quand vous avez souvent besoin de montrer le nombre
d&#8217;enregistrements associés, mais que vous ne souhaitez pas charger tous les
articles juste pour les compter. Par exemple, le compteur de comment sur
n&#8217;importe quel article donné est souvent mis en cache pour rendre la génération
des lists d&#8217;article plus efficace. Vous pouvez utiliser
<a class="reference internal" href="behaviors/counter-cache.html"><span class="doc">CounterCacheBehavior</span></a> pour
mettre en cache les compteurs des enregistrements associés.</p>
<p>Assurez-vous que vos tables de base de données ne contiennent pas de colonnes
du même nom que les attributs d&#8217;association. Si par exemple vous avez un champs
counter en collision avec une propriété d&#8217;association, vous devez soit renommer
l&#8217;association ou le nom de la colonne.</p>
</div>
<div class="section" id="associations-belongstomany">
<span id="belongs-to-many-associations"></span><h2>Associations BelongsToMany<a class="headerlink" href="#associations-belongstomany" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A partir de la version 3.0, <code class="docutils literal"><span class="pre">hasAndBelongsToMany</span></code> / <code class="docutils literal"><span class="pre">HABTM</span></code> a été renommé
en <code class="docutils literal"><span class="pre">belongsToMany</span></code> / <code class="docutils literal"><span class="pre">BTM</span></code>.</p>
</div>
<p>Un exemple d&#8217;association BelongsToMany est &#8220;Article BelongsToMany Tags&#8221;, où
les tags d&#8217;un article sont partagés avec d&#8217;autres articles. BelongsToMany fait
souvent référence au &#8220;has and belongs to many&#8221;, et est une association classique
&#8220;many to many&#8221;.</p>
<p>La principale différence entre hasMany et BelongsToMany est que le lien entre
les models dans une association BelongsToMany n&#8217;est pas exclusif. par exemple
nous joignons notre table Articles avec la table Tags. En utilisant &#8216;funny&#8217;
comme un Tag pour mon Article, n&#8216;&#8220;utilise&#8221; pas le tag. Je peux aussi l&#8217;utiliser
pour le prochain article que j&#8217;écris.</p>
<p>Trois tables de la base de données sont nécessaires pour une association
BelongsToMany. Dans l&#8217;exemple du dessus, nous aurons besoin des tables pour
<code class="docutils literal"><span class="pre">articles</span></code>, <code class="docutils literal"><span class="pre">tags</span></code> et <code class="docutils literal"><span class="pre">articles_tags</span></code>. La table <code class="docutils literal"><span class="pre">articles_tags</span></code> contient
les données qui font le lien entre les tags et les articles. La table de
jointure est nommée à partir des deux tables impliquées, séparée par un
underscore par convention. Dans sa forme la plus simple, cette table se résume
à <code class="docutils literal"><span class="pre">article_id</span></code> et <code class="docutils literal"><span class="pre">tag_id</span></code>.</p>
<p><strong>belongsToMany</strong> nécessite une table de jointure séparée qui inclut deux noms
de <em>model</em>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Champs de la table de jointure</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Article belongsToMany Tag</td>
<td>articles_tags.id, articles_tags.tag_id, articles_tags.article_id</td>
</tr>
<tr class="row-odd"><td>Patient belongsToMany Doctor</td>
<td>doctors_patients.id, doctors_patients.doctor_id,
doctors_patients.patient_id.</td>
</tr>
</tbody>
</table>
<p>Nous pouvons définir l&#8217;association belongsToMany dans nos deux models comme
suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans src/Model/Table/ArticlesTable.php</span>
<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Dans src/Model/Table/TagsTable.php</span>
<span class="k">class</span> <span class="nc">TagsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nous pouvons aussi définir une relation plus spécifique en passant un tableau
de configuration:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In src/Model/Table/TagsTable.php</span>
<span class="k">class</span> <span class="nc">TagsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;joinTable&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles_tags&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Les clés possibles pour un tableau définissant une association belongsToMany
sont:</p>
<ul class="simple">
<li><strong>className</strong>: Le nom de la classe du model que l&#8217;on souhaite associer au
model actuel. Si l&#8217;on souhaite définir la relation
&#8216;Article belongsToMany Tag&#8217;, la valeur associée à la clef &#8216;className&#8217; devra
être &#8216;Tags&#8217;.</li>
<li><strong>joinTable</strong>: Le nom de la table de jointure utilisée dans cette association
(si la table ne colle pas à la convention de nommage des tables de jointure
belongsToMany). Par défaut, le nom de la table sera utilisé pour charger
l&#8217;instance Table pour la table de jointure/pivot.</li>
<li><strong>foreignKey</strong>: le nom de la clé étrangère dans la table de jointure et qui
fait référence au model actuel ou la liste en cas de clés étrangères
composites. Ceci est particulièrement pratique si vous avez besoin de définir
plusieurs relations belongsToMany. La valeur par défaut de cette clé est le
nom du model actuel (avec des underscores) avec le suffixe &#8216;_id&#8217;.</li>
<li><strong>bindingKey</strong>: le nom de la colonne dans l&#8217;autre table, qui sera utilisée
pour correspondre à la <code class="docutils literal"><span class="pre">foreignKey</span></code>. S&#8217;il n&#8217;est pas spécifié, la clé
primaire (par exemple la colonne id de la table <code class="docutils literal"><span class="pre">Users</span></code>) sera utilisée.</li>
<li><strong>targetForeignKey</strong>: le nom de la clé étrangère dans la table de jointure
pour le model cible ou la liste en cas de clés étrangères composites. La
valeur par défaut pour cette clé est le model cible, au singulier et en
underscore, avec le suffixe &#8216;_id&#8217;.</li>
<li><strong>conditions</strong>: un tableau de conditions compatibles avec <code class="docutils literal"><span class="pre">find()</span></code>. Si vous
avez des conditions sur une table associée, vous devriez utiliser un model
&#8216;through&#8217; et lui définir les associations belongsTo nécessaires.</li>
<li><strong>sort</strong>: un tableau de clauses order compatible avec find().</li>
<li><strong>dependent</strong>: Quand la clé dependent est définie à <code class="docutils literal"><span class="pre">false</span></code> et qu&#8217;une entity
est supprimée, les enregistrements de la table de jointure ne seront pas
supprimés.</li>
<li><strong>through</strong>: Vous permet de fournir soit le nom de l&#8217;instance de la Table
que vous voulez utiliser, soit l&#8217;instance elle-même. Cela rend possible la
personnalisation des clés de la table de jointure, et vous permet de
personnaliser le comportement de la table pivot.</li>
<li><strong>cascadeCallbacks</strong>: Quand définie à <code class="docutils literal"><span class="pre">true</span></code>, les suppressions en cascade
vont charger et supprimer les entities ainsi les callbacks sont correctement
lancés sur les enregistrements de la table de jointure. Quand définie à
<code class="docutils literal"><span class="pre">false</span></code>. <code class="docutils literal"><span class="pre">deleteAll()</span></code> est utilisée pour retirer les données associées
et aucun callback n&#8217;est lancé. Ceci est par défaut à <code class="docutils literal"><span class="pre">false</span></code> pour
réduire la charge.</li>
<li><strong>propertyName</strong>: Le nom de la propriété qui doit être remplie avec les
données de la table associée dans les résultats de la table source. Par défaut
c&#8217;est le nom au pluriel, avec des underscores de l&#8217;association, donc <code class="docutils literal"><span class="pre">tags</span></code>
dans notre exemple.</li>
<li><strong>strategy</strong>: Définit la stratégie de requête à utiliser. Par défaut à
&#8216;select&#8217;. L&#8217;autre valeur valide est &#8216;subquery&#8217;, qui remplace la liste <code class="docutils literal"><span class="pre">IN</span></code>
avec une sous-requête équivalente.</li>
<li><strong>saveStrategy</strong>: Soit &#8216;append&#8217; ou bien &#8216;replace&#8217;. Par défaut à &#8216;replace&#8217;.
Indique le mode à utiliser pour sauvegarder les entities associées. Le
premier va seulement créer des nouveaux liens entre les deux côtés de la
relation et le deuxième va effacer et remplacer pour créer les liens entre
les entities passées lors de la sauvegarde.</li>
<li><strong>finder</strong>: La méthode finder à utiliser lors du chargement des
enregistrements associés.</li>
</ul>
<p>Une fois que cette association a été définie, les opérations find sur la table
Articles peuvent contenir les enregistrements de Tag s&#8217;ils existent:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans un controller ou dans une méthode table.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Tags&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ce qui est au-dessus génèrera une requête SQL similaire à:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">tags</span>
<span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">articles_tags</span> <span class="nx">ON</span> <span class="p">(</span>
  <span class="nx">tags</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">article_tags</span><span class="o">.</span><span class="nx">tag_id</span>
  <span class="k">AND</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Quand la stratégie de sous-requête est utilisée, un SQL similaire à ce qui
suit sera générée:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">tags</span>
<span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">articles_tags</span> <span class="nx">ON</span> <span class="p">(</span>
  <span class="nx">tags</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">article_tags</span><span class="o">.</span><span class="nx">tag_id</span>
  <span class="k">AND</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="nx">SELECT</span> <span class="nx">id</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="section" id="utiliser-l-option-through">
<span id="using-the-through-option"></span><h3>Utiliser l&#8217;Option &#8216;through&#8217;<a class="headerlink" href="#utiliser-l-option-through" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si vous souhaitez ajouter des informations supplémentaires à la table
join/pivot, ou si vous avez besoin d&#8217;utiliser les colonnes jointes en dehors
des conventions, vous devrez définir l&#8217;option <code class="docutils literal"><span class="pre">through</span></code>. L&#8217;option <code class="docutils literal"><span class="pre">through</span></code>
vous fournit un contrôle total sur la façon dont l&#8217;association belongsToMany
sera créée.</p>
<p>Il est parfois souhaitable de stocker des données supplémentaires avec une
association many to many. Considérez ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Student</span> <span class="nx">BelongsToMany</span> <span class="nx">Course</span>
<span class="nx">Course</span> <span class="nx">BelongsToMany</span> <span class="nx">Student</span>
</pre></div>
</div>
<p>Un Etudiant (Student) peut prendre plusieurs Cours (many Courses) et un Cours
(Course) peut être pris par plusieurs Etudiants (many Students). C&#8217;est une
simple association many to many. La table suivante suffira:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">id</span> <span class="o">|</span> <span class="nx">student_id</span> <span class="o">|</span> <span class="nx">course_id</span>
</pre></div>
</div>
<p>Maintenant si nous souhaitons stocker le nombre de jours qui sont attendus par
l&#8217;étudiant sur le cours et leur note finale? La table que nous souhaiterions
serait:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">id</span> <span class="o">|</span> <span class="nx">student_id</span> <span class="o">|</span> <span class="nx">course_id</span> <span class="o">|</span> <span class="nx">days_attended</span> <span class="o">|</span> <span class="nx">grade</span>
</pre></div>
</div>
<p>La façon d&#8217;intégrer notre besoin est d&#8217;utiliser un <strong>model join</strong>, autrement
connu comme une association <strong>hasMany through</strong>. Ceci étant, l&#8217;association est
un model lui-même. Donc, nous pouvons créer un nouveau model CoursesMemberships.
Regardez les models suivants:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StudentsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Courses&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;through&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CoursesMemberships&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">CoursesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Students&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;through&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CoursesMemberships&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">CoursesMembershipsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Students&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Courses&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La table de jointure CoursesMemberships identifie de façon unique une
participation donnée d&#8217;un Etudiant à un Cours en plus des meta-informations
supplémentaires.</p>
</div>
<div class="section" id="conditions-d-association-par-defaut">
<h3>Conditions d&#8217;Association par Défaut<a class="headerlink" href="#conditions-d-association-par-defaut" title="Lien permanent vers ce titre">¶</a></h3>
<p>L&#8217;option <code class="docutils literal"><span class="pre">finder</span></code> vous permet d&#8217;utiliser un
<a class="reference internal" href="retrieving-data-and-resultsets.html#custom-find-methods"><span class="std std-ref">finder personnalisé</span></a> pour charger les données
associées. Ceci permet de mieux encapsuler vos requêtes et de garder votre code
plus DRY. Il y a quelques limitations lors de l&#8217;utilisation de finders pour
charger les données dans les associations qui sont chargées en utilisant les
jointures (belongsTo/hasOne). Les seuls aspects de la requête qui seront
appliqués à la requête racine sont les suivants:</p>
<ul class="simple">
<li>WHERE conditions.</li>
<li>Additional joins.</li>
<li>Contained associations.</li>
</ul>
<p>Les autres aspects de la requête, comme les colonnes sélectionnées, l&#8217;order, le
group by, having et les autres sous-instructions, ne seront pas appliqués à la
requête racine. Les associations qui <em>ne</em> sont <em>pas</em> chargées avec les jointures
(hasMany/belongsToMany), n&#8217;ont pas les restrictions ci-dessus et peuvent aussi
utiliser les formateurs de résultats ou les fonctions map/reduce.</p>
</div>
<div class="section" id="charger-les-associations">
<h3>Charger les Associations<a class="headerlink" href="#charger-les-associations" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une fois que vous avez défini vos associations, vous pouvez <a class="reference internal" href="retrieving-data-and-resultsets.html#eager-loading-associations"><span class="std std-ref">charger en
eager les associations</span></a> quand vous récupérez les
résultats.</p>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="fr">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Préface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP en un Coup d&#8217;Oeil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Guide de Démarrage Rapide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/3-x-migration-guide.html">3.x Guide de Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutoriels et exemples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer</a></li>
</ul>
<p class="caption"><span class="caption-text">Pour Commencer</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Les Objets Request &amp; Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers (Contrôleurs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views (Vues)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../orm.html">Accès Base de Données &amp; ORM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="database-basics.html">Notions de Base de Base de Données</a></li>
<li class="toctree-l2"><a class="reference internal" href="query-builder.html">Query Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="table-objects.html">Les Objets Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="entities.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="retrieving-data-and-resultsets.html">Récupérer les Données et les Ensembles de Résultats</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Valider des Données</a></li>
<li class="toctree-l2"><a class="reference internal" href="saving-data.html">Sauvegarder les Données</a></li>
<li class="toctree-l2"><a class="reference internal" href="deleting-data.html">Supprimer des Données</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Associations - Lier les Tables Ensemble</a></li>
<li class="toctree-l2"><a class="reference internal" href="behaviors.html">Behaviors (Comportements)</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema-system.html">Système de Schéma</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console-and-shells/orm-cache.html">Shell du Cache de l&#8217;ORM</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Généralités</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Console Bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/caching.html">La mise en cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Outils de Console, Shells, &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/debugging.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Déploiement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/errors.html">Gestion des Erreurs &amp; Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/events.html">Événements système</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/internationalization-and-localization.html">Internationalisation &amp; Localisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/logging.html">Journalisation (logging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/form.html">Formulaires Sans Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilitaires</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/app.html">Classe App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/httpclient.html">Client Http</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/registry-objects.html">Objets Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Divers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/global-constants-and-functions.html">Globales &amp; Fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Outil d&#8217;Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Annexes</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Mis à jour le août 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>
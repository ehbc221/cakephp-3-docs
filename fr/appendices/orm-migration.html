

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Guide de Migration du Nouvel ORM - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/appendices/orm-migration.html" /><link rel="alternate" hreflang="pt_BR" href="../../pt/appendices/orm-migration.html" /><link rel="alternate" hreflang="es" href="../../es/appendices/orm-migration.html" /><link rel="alternate" hreflang="ja" href="../../ja/appendices/orm-migration.html" /><link rel="alternate" hreflang="zh" href="../../zh/appendices/orm-migration.html" /><link rel="alternate" hreflang="tr" href="../../tr/appendices/orm-migration.html" /><link rel="alternate" hreflang="ru" href="../../ru/appendices/orm-migration.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within documentation CakePHP Cookbook 3.5" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="documentation CakePHP Cookbook 3.5" href="../index.html" />
    <link rel="up" title="3.x Guide de Migration" href="3-x-migration-guide.html" />
    <link rel="next" title="Tutoriels et exemples" href="../tutorials-and-examples.html" />
    <link rel="prev" title="3.0 Guide de Migration" href="3-0-migration-guide.html" />

    <script type="text/javascript">
    window.lang = "fr";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Recherche" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        fr
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li><a href="../../en/appendices/orm-migration.html">en</a></li>
                                            
                                                <li><a href="../../pt/appendices/orm-migration.html">pt</a></li>
                                            
                                                <li><a href="../../es/appendices/orm-migration.html">es</a></li>
                                            
                                                <li><a href="../../ja/appendices/orm-migration.html">ja</a></li>
                                            
                                                <li></li>
                                            
                                                <li><a href="../../zh/appendices/orm-migration.html">zh</a></li>
                                            
                                                <li><a href="../../tr/appendices/orm-migration.html">tr</a></li>
                                            
                                                <li><a href="../../ru/appendices/orm-migration.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/fr">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/fr">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/fr/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/fr/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/fr/appendices/orm-migration.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Guide de Migration du Nouvel ORM</a><ul>
<li><a class="reference internal" href="#design-du-nouvel-orm">Design du nouvel ORM</a><ul>
<li><a class="reference internal" href="#les-objets-table">Les Objets Table</a></li>
<li><a class="reference internal" href="#les-objets-query">Les Objets Query</a></li>
<li><a class="reference internal" href="#les-objets-entity">Les Objets Entity</a></li>
</ul>
</li>
<li><a class="reference internal" href="#differences-cle">Différences Clé</a><ul>
<li><a class="reference internal" href="#les-regles-d-inflection-mises-a-jour">Les Règles d&#8217;Inflection Mises à Jour</a></li>
<li><a class="reference internal" href="#find-retourne-un-objet-query">Find retourne un Objet Query</a></li>
<li><a class="reference internal" href="#changements-de-la-methode-finder">Changements de la méthode Finder</a></li>
<li><a class="reference internal" href="#recursive-et-containablebehavior-retires">Recursive et ContainableBehavior Retirés.</a></li>
<li><a class="reference internal" href="#pas-d-event-afterfind-ou-de-champs-virtuels">Pas d&#8217;Event afterFind ou de Champs Virtuels</a></li>
<li><a class="reference internal" href="#les-associations-ne-sont-plus-definies-en-proprietes">Les Associations Ne sont Plus Définies en Propriétés</a></li>
<li><a class="reference internal" href="#validation-n-est-plus-definie-comme-une-propriete">Validation n&#8217;est plus Définie Comme une Propriété</a></li>
<li><a class="reference internal" href="#identifier-quoting-desactive-par-defaut">Identifier Quoting Désactivé par Défaut</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mise-a-jour-des-behaviors">Mise à jour des behaviors</a><ul>
<li><a class="reference internal" href="#nouvelle-classe-de-base">Nouvelle classe de Base</a></li>
<li><a class="reference internal" href="#changements-de-signature-des-methodes-mixin">Changements de Signature des Méthodes Mixin</a></li>
<li><a class="reference internal" href="#changements-de-signature-de-methode-de-callback">Changements de Signature de Méthode de Callback</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="guide-de-migration-du-nouvel-orm">
<h1>Guide de Migration du Nouvel ORM<a class="headerlink" href="#guide-de-migration-du-nouvel-orm" title="Lien permanent vers ce titre">¶</a></h1>
<p>CakePHP 3.0 apporte un nouvel ORM qui a été réécrit de zéro.
Alors que l&#8217;ORM utilisé dans 1.x et 2.x nous a bien servi pendant un long
moment, il avait quelques problèmes que nous souhaitions régler.</p>
<ul class="simple">
<li>Frankenstein - est-ce un enregistrement, ou une table? Actuellement c&#8217;est les
deux.</li>
<li>API incohérente - Model::read() par exemple.</li>
<li>Pas d&#8217;objet query - Les queries sont toujours définies comme des tableaux,
ceci amène quelques limitations et restrictions. Par exemple, cela rend les
unions et les sous-requêtes plus compliquées.</li>
<li>Retourne des tableaux. C&#8217;est une plainte courante au sujet de CakePHP, et
ceci a probablement réduit le passage à certains niveaux.</li>
<li>Pas d&#8217;objet d&#8217;enregistrement - Ceci rend l&#8217;attachement de méthodes de format
difficile/impossible.</li>
<li>Containable - Devrait être une partie de l&#8217;ORM, pas un behaviour compliqué.</li>
<li>Recursive - Ceci devrait être mieux contrôlé en définissant quelles
associations sont inclues, et pas un niveau de récursivité.</li>
<li>DboSource - C&#8217;est un calvaire, et le Model repose dessus plus que sur la
source de données. Cette séparation pourrait être plus propre et plus simple.</li>
<li>Validation - Devrait être séparée, c&#8217;est actuellement une énorme fonction
ingérable. La rendre un peu plus réutilisable rendrait le framework plus
extensible.</li>
</ul>
<p>L&#8217;ORM dans CakePHP 3.0 résout ces problèmes et beaucoup d&#8217;autres encore. Le
nouvel ORM se focalise actuellement sur les stockages des données
relationnelles. Dans le future et à travers les plugins, nous ajouterons des
stockages non relationnels comme ElasticSearch et d&#8217;autres encore.</p>
<div class="section" id="design-du-nouvel-orm">
<h2>Design du nouvel ORM<a class="headerlink" href="#design-du-nouvel-orm" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le nouvel ORM résout de nombreux problèmes en ayant des classes plus
spécialisées et concentrées. Dans le passé vous utilisiez <code class="docutils literal"><span class="pre">Model</span></code> et une
Source de données pour toutes les opérations. Maintenant l&#8217;ORM est
séparé en plus de couches:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Cake\Database\Connection</span></code> - Fournit un moyen de créer et utiliser des
connections indépendamment de la plateforme. Cette classe permet
d&#8217;utiliser les transactions, d&#8217;exécuter les queries et d&#8217;accéder aux données
du schema.</li>
<li><code class="docutils literal"><span class="pre">Cake\Database\Dialect</span></code> - Les classes dans ce namespace fournissent le SQL
spécifique à une plateforme et transforment les queries pour fonctionner selon
les limitations spécifiques de celle ci.</li>
<li><code class="docutils literal"><span class="pre">Cake\Database\Type</span></code> - Est la classe de passerelle vers le système
de conversion de type de base de données de CakePHP. C&#8217;est un framework
modulable pour l&#8217;ajout des types de colonnes abstraites et pour fournir des
mappings entre base de données, les représentations de PHP et les liens PDO
pour chaque type de données. Par exemple, les colonnes datetime sont
maintenant représentées comme des instances <code class="docutils literal"><span class="pre">DateTime</span></code> dans votre code.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Table</span></code> - Le point d&#8217;entrée principal dans le nouvel ORM. Fournit
l&#8217;accès à une table unique. Gère la définition d&#8217;association, utilise les
behaviors et la création d&#8217;entités et d&#8217;objets query.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Behavior</span></code> - La classe de base pour les behaviors, qui agit de
façon très similaire aux behaviors dans les versions précédentes de CakePHP.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Query</span></code> - Un générateur de requêtes simple basé sur les objets qui
remplace les tableaux profondément imbriqués utilisés dans les versions
précédentes de CakePHP.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\ResultSet</span></code> - Une collection de résultats qui donne des outils
puissants pour manipuler les données dans l&#8217;ensemble.</li>
<li><code class="docutils literal"><span class="pre">Cake\ORM\Entity</span></code> - Représente le résultat d&#8217;un enregistrement unique. Rend
les données accessibles et sérialisable vers des formats divers en un tour de
main.</li>
</ul>
<p>Maintenant que vous êtes plus familier avec certaines des classes avec
lesquelles vous intéragissez le plus fréquemment dans le nouvel ORM, il est
bon de regarder les trois plus importantes classes. Les classes
<code class="docutils literal"><span class="pre">Table</span></code>, <code class="docutils literal"><span class="pre">Query</span></code> et <code class="docutils literal"><span class="pre">Entity</span></code> sont les grandes nouveautés du lifting du
nouvel ORM, et chacun sert un objectif différent.</p>
<div class="section" id="les-objets-table">
<h3>Les Objets Table<a class="headerlink" href="#les-objets-table" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les objets Table sont la passerelle vers vos données. Ils gèrent plusieurs des
tâches que le <code class="docutils literal"><span class="pre">Model</span></code> faisait dans les versions précédentes. Les classes de
Table gèrent les tâches telles que:</p>
<ul class="simple">
<li>Créer des queries.</li>
<li>Fournir des finders.</li>
<li>Valider et sauvegarder des entités.</li>
<li>Supprimer des entités.</li>
<li>Définir &amp; accéder aux associations.</li>
<li>Déclencher les événements de callback.</li>
<li>Interagir avec les behaviors.</li>
</ul>
<p>Le chapitre de la documentation sur <a class="reference internal" href="../orm/table-objects.html"><span class="doc">Les Objets Table</span></a> fournit bien plus
de détails sur la façon d&#8217;utiliser les objets de table que ce guide.
Généralement quand on déplace le code du model existant,
il va finir dans un objet Table. Les objets Table ne contiennent aucun
SQL dépendant de la plateforme. A la place, ils collaborent avec les entités et
le générateur de requêtes pour faire leur travail. Les objets Table
intéragissent aussi avec les behaviors et d&#8217;autres parties à travers les
événements publiés.</p>
</div>
<div class="section" id="les-objets-query">
<h3>Les Objets Query<a class="headerlink" href="#les-objets-query" title="Lien permanent vers ce titre">¶</a></h3>
<p>Alors que celles-ci ne sont pas des classes que vous allez construire vous-même,
le code de votre application fera un usage intensif du
<a class="reference internal" href="../orm/query-builder.html"><span class="doc">Générateur de Requêtes</span></a> qui est central dans le
nouvel ORM. Le générateur de requêtes facilite la construction de requêtes
simples ou complexes incluant celles qui étaient précédemment très difficiles
dans CakePHP comme <code class="docutils literal"><span class="pre">HAVING</span></code>, <code class="docutils literal"><span class="pre">UNION</span></code> et les sous-requêtes.</p>
<p>Les différents appels de find() que votre application utilise couramment
auront besoin d&#8217;être mis à jour pour utiliser le nouveau générateur de requête.
L&#8217;objet Query est responsable de la façon de contenir les données pour
réaliser une requête sans l&#8217;exécuter. Elle collabore avec la connection/dialect
pour générer le SQL spécifique à la plateforme qui est exécutée en créant un
<code class="docutils literal"><span class="pre">ResultSet</span></code> en sortie.</p>
</div>
<div class="section" id="les-objets-entity">
<h3>Les Objets Entity<a class="headerlink" href="#les-objets-entity" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes de CakePHP la classe <code class="docutils literal"><span class="pre">Model</span></code> retournait
des tableaux idiots qui ne contenaient pas de logique ou de behavior. Alors
que la communauté rendait cela accessible et moins douloureux avec les
projets comme CakeEntity, le tableau de résutlats était souvent une source
de difficulté pour beaucoup de développeurs. Pour CakePHP 3.0, l&#8217;ORM
retourne toujours l&#8217;ensemble des résultats en objet à moins que vous ne
désactiviez explicitement cette fonctionnalité. Le chapitre sur
<a class="reference internal" href="../orm/entities.html"><span class="doc">Entities</span></a> couvre les différentes tâches que vous pouvez accomplir
avec les entities.</p>
<p>Les entities sont créées en choisissant l&#8217;une des deux façons suivantes. Soit
en chargeant les données à partir de la base de données, soit en convertissant
les données de requête en entities. Une fois créées, les entities vous
permettent de manipuler les données qu&#8217;elles contiennent et font persister leurs
données en collaborant avec les objets Table.</p>
</div>
</div>
<div class="section" id="differences-cle">
<h2>Différences Clé<a class="headerlink" href="#differences-cle" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le nouvel ORM est un grand renouveau par rapport à la couche <code class="docutils literal"><span class="pre">Model</span></code>
existante. Il y a plusieurs différences importantes à comprendre sur la façon
dont le nouvel ORM opère et comment mettre à jour votre code.</p>
<div class="section" id="les-regles-d-inflection-mises-a-jour">
<h3>Les Règles d&#8217;Inflection Mises à Jour<a class="headerlink" href="#les-regles-d-inflection-mises-a-jour" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous avez peut-être noté que les classes Table ont un nom pluralisé. En plus
d&#8217;avoir les noms pluralisés, les associations se réfèrent aussi à la forme
plurielle. C&#8217;est en opposition par rapport au <code class="docutils literal"><span class="pre">Model</span></code> où les noms et
associations étaient au singulier. Il y avait plusieurs raisons pour ce
changement:</p>
<ul class="simple">
<li>Les classes de Table représentent des <strong>collections</strong> de données, pas des
enregistrements uniques.</li>
<li>Les associations lient les tables ensemble, décrivant les relations entre
plusieurs choses.</li>
</ul>
<p>Alors que les conventions pour les objets Table sont de toujours utiliser
les formes plurielles, les propriétés d&#8217;association de votre entitie seront
remplies en se basant sur le type d&#8217;association.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les associations BelongsTo et HasOne utiliseront la forme au singulier,
tandis que HasMany et BelongsToMany (HABTM) utiliseront la forme plurielle.</p>
</div>
<p>Le changement de convention pour les objects Table est plus apparent lors de
la construction de queries. A la place d&#8217;expressions de requêtes comme:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Faux</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;User.active&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>
</pre></div>
</div>
<p>Vous avez besoin d&#8217;utiliser la forme au pluriel:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Correct</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;Users.active&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="find-retourne-un-objet-query">
<h3>Find retourne un Objet Query<a class="headerlink" href="#find-retourne-un-objet-query" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une différence importante dans le nouvel ORM est qu&#8217;appeler <code class="docutils literal"><span class="pre">find</span></code> sur une
table ne va pas retourner les résultats immédiatement, mais va retourner un
objet Query; cela sert dans plusieurs cas.</p>
<p>Il est possible de modifier les requêtes plus tard, après avoir appeler
<code class="docutils literal"><span class="pre">find</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$articles</span> <span class="o">=</span> <span class="nx">TableRegistry</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span><span class="o">-&gt;</span><span class="na">order</span><span class="p">([</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Il est possible d&#8217;empiler les finders personnalisés pour ajouter les conditions
à la suite, pour trier, limiter et toute autre clause pour la même requête
avant qu&#8217;elle ne soit exécutée:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;approved&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;popular&#39;</span><span class="p">);</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Vous pouvez composer des requêtes l&#8217;une dans l&#8217;autre pour créer des
sous-requêtes plus facilement que jamais:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;approved&#39;</span><span class="p">);</span>
<span class="nv">$favoritesQuery</span> <span class="o">=</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;favorites&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="p">]);</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$favoritesQuery</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">([</span><span class="s1">&#39;id&#39;</span><span class="p">])]);</span>
</pre></div>
</div>
<p>Vous pouvez décorer les requêtes avec des itérateurs et des méthodes d&#8217;appel
sans même toucher à la base de données, c&#8217;est bien quand vous avez des parties
de votre view mise en cache et avez les résultats pris à partir de la base de
données qui n&#8217;est en fait pas nécessaire:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Pas de requêtes faites dans cet exemple!</span>
<span class="nv">$results</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">order</span><span class="p">([</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">formatResults</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Cake\Collection\CollectionInterface</span> <span class="nv">$results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">extract</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">);</span>
    <span class="p">});</span>
</pre></div>
</div>
<p>Les requêtes peuvent être vues comme un objet de résultat, essayant d&#8217;itérer la
requête, appelant <code class="docutils literal"><span class="pre">toArray()</span></code> ou toute méthode héritée de
<a class="reference internal" href="../core-libraries/collections.html"><span class="doc">collection</span></a>, va faire que la requête sera
exécutée et les résultats vous seront retournés.</p>
<p>La plus grande différence que vous trouverez quand vous venez de CakePHP 2.x est
que <code class="docutils literal"><span class="pre">find('first')</span></code> n&#8217;existe plus. Il existe un remplacement trivial pour
cela et il s&#8217;agit de la méthode <code class="docutils literal"><span class="pre">first()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Avant</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">);</span>

<span class="c1">// Maintenant</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

<span class="c1">// Avant</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Article</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">]);</span>

<span class="c1">// Maintenant</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]</span>
<span class="p">])</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>

<span class="c1">// Peut aussi être écrit</span>
<span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
</pre></div>
</div>
<p>Si vous chargez un enregistrement unique par sa clé primaire, il serait mieux
de juste appeler <code class="docutils literal"><span class="pre">get()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="changements-de-la-methode-finder">
<h3>Changements de la méthode Finder<a class="headerlink" href="#changements-de-la-methode-finder" title="Lien permanent vers ce titre">¶</a></h3>
<p>Retourner un objet Query à partir d&#8217;une méthode find a plusieurs avantages,
mais vient avec un coût pour les gens migrant de 2.x. Si vous aviez quelques
méthodes find personnalisées dans vos models, elles auront besoin de quelques
modifications. C&#8217;est de cette façon que vous créez les méthodes finder
personnalisées dans 3.0:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">findPopular</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;times_viewed&#39;</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">findFavorites</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$for</span> <span class="o">=</span> <span class="nv">$options</span><span class="p">[</span><span class="s1">&#39;for&#39;</span><span class="p">];</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">matching</span><span class="p">(</span><span class="s1">&#39;Users.Favorites&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$q</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$for</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$q</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;Favorites.user_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$for</span><span class="p">]);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Comme vous pouvez le voir, ils sont assez simples, ils obtiennent un objet
Query à la place d&#8217;un tableau et doivent retourner un objet Query en retour.
Pour 2.x, les utilisateurs qui implémentaient la logique afterFind dans les
finders personnalisés, vous devez regarder la section <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#map-reduce"><span class="std std-ref">Modifier les Résultats avec Map/Reduce</span></a>, ou
utiliser les <a class="reference internal" href="../core-libraries/collections.html"><span class="doc">collections</span></a>. Si dans vos
models, vous aviez pour habitude d&#8217;avoir un afterFind pour toutes les
opérations de find, vous pouvez migrer ce code d&#8217;une des façons suivantes:</p>
<ol class="arabic simple">
<li>Surcharger la méthode constructeur de votre entity et faire le formatage supplémentaire ici.</li>
<li>Créer des méthodes accesseurs dans votre entity pour créer les propriétés virtuelles.</li>
<li>Redéfinir <code class="docutils literal"><span class="pre">findAll()</span></code> et utiliser <code class="docutils literal"><span class="pre">formatResults</span></code>.</li>
</ol>
<p>Dans le 3ème cas ci-dessus, votre code ressemblerait à:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">findAll</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">formatResults</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Cake\Collection\CollectionInterface</span> <span class="nv">$results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$results</span><span class="o">-&gt;</span><span class="na">map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Votre logique afterfind</span>
        <span class="p">});</span>
    <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous avez peut-être noté que les finders personnalisés reçoivent
un tableau d&#8217;options, vous pouvez passer toute information supplémentaire
à votre finder en utilisant ce paramètre. C&#8217;est une bonne nouvelle pour la
migration de gens à partir de 2.x. Chacune des clés de requêtées qui a été
utilisée dans les versions précédentes sera convertie automatiquement pour
vous dans 3.x vers les bonnes fonctions:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Ceci fonctionne dans les deux CakePHP 2.x et 3.0</span>
<span class="nv">$articles</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">],</span>
    <span class="s1">&#39;conditions&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;OR&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake&#39;</span><span class="p">,</span> <span class="s1">&#39;author_id&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">],</span>
        <span class="s1">&#39;published&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">],</span>
    <span class="s1">&#39;contain&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Authors&#39;</span><span class="p">],</span> <span class="c1">// Le seul changement! (notez le pluriel)</span>
    <span class="s1">&#39;order&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">],</span>
    <span class="s1">&#39;limit&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Si votre application utilise des <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#dynamic-finders"><span class="std std-ref">Finders Dynamiques</span></a> ou &#8216;magiques&#8217;, vous
devrez adapter ces appels. Dans 3.x, les méthodes <code class="docutils literal"><span class="pre">findAllBy*</span></code> ont été
retirées, à la place <code class="docutils literal"><span class="pre">findBy*</span></code> retourne toujours un objet query. Pour
récupérer le premier résultat, vous devrez utiliser la méthode <code class="docutils literal"><span class="pre">first()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">findByTitle</span><span class="p">(</span><span class="s1">&#39;Un super post!&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">first</span><span class="p">();</span>
</pre></div>
</div>
<p>Heureusement, la migration à partir des versions anciennes n&#8217;est pas aussi
difficile qu&#8217;il y paraît, la plupart des fonctionnalités que nous avons ajoutées
vous aide à retirer le code puisque vous pouvez mieux exprimer vos exigences
en utilisant le nouvel ORM et en même temps les wrappers de compatibilité vous
aideront à réécrire ces petites différences d&#8217;une façon rapide et sans douleur.</p>
<p>Une des autres améliorations sympas dans 3.x autour des méthodes finder est que
les behaviors peuvent implémenter les méthodes finder sans aucun soucis. En
définissant simplement une méthode avec un nom matchant et la signature sur un
Behavior le finder sera automatiquement disponible sur toute table sur laquelle
le behavior est attaché.</p>
</div>
<div class="section" id="recursive-et-containablebehavior-retires">
<h3>Recursive et ContainableBehavior Retirés.<a class="headerlink" href="#recursive-et-containablebehavior-retires" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes de CakePHP, vous deviez utiliser
<code class="docutils literal"><span class="pre">recursive</span></code>, <code class="docutils literal"><span class="pre">bindModel()</span></code>, <code class="docutils literal"><span class="pre">unbindModel()</span></code> et <code class="docutils literal"><span class="pre">ContainableBehavior</span></code>
pour réduire les données chargées pour l&#8217;ensemble des associations que
vous souhaitiez. Une tactique habituelle pour gérer les
associations était de définir <code class="docutils literal"><span class="pre">recursive</span></code> à <code class="docutils literal"><span class="pre">-1</span></code> et d&#8217;utiliser Containable
pour gérer toutes les associations. Dans CakePHP 3.0 ContainableBehavior,
recursive, bindModel, et unbindModel ont été retirées. A la place, la méthode
<code class="docutils literal"><span class="pre">contain()</span></code> a été favorisée pour être une fonctionnalité du cœur du
query builder. Les associations sont seulement chargées si elles sont
explicitement activées. Par exemple:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Va <strong>seulement</strong> charger les données à partir de la table <code class="docutils literal"><span class="pre">articles</span></code> puisque
aucune association n&#8217;a été inclue. Pour charger les articles et leurs auteurs
liés, vous feriez:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Authors&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>En chargeant seulement les données associées qui on été spécifiquement requêtées
vous ne passez pas votre temps à vous battre avec l&#8217;ORM à essayer d&#8217;obtenir
seulement les données que vous souhaitez.</p>
</div>
<div class="section" id="pas-d-event-afterfind-ou-de-champs-virtuels">
<h3>Pas d&#8217;Event afterFind ou de Champs Virtuels<a class="headerlink" href="#pas-d-event-afterfind-ou-de-champs-virtuels" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes de CakePHP, vous aviez besoin de rendre
extensive l&#8217;utilisation du callback <code class="docutils literal"><span class="pre">afterFind</span></code> et des champs virtuels afin
de créer des propriétés de données générées. Ces fonctionnalités ont été
retirées dans 3.0. Du fait de la façon dont ResultSets génèrent itérativement
les entities, le callback <code class="docutils literal"><span class="pre">afterFind</span></code> n&#8217;était pas possible.
afterFind et les champs virtuels peuvent tous deux largement être remplacés par
les propriétés virtuelles sur les entities. Par exemple si votre entité User
a les deux colonnes first et last name, vous pouvez ajouter un accesseur pour
<cite>full_name</cite> et générer la propriété à la volée:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nx">Entity</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFullName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">first_name</span> <span class="o">.</span> <span class="s1">&#39;  &#39;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">last_name</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Une fois définie, vous pouvez accéder à votre nouvelle propriété en utilisant
<code class="docutils literal"><span class="pre">$user-&gt;full_name</span></code>. L&#8217;utilisation des fonctionnalités <a class="reference internal" href="../orm/retrieving-data-and-resultsets.html#map-reduce"><span class="std std-ref">Modifier les Résultats avec Map/Reduce</span></a>
de l&#8217;ORM vous permettent de construire des données agrégées à partir de vos
résultats, ce qui était souvent un autre cas d&#8217;utilisation callback <code class="docutils literal"><span class="pre">afterFind</span></code>.</p>
<p>Alors que les champs virtuels ne sont plus une fonctionnalité de l&#8217;ORM,
l&#8217;ajout des champs calculés est facile à faire dans les méthodes finder. En
utilisant le query builder et les objets expression, vous pouvez atteindre
les mêmes résultats que les champs virtuels, cela donne:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">findAverage</span><span class="p">(</span><span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span> <span class="o">=</span> <span class="p">[])</span>
    <span class="p">{</span>
        <span class="nv">$avg</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">func</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">avg</span><span class="p">(</span><span class="s1">&#39;rating&#39;</span><span class="p">);</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">select</span><span class="p">([</span><span class="s1">&#39;average&#39;</span> <span class="o">=&gt;</span> <span class="nv">$avg</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="les-associations-ne-sont-plus-definies-en-proprietes">
<h3>Les Associations Ne sont Plus Définies en Propriétés<a class="headerlink" href="#les-associations-ne-sont-plus-definies-en-proprietes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les versions précédentes de CakePHP, les diverses associations que vos
models avaient, ont été définies dans les propriétés comme <code class="docutils literal"><span class="pre">$belongsTo</span></code> et
<code class="docutils literal"><span class="pre">$hasMany</span></code>. Dans CakePHP 3.0, les associations sont créées avec les méthodes.
L&#8217;utilisation de méthodes vous permet de mettre de côté plusieurs définitions
de classes de limitations, et fournissent seulement une façon de définir les
associations. Votre méthode <code class="docutils literal"><span class="pre">initialize()</span></code> et toutes les autres parties de
votre code d&#8217;application, interagit avec la même API lors de la
manipulation des associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Movies&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Rating&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Comme vous pouvez le voir de l&#8217;exemple ci-dessus, chaque type d&#8217;association
utilise une méthode pour créer l&#8217;association. Une autre différence est que
<code class="docutils literal"><span class="pre">hasAndBelongsToMany</span></code> a été renommée en <code class="docutils literal"><span class="pre">belongsToMany</span></code>. Pour en apprendre
plus sur la création des associations dans 3.0, regardez la section sur
<a class="reference internal" href="../orm/associations.html"><span class="doc">les associations</span></a>.</p>
<p>Une autre amélioration bienvenue de CakePHP est la capacité de créer votre
propre classe d&#8217;associations. Si vous avez des types d&#8217;association qui ne sont
pas couverts par les types de relations intégrées, vous pouvez créer une
sous-classe <code class="docutils literal"><span class="pre">Association</span></code> personnalisée et définir la logique d&#8217;association
dont vous avez besoin.</p>
</div>
<div class="section" id="validation-n-est-plus-definie-comme-une-propriete">
<h3>Validation n&#8217;est plus Définie Comme une Propriété<a class="headerlink" href="#validation-n-est-plus-definie-comme-une-propriete" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme les associations, les règles de validation ont été définies comme une
propriété de classe dans les versions précédentes de CakePHP. Ce tableau
sera ensuite transformé paresseusement en un objet <code class="docutils literal"><span class="pre">ModelValidator</span></code>. Cette
étape de transformation ajoutée en couche d&#8217;indirection, compliquant les
changements de règle lors de l&#8217;exécution. De plus, les règles de validation
étant définies comme propriété rendait difficile pour un model d&#8217;avoir
plusieurs ensembles de règles de validation. Dans CakePHP 3.0, on a remédié à
deux de ces problèmes. Les règles de validation sont toujours construites
avec un objet <code class="docutils literal"><span class="pre">Validator</span></code>, et il est trivial d&#8217;avoir plusieurs ensembles de
règles:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\Query</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\Validation\Validator</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ReviewsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">validationDefault</span><span class="p">(</span><span class="nx">Validator</span> <span class="nv">$validator</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$validator</span><span class="o">-&gt;</span><span class="na">requirePresence</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,</span> <span class="s1">&#39;length&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;minLength&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Reviews must be 20 characters or more&#39;</span><span class="p">,</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;numeric&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;rule&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;numeric&#39;</span>
            <span class="p">]);</span>
        <span class="k">return</span> <span class="nv">$validator</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Vous pouvez définir autant de méthodes de validation que vous souhaitez. Chaque
méthode doit être préfixée avec <code class="docutils literal"><span class="pre">validation</span></code> et accepte un argument
<code class="docutils literal"><span class="pre">$validator</span></code>.</p>
<p>Dans les versions précédentes de CakePHP, la &#8216;validation&#8217; et les callbacks liés
couvraient quelques utilisations liées mais différentes. Dans CakePHP 3.0, ce
qui était avant appelé validation est maintenant séparé en deux concepts:</p>
<ol class="arabic simple">
<li>Validation du type de données et du format.</li>
<li>Vérification des règles métiers.</li>
</ol>
<p>La validation est maintenant appliquée avant que les entities de l&#8217;ORM
ne soient créées à partir des données de request. Cette étape permet de
vous assurer que les données correspondent au type de données, au format et
à la forme de base que votre application attend. Vous pouvez utiliser
vos validateurs quand vous convertissez en entities les données de request en
utilisant l&#8217;option <code class="docutils literal"><span class="pre">validate</span></code>. Consultez la documentation
<a class="reference internal" href="../orm/saving-data.html#converting-request-data"><span class="std std-ref">Convertir les Données Requêtées en Entities</span></a> pour plus d&#8217;informations.</p>
<p><a class="reference internal" href="../orm/validation.html#application-rules"><span class="std std-ref">Les règles d&#8217;Application</span></a> vous permettent de définir
les règles qui s&#8217;assurent que vos règles d&#8217;application, l&#8217;état et les flux de
travail sont remplis. Les règles sont définies dans la méthode <code class="docutils literal"><span class="pre">buildRules()</span></code>
de votre Table. Les behaviors peuvent ajouter des règles en utilisant la méthode
<code class="docutils literal"><span class="pre">buildRules()</span></code>. Un exemple de méthode <code class="docutils literal"><span class="pre">buildRules()</span></code> pour notre table
articles pourrait être:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans src/Model/Table/ArticlesTable.php</span>
<span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\ORM\RulesChecker</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">buildRules</span><span class="p">(</span><span class="nx">RulesChecker</span> <span class="nv">$rules</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">existsIn</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="s1">&#39;Users&#39;</span><span class="p">));</span>
        <span class="nv">$rules</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span>
            <span class="k">function</span> <span class="p">(</span><span class="nv">$article</span><span class="p">,</span> <span class="nv">$options</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="p">(</span><span class="nv">$article</span><span class="o">-&gt;</span><span class="na">published</span> <span class="o">&amp;&amp;</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$article</span><span class="o">-&gt;</span><span class="na">reviewer</span><span class="p">));</span>
            <span class="p">},</span>
            <span class="s1">&#39;isReviewed&#39;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="s1">&#39;errorField&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;published&#39;</span><span class="p">,</span>
                <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Articles must be reviewed before publishing.&#39;</span>
            <span class="p">]</span>
        <span class="p">);</span>
        <span class="k">return</span> <span class="nv">$rules</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="identifier-quoting-desactive-par-defaut">
<h3>Identifier Quoting Désactivé par Défaut<a class="headerlink" href="#identifier-quoting-desactive-par-defaut" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans le passé, CakePHP a toujours quoté les identifieurs. Parser les bouts de
code SQL et tenter de quoter les identifiers étaient tous les deux des source
d&#8217;erreurs et coûteuses. Si vous suivez les conventions que CakePHP définit,
les coûts du identifier quoting l&#8217;emporte sur tout avantage qu&#8217;il fournisse.
Puisque ce identifier quoting a été désactivé par défaut dans 3.0. Vous devriez
seulement activer le identifier quoting si vous utilisez les noms de colonne ou
les noms de table qui contiennent des caractères spéciaux ou sont des mots
réservés. Si nécessaire, vous pouvez activer identifier quoting lors de la
configuration d&#8217;une connection:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans config/app.php</span>
<span class="s1">&#39;Datasources&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">&#39;default&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake\Database\Driver\Mysql&#39;</span><span class="p">,</span>
        <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;super_secret&#39;</span><span class="p">,</span>
        <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;cakephp&#39;</span><span class="p">,</span>
        <span class="s1">&#39;quoteIdentifiers&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">]</span>
<span class="p">],</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les identifiers dans les objets <code class="docutils literal"><span class="pre">QueryExpression</span></code> ne seront pas quotés, et
vous aurez besoin de les quoter manuellement ou d&#8217;utiliser les objets
IdentifierExpression.</p>
</div>
</div>
</div>
<div class="section" id="mise-a-jour-des-behaviors">
<h2>Mise à jour des behaviors<a class="headerlink" href="#mise-a-jour-des-behaviors" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme la plupart des fonctionnalités liées à l&#8217;ORM, les behaviors ont aussi
changé dans 3.0. Ils attachent maintenant les instances à <code class="docutils literal"><span class="pre">Table</span></code> qui sont
les descendants conceptuels de la classe <code class="docutils literal"><span class="pre">Model</span></code> dans les versions précédentes
de CakePHP. Il y a quelques petites différences clés par rapport aux behaviors
de CakePHP 2.x:</p>
<ul class="simple">
<li>Les Behaviors ne sont plus partagés par plusieurs tables. Cela signifie
que vous n&#8217;avez plus à &#8216;donner un namespace&#8217; aux configurations stockés dans
behavior. Chaque table utilisant un behavior va créer sa propre instance.</li>
<li>Les signatures de méthode pour les méthodes mixin a changé.</li>
<li>Les signatures de méthode pour les méthodes de callback a changé.</li>
<li>La classe de base pour les behaviors a changé.</li>
<li>Les Behaviors peuvent ajouter des méthodes find.</li>
</ul>
<div class="section" id="nouvelle-classe-de-base">
<h3>Nouvelle classe de Base<a class="headerlink" href="#nouvelle-classe-de-base" title="Lien permanent vers ce titre">¶</a></h3>
<p>La classe de base pour les behaviors a changé. Les Behaviors doivent maintenant
étendre <code class="docutils literal"><span class="pre">Cake\ORM\Behavior</span></code>; si un behavior n&#8217;étend pas cette classe, une
exception sera lancée. En plus du changement de classe de base, le constructeur
pour les behaviors a été modifié, et la méthode <code class="docutils literal"><span class="pre">startup()</span></code> a été retirée.
Les Behaviors qui ont besoin d&#8217;accéder à la table à laquelle ils sont attachés,
doivent définir un constructeur:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Behavior</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Behavior</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SluggableBehavior</span> <span class="k">extends</span> <span class="nx">Behavior</span>
<span class="p">{</span>

    <span class="k">protected</span> <span class="nv">$_table</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Table</span> <span class="nv">$table</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$table</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_table</span> <span class="o">=</span> <span class="nv">$table</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="changements-de-signature-des-methodes-mixin">
<h3>Changements de Signature des Méthodes Mixin<a class="headerlink" href="#changements-de-signature-des-methodes-mixin" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les Behaviors continuent d&#8217;offrir la possibilité d&#8217;ajouter les méthodes
&#8216;mixin&#8217; à des objets Table, cependant la signature de méthode pour ces méthodes
a changé. Dans CakePHP 3.0, les méthodes mixin du behavior peuvent attendre les
<strong>mêmes</strong> arguments fournis à la table &#8216;method&#8217;. Par exemple:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Supposons que la table a une méthode slug() fournie par un behavior.</span>
<span class="nv">$table</span><span class="o">-&gt;</span><span class="na">slug</span><span class="p">(</span><span class="nv">$someValue</span><span class="p">);</span>
</pre></div>
</div>
<p>Le behavior qui fournit la méthode <code class="docutils literal"><span class="pre">slug()</span></code> va recevoir seulement 1 argument,
et ses méthodes signature doivent ressembler à ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">slug</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// code ici.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="changements-de-signature-de-methode-de-callback">
<h3>Changements de Signature de Méthode de Callback<a class="headerlink" href="#changements-de-signature-de-methode-de-callback" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les callbacks de Behavior ont été unifiés avec les autres méthodes listener.
Au lieu de leurs arguments précédents, ils attendent un objet event en premier
argument:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeFind</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">,</span> <span class="nx">Query</span> <span class="nv">$query</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// code.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Regardez <a class="reference internal" href="../orm/table-objects.html#table-callbacks"><span class="std std-ref">Callbacks du Cycle de Vie</span></a> pour les signatures de tous les callbacks
auquel un behavior peut souscrire.</p>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="fr">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Préface</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP en un Coup d&#8217;Oeil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Guide de Démarrage Rapide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="3-x-migration-guide.html">3.x Guide de Migration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3-5-migration-guide.html">3.5 Guide de Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-4-migration-guide.html">3.4 Guide de Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-3-migration-guide.html">3.3 Guide de Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-2-migration-guide.html">3.2 Guide de Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-1-migration-guide.html">3.1 Guide de Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="3-0-migration-guide.html">3.0 Guide de Migration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Guide de Migration du Nouvel ORM</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutoriels et exemples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer</a></li>
</ul>
<p class="caption"><span class="caption-text">Pour Commencer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Les Objets Request &amp; Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers (Contrôleurs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views (Vues)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm.html">Accès Base de Données &amp; ORM</a></li>
</ul>
<p class="caption"><span class="caption-text">Généralités</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Console Bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/caching.html">La mise en cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Outils de Console, Shells, &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/debugging.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Déploiement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/errors.html">Gestion des Erreurs &amp; Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/events.html">Événements système</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/internationalization-and-localization.html">Internationalisation &amp; Localisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/logging.html">Journalisation (logging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/form.html">Formulaires Sans Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilitaires</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/app.html">Classe App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/httpclient.html">Client Http</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/registry-objects.html">Objets Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Divers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/global-constants-and-functions.html">Globales &amp; Fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Outil d&#8217;Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Annexes</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Mis à jour le août 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>
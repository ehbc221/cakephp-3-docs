

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ElasticSearch - 3.x</title>
    <link href="_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../en/elasticsearch.html" /><link rel="alternate" hreflang="pt_BR" href="../pt/elasticsearch.html" /><link rel="alternate" hreflang="es" href="../es/elasticsearch.html" /><link rel="alternate" hreflang="ja" href="../ja/elasticsearch.html" /><link rel="alternate" hreflang="zh" href="../zh/elasticsearch.html" /><link rel="alternate" hreflang="tr" href="../tr/elasticsearch.html" /><link rel="alternate" hreflang="ru" href="../ru/elasticsearch.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within documentation CakePHP Cookbook 3.5" href="_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="documentation CakePHP Cookbook 3.5" href="index.html" />
    <link rel="next" title="Outil d’Upgrade" href="upgrade-tool.html" />
    <link rel="prev" title="Migrations" href="migrations.html" />

    <script type="text/javascript">
    window.lang = "fr";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Recherche" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        fr
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li><a href="../en/elasticsearch.html">en</a></li>
                                            
                                                <li><a href="../pt/elasticsearch.html">pt</a></li>
                                            
                                                <li><a href="../es/elasticsearch.html">es</a></li>
                                            
                                                <li><a href="../ja/elasticsearch.html">ja</a></li>
                                            
                                                <li></li>
                                            
                                                <li><a href="../zh/elasticsearch.html">zh</a></li>
                                            
                                                <li><a href="../tr/elasticsearch.html">tr</a></li>
                                            
                                                <li><a href="../ru/elasticsearch.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/fr">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/fr">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/fr/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/fr/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/fr/elasticsearch.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">ElasticSearch</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#vue-d-ensemble">Vue d&#8217;Ensemble</a></li>
<li><a class="reference internal" href="#objets-document">Objets Document</a></li>
<li><a class="reference internal" href="#recherche-des-documents-indexes">Recherche des Documents Indexés</a></li>
<li><a class="reference internal" href="#validation-des-donnees-utilisation-des-regles-d-application">Validation des Données &amp; Utilisation des Règles d&#8217;Application</a></li>
<li><a class="reference internal" href="#sauvegarder-les-nouveaux-documents">Sauvegarder les Nouveaux Documents</a></li>
<li><a class="reference internal" href="#mettre-a-jour-les-documents-existants">Mettre à Jour les Documents Existants</a></li>
<li><a class="reference internal" href="#supprimer-les-documents">Supprimer les Documents</a></li>
<li><a class="reference internal" href="#documents-integres">Documents Intégrés</a></li>
<li><a class="reference internal" href="#recuperer-les-instances-type">Récupérer les Instances Type</a><ul>
<li><a class="reference internal" href="#nettoyer-le-registre">Nettoyer le Registre</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixtures-de-test">Fixtures de Test</a></li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="elasticsearch">
<h1>ElasticSearch<a class="headerlink" href="#elasticsearch" title="Lien permanent vers ce titre">¶</a></h1>
<p>Le plugin ElasticSearch fournit une abstraction de type ORM au-dessus de
<a class="reference external" href="https://www.elastic.co/products/elasticsearch">elasticsearch</a>. Le plugin
fournit des fonctionnalités qui facilitent les tests, l&#8217;indexation des
documents et la recherche de vos index.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour installer le plugin elasticsearch, vous pouvez utiliser <code class="docutils literal"><span class="pre">composer</span></code>.
A partir du répertoire ROOT de votre application (où se trouve le fichier
composer.json), lancez ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">php</span> <span class="nx">composer</span><span class="o">.</span><span class="nx">phar</span> <span class="k">require</span> <span class="nx">cakephp</span><span class="o">/</span><span class="nx">elastic</span><span class="o">-</span><span class="nx">search</span> <span class="s2">&quot;@stable&quot;</span>
</pre></div>
</div>
<p>Vous devrez ajouter la ligne suivante au fichier <strong>config/bootstrap.php</strong> de
votre application:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Plugin</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">&#39;Cake/ElasticSearch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;bootstrap&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]);</span>
</pre></div>
</div>
<p>De plus, vous devrez configurer la connection à la source de donnée &#8216;elastic&#8217;
dans votre fichier <strong>config/app.php</strong>. Un exemple de configuration serait:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans config/app.php</span>
<span class="s1">&#39;Datasources&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="c1">// Autres sources de données</span>
    <span class="s1">&#39;elastic&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake\ElasticSearch\Datasource\Connection&#39;</span><span class="p">,</span>
        <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Cake\ElasticSearch\Datasource\Connection&#39;</span><span class="p">,</span>
        <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="mi">9200</span><span class="p">,</span>
        <span class="s1">&#39;index&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_apps_index&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="vue-d-ensemble">
<h2>Vue d&#8217;Ensemble<a class="headerlink" href="#vue-d-ensemble" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le plugin elasticsearch facilite l&#8217;interaction avec un index elasticsearch
et fournit une interface similaire à celle de l&#8217;<a class="reference internal" href="orm.html"><span class="doc">Accès Base de Données &amp; ORM</span></a>. Pour commencer,
vous devrez créer un objet <code class="docutils literal"><span class="pre">Type</span></code>. Les objets <code class="docutils literal"><span class="pre">Type</span></code> sont le &#8220;Repository&#8221;
ou la classe de type table dans elasticsearch:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans src/Model/Type/ArticlesType.php</span>
<span class="k">namespace</span> <span class="nx">App\Model\Type</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ElasticSearch\Type</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesType</span> <span class="k">extends</span> <span class="nx">Type</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous pouvez utiliser votre classe type dans vos controllers:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">beforeFilter</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">parent</span><span class="o">::</span><span class="na">beforeFilter</span><span class="p">(</span><span class="nv">$event</span><span class="p">);</span>
    <span class="c1">// Charge le Type en utilisant le provider &#39;Elastic&#39;.</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">loadModel</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="s1">&#39;Elastic&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">add</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">newEntity</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">patchEntity</span><span class="p">(</span><span class="nv">$article</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$article</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Flash</span><span class="o">-&gt;</span><span class="na">success</span><span class="p">(</span><span class="s1">&#39;It saved&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">compact</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Nous devrons aussi créer une vue basique pour nos articles indexés:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans src/Template/Articles/add.ctp</span>
<span class="o">&lt;?=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$article</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">control</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">control</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">button</span><span class="p">(</span><span class="s1">&#39;Save&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>Vous devriez maintenant pouvoir soumettre le formulaire et avoir un nouveau
document ajouté à elasticsearch.</p>
</div>
<div class="section" id="objets-document">
<h2>Objets Document<a class="headerlink" href="#objets-document" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme l&#8217;ORM, l&#8217;ODM Elasticsearch utilise les classes de type
<a class="reference internal" href="orm/entities.html"><span class="doc">Entities</span></a>. La classe de base que vous devrez hériter est
<code class="docutils literal"><span class="pre">Cake\ElasticSearch\Document</span></code>. Les classes de Document se trouvent
dans le namespace <code class="docutils literal"><span class="pre">Model\Document</span></code> dans votre application ou votre
plugin:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Document</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ElasticSearch\Document</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Article</span> <span class="k">extends</span> <span class="nx">Document</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En dehors de la logique de constructeur qui fait fonctionner les Documents avec
les données de elasticsearch, l&#8217;interface et les fonctionnalités fournies par
<code class="docutils literal"><span class="pre">Document</span></code> sont les mêmes que celles des <a class="reference internal" href="orm/entities.html"><span class="doc">Entities</span></a></p>
</div>
<div class="section" id="recherche-des-documents-indexes">
<h2>Recherche des Documents Indexés<a class="headerlink" href="#recherche-des-documents-indexes" title="Lien permanent vers ce titre">¶</a></h2>
<p>Après avoir indexé quelques documents, vous voudrez chercher parmi ceux-ci. Le
plugin elasticsearch fournit un constructeur de requête qui vous permet de
construire les requêtes de recherche:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;special&#39;</span><span class="p">,</span>
        <span class="s1">&#39;or&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;tags in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;cake&#39;</span><span class="p">,</span> <span class="s1">&#39;php&#39;</span><span class="p">],</span>
            <span class="s1">&#39;tags not in&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;c#&#39;</span><span class="p">,</span> <span class="s1">&#39;java&#39;</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous pouvez utiliser le <code class="docutils literal"><span class="pre">FilterBuilder</span></code> pour ajouter des conditions de
filtrage:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$builder</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">and</span><span class="p">(</span>
        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">gt</span><span class="p">(</span><span class="s1">&#39;views&#39;</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
        <span class="nv">$builder</span><span class="o">-&gt;</span><span class="na">term</span><span class="p">(</span><span class="s1">&#39;author.name&#39;</span><span class="p">,</span> <span class="s1">&#39;sally&#39;</span><span class="p">)</span>
    <span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La <a class="reference external" href="https://github.com/cakephp/elastic-search/blob/master/src/FilterBuilder.php">source de FilterBuilder</a>
a la liste complète des méthodes avec des exemples pour beaucoup de méthodes
couramment utilisées.</p>
</div>
<div class="section" id="validation-des-donnees-utilisation-des-regles-d-application">
<h2>Validation des Données &amp; Utilisation des Règles d&#8217;Application<a class="headerlink" href="#validation-des-donnees-utilisation-des-regles-d-application" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme pour l&#8217;ORM, le plugin ElasticSearch vous laisse valider les données
lors de la prise en compte des documents. Valider les données requêtées, et
appliquer les règles d&#8217;application fonctionne de la même façon que pour
l&#8217;ORM relationnel. Regardez les sections <a class="reference internal" href="orm/validation.html#validating-request-data"><span class="std std-ref">Valider les Données Avant de Construire les Entities</span></a>
et <a class="reference internal" href="orm/validation.html#application-rules"><span class="std std-ref">Appliquer des Règles pour l&#8217;Application</span></a> pour plus d&#8217;informations.</p>
</div>
<div class="section" id="sauvegarder-les-nouveaux-documents">
<h2>Sauvegarder les Nouveaux Documents<a class="headerlink" href="#sauvegarder-les-nouveaux-documents" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand vous êtes prêt à indexer quelques données dans elasticsearch, vous
devrez d&#8217;abord convertir vos données dans un <code class="docutils literal"><span class="pre">Document</span></code> qui peut être
indexé:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">newEntity</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$article</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Document a été indexé</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lors de la prise en compte d&#8217;un document, vous pouvez spécifier les documents
intégrés que vous souhaitez prendre en compte en utilisant la clé
<code class="docutils literal"><span class="pre">associated</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">newEntity</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;associated&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Comments&#39;</span><span class="p">]]);</span>
</pre></div>
</div>
<p>Sauvegarder un document va récupérer les events suivants:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">Model.beforeSave</span></code> - Lancé avant que le document ne soit sauvegardé. En
stoppant cet event, vous pouvez empêcher l&#8217;opération de sauvegarde de se
produire.</li>
<li><code class="docutils literal"><span class="pre">Model.buildRules</span></code> - Lancé quand les vérificateurs de règles sont
construits pour la première fois.</li>
<li><code class="docutils literal"><span class="pre">Model.afterSave</span></code> - Lancé après que le document est sauvegardé.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il n&#8217;y a pas d&#8217;events pour les documents intégrés, puisque le document
parent et tous ses documents intégrés sont sauvegardés en une opération.</p>
</div>
</div>
<div class="section" id="mettre-a-jour-les-documents-existants">
<h2>Mettre à Jour les Documents Existants<a class="headerlink" href="#mettre-a-jour-les-documents-existants" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand vous devez réindexer les données, vous pouvez patch les entities
existantes et les re-sauvegarder:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;user.name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;jill&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$doc</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$doc</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$newProperties</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$doc</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="supprimer-les-documents">
<h2>Supprimer les Documents<a class="headerlink" href="#supprimer-les-documents" title="Lien permanent vers ce titre">¶</a></h2>
<p>Après la récupération d&#8217;un document, vous pouvez le supprimer:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$doc</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$doc</span><span class="p">);</span>
</pre></div>
</div>
<p>Vous pouvez aussi supprimer les documents qui matchent des conditions
spécifiques:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">deleteAll</span><span class="p">([</span><span class="s1">&#39;user.name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bob&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="documents-integres">
<h2>Documents Intégrés<a class="headerlink" href="#documents-integres" title="Lien permanent vers ce titre">¶</a></h2>
<p>En définissant les documents intégrés, vous pouvez attacher des classes entity
à des chemins de propriété spécifique dans vos documents. Ceci vous permet
de fournir un comportement personnalisé pour les documents dans un document
parent. Par exemple, vous pouvez vouloir les commentaires intégrés à un
article pour avoir des méthodes spécifiques selon l&#8217;application. Vous pouvez
utiliser <code class="docutils literal"><span class="pre">embedOne</span></code> et <code class="docutils literal"><span class="pre">embedMany</span></code> pour définir les documents intégrés:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Dans src/Model/Type/ArticlesType.php</span>
<span class="k">namespace</span> <span class="nx">App\Model\Type</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ElasticSearch\Type</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesType</span> <span class="k">extends</span> <span class="nx">Type</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">embedOne</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">embedMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;entityClass&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;MyComment&#39;</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Ce qui au-dessus va créer deux documents intégrés sur le document <code class="docutils literal"><span class="pre">Article</span></code>.
L&#8217;<code class="docutils literal"><span class="pre">User</span></code> intégré va convertir la propriété <code class="docutils literal"><span class="pre">user</span></code> en instances de
<code class="docutils literal"><span class="pre">App\Model\Document\User</span></code>. Pour récupérer les Commentaires intégrés et
utiliser un nom de classe qui ne correspond pas au nom de la propriété, nous
pouvons utiliser l&#8217;option <code class="docutils literal"><span class="pre">entityClass</span></code> pour configurer un nom de classe
personnalisé.</p>
<p>Une fois que vous avez configuré nos documents intégrés, les résultats de
<code class="docutils literal"><span class="pre">find()</span></code> et <code class="docutils literal"><span class="pre">get()</span></code> vont retourner les objets avec les bonnes classes
de document intégré:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$article</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Articles</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span>
<span class="c1">// Instance de App\Model\Document\User</span>
<span class="nv">$article</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">;</span>

<span class="c1">// Array des instances App\Model\Document\Comment</span>
<span class="nv">$article</span><span class="o">-&gt;</span><span class="na">comments</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="recuperer-les-instances-type">
<h2>Récupérer les Instances Type<a class="headerlink" href="#recuperer-les-instances-type" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme pour l&#8217;ORM, le plugin elasticsearch fournit un factory/registre pour
récupérer les instances <code class="docutils literal"><span class="pre">Type</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\ElasticSearch\TypeRegistry</span><span class="p">;</span>

<span class="nv">$articles</span> <span class="o">=</span> <span class="nx">TypeRegistry</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="nettoyer-le-registre">
<h3>Nettoyer le Registre<a class="headerlink" href="#nettoyer-le-registre" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pendant les cas de test, vous voudrez nettoyer le registre. Faire cela est
souvent utile quand vous utilisez les objets de mock, ou quand vous modifiez
les dépendances d&#8217;un type:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">TypeRegistry</span><span class="o">::</span><span class="na">flush</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fixtures-de-test">
<h2>Fixtures de Test<a class="headerlink" href="#fixtures-de-test" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le plugin elasticsearch fournit seamless test suite integration. Un peu comme
les fixtures de base de données, vous pouvez créer des fixtures de test pour
elasticsearch. Nous pourrions définir une fixture de test pour notre type
Articles avec ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Test\Fixture</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ElasticSearch\TestSuite\TestFixture</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * Articles fixture</span>
<span class="sd"> */</span>
<span class="k">class</span> <span class="nc">ArticlesFixture</span> <span class="k">extends</span> <span class="nx">TestFixture</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * La table/type pour cette fixture.</span>
<span class="sd">     *</span>
<span class="sd">     * @var string</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$table</span> <span class="o">=</span> <span class="s1">&#39;articles&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * The mapping data.</span>
<span class="sd">     *</span>
<span class="sd">     * @var array</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="nv">$schema</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">],</span>
        <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;nested&#39;</span><span class="p">,</span>
            <span class="s1">&#39;properties&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">],</span>
            <span class="p">]</span>
        <span class="p">]</span>
        <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">],</span>
        <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">],</span>
    <span class="p">];</span>

    <span class="k">public</span> <span class="nv">$records</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;billy&#39;</span>
            <span class="p">],</span>
            <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;First Post&#39;</span><span class="p">,</span>
            <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Some content&#39;</span>
        <span class="p">]</span>
    <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La propriété <code class="docutils literal"><span class="pre">schema</span></code> utilise le format de mapping <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/1.5/mapping.html">natif d&#8217;elasticsearch</a>.
Vous pouvez sans problème ne pas mettre le nom du type et la clé de niveau
supérieur <code class="docutils literal"><span class="pre">properties</span></code>. Une fois que vos fixtures sont créées, vous pouvez les
utiliser dans vos cas de test en les incluant dans vos propriétés de test
<code class="docutils literal"><span class="pre">fixtures</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="nv">$fixtures</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;app.articles&#39;</span><span class="p">];</span>
</pre></div>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="fr">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Préface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">CakePHP en un Coup d&#8217;Oeil</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Guide de Démarrage Rapide</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices/3-x-migration-guide.html">3.x Guide de Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials-and-examples.html">Tutoriels et exemples</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contribuer</a></li>
</ul>
<p class="caption"><span class="caption-text">Pour Commencer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/request-response.html">Les Objets Request &amp; Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers (Contrôleurs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Views (Vues)</a></li>
<li class="toctree-l1"><a class="reference internal" href="orm.html">Accès Base de Données &amp; ORM</a></li>
</ul>
<p class="caption"><span class="caption-text">Généralités</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="controllers/components/authentication.html">Authentification</a></li>
<li class="toctree-l1"><a class="reference internal" href="bake.html">Console Bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/caching.html">La mise en cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="console-and-shells.html">Outils de Console, Shells, &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/debugging.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Déploiement</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/errors.html">Gestion des Erreurs &amp; Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/events.html">Événements système</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/internationalization-and-localization.html">Internationalisation &amp; Localisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/logging.html">Journalisation (logging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/form.html">Formulaires Sans Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilitaires</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/app.html">Classe App</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/httpclient.html">Client Http</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/registry-objects.html">Objets Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Divers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core-libraries/global-constants-and-functions.html">Globales &amp; Fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">Migrations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-tool.html">Outil d&#8217;Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Annexes</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Mis à jour le août 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>
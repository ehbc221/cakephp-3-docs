

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Email" lang="fr" name="title" />
<meta content="envoyer mail,email emmetteur sender,envelope sender,classe php,database configuration,sending emails,meth,shells,smtp,transports,attributes,array,config,flexibilité,php email,nouvel email,sending email,models" lang="fr" name="keywords" />

    <title>Email - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="en" href="../../en/core-libraries/email.html" /><link rel="alternate" hreflang="pt_BR" href="../../pt/core-libraries/email.html" /><link rel="alternate" hreflang="es" href="../../es/core-libraries/email.html" /><link rel="alternate" hreflang="ja" href="../../ja/core-libraries/email.html" /><link rel="alternate" hreflang="zh" href="../../zh/core-libraries/email.html" /><link rel="alternate" hreflang="tr" href="../../tr/core-libraries/email.html" /><link rel="alternate" hreflang="ru" href="../../ru/core-libraries/email.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within documentation CakePHP Cookbook 3.5" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="documentation CakePHP Cookbook 3.5" href="../index.html" />
    <link rel="next" title="Gestion des Erreurs &amp; Exceptions" href="../development/errors.html" />
    <link rel="prev" title="Déploiement" href="../deployment.html" />

    <script type="text/javascript">
    window.lang = "fr";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Recherche" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        fr
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li><a href="../../en/core-libraries/email.html">en</a></li>
                                            
                                                <li><a href="../../pt/core-libraries/email.html">pt</a></li>
                                            
                                                <li><a href="../../es/core-libraries/email.html">es</a></li>
                                            
                                                <li><a href="../../ja/core-libraries/email.html">ja</a></li>
                                            
                                                <li></li>
                                            
                                                <li><a href="../../zh/core-libraries/email.html">zh</a></li>
                                            
                                                <li><a href="../../tr/core-libraries/email.html">tr</a></li>
                                            
                                                <li><a href="../../ru/core-libraries/email.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/fr">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/fr">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/fr/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/fr/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/fr/core-libraries/email.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Email</a><ul>
<li><a class="reference internal" href="#utilisation-basique">Utilisation basique</a><ul>
<li><a class="reference internal" href="#choisir-l-emetteur">Choisir l&#8217;émetteur</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#configurer-les-transports">Configurer les Transports</a></li>
<li><a class="reference internal" href="#profiles-de-configurations">Profiles de Configurations</a></li>
<li><a class="reference internal" href="#definir-les-headers">Définir les Headers</a></li>
<li><a class="reference internal" href="#envoyer-les-emails-templates">Envoyer les Emails Templatés</a></li>
</ul>
</li>
<li><a class="reference internal" href="#envoyer-les-pieces-jointes">Envoyer les pièces jointes</a></li>
<li><a class="reference internal" href="#utiliser-les-transports">Utiliser les Transports</a><ul>
<li><a class="reference internal" href="#creer-des-transports-personnalises">Créer des Transports Personnalisés</a></li>
<li><a class="reference internal" href="#faciliter-les-regles-de-validation-des-adresses">Faciliter les Règles de Validation des Adresses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#envoyer-des-messages-rapidement">Envoyer des Messages Rapidement</a></li>
<li><a class="reference internal" href="#envoyer-des-emails-depuis-cli">Envoyer des Emails depuis CLI</a></li>
<li><a class="reference internal" href="#creer-des-emails-reutilisables">Créer des emails réutilisables</a></li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="namespace-Cake\Mailer">
<span id="email"></span><h1>Email<a class="headerlink" href="#namespace-Cake\Mailer" title="Lien permanent vers ce titre">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Avant la version 3.1, les classes <code class="docutils literal"><span class="pre">Email</span></code> et <code class="docutils literal"><span class="pre">Transport</span></code> étaient
sous le namespace <code class="docutils literal"><span class="pre">Cake\Network\Email</span></code> au lieu du namespace
<code class="docutils literal"><span class="pre">Cake\Mailer</span></code>.</p>
</div>
<dl class="class">
<dt id="Cake\Mailer\Email">
<em class="property">class </em><code class="descclassname">Cake\Mailer\</code><code class="descname">Email</code><span class="sig-paren">(</span><em>mixed $profile = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Mailer\Email" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal"><span class="pre">Email</span></code> est une nouvelle classe pour envoyer des emails. Avec cette classe,
vous pouvez envoyer des emails depuis n&#8217;importe endroit de votre application.</p>
<div class="section" id="utilisation-basique">
<h2>Utilisation basique<a class="headerlink" href="#utilisation-basique" title="Lien permanent vers ce titre">¶</a></h2>
<p>Premièrement, vous devez vous assurer que la classe est chargée:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Mailer\Email</span><span class="p">;</span>
</pre></div>
</div>
<p>Après avoir chargé <code class="docutils literal"><span class="pre">Email</span></code>, vous pouvez envoyer un email avec ce qui suit:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">([</span><span class="s1">&#39;me@example.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;My Site&#39;</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">&#39;you@example.com&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;About&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="s1">&#39;My message&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Puisque les méthodes de setter d&#8217;<code class="docutils literal"><span class="pre">Email</span></code> retournent l&#8217;instance de la classe,
vous pouvez définir ses propriétés avec le chaînage des méthodes.</p>
<p><code class="docutils literal"><span class="pre">Email</span></code> comporte plusieurs méthodes pour définir les destinataires - <code class="docutils literal"><span class="pre">to()</span></code>,
<code class="docutils literal"><span class="pre">cc()</span></code>, <code class="docutils literal"><span class="pre">bcc()</span></code>, <code class="docutils literal"><span class="pre">addTo()</span></code>, <code class="docutils literal"><span class="pre">addCc()</span></code> et <code class="docutils literal"><span class="pre">addBcc()</span></code>. La principale
différence est que les trois premières méthodes vont réinitialiser ce qui était
déjà défini et les suivantes vont ajouter plus de destinataires dans leur champs
respectifs:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">&#39;to@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;To Example&#39;</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">addTo</span><span class="p">(</span><span class="s1">&#39;to2@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;To2 Example&#39;</span><span class="p">);</span>
<span class="c1">// Les destinaitres de l&#39;email sont: to@example.com et to2@example.com</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;ToTest Example&#39;</span><span class="p">);</span>
<span class="c1">// Le destinataire de l&#39;email est: test@example.com</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setFrom()</span></code>, <code class="docutils literal"><span class="pre">setTo()</span></code>, <code class="docutils literal"><span class="pre">setCc()</span></code> , <code class="docutils literal"><span class="pre">setBcc()</span></code>  et
<code class="docutils literal"><span class="pre">setSubject()</span></code> à la place.</p>
</div>
<div class="section" id="choisir-l-emetteur">
<h3>Choisir l&#8217;émetteur<a class="headerlink" href="#choisir-l-emetteur" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand on envoie des emails de la part d&#8217;autre personne, c&#8217;est souvent une
bonne idée de définir l&#8217;émetteur original en utilisant le header Sender.
Vous pouvez faire ceci en utilisant <code class="docutils literal"><span class="pre">sender()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">sender</span><span class="p">(</span><span class="s1">&#39;app@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;MyApp emailer&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">C&#8217;est aussi une bonne idée de définir l&#8217;envelope de l&#8217;émetteur quand on
envoie un mail de la part d&#8217;une autre personne. Cela les empêche d&#8217;obtenir
tout message sur la délivrance.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez plutôt <code class="docutils literal"><span class="pre">setSender()</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="configuration">
<span id="email-configuration"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Lien permanent vers ce titre">¶</a></h2>
<p>La Configuration par défaut pour <code class="docutils literal"><span class="pre">Email</span></code> est créée en utilisant <code class="docutils literal"><span class="pre">config()</span></code> et
<code class="docutils literal"><span class="pre">configTransport()</span></code>. Vous devrez mettre vos préconfigurations d&#8217;email dans
le fichier <strong>config/app.php</strong>. Le fichier <strong>config/app.default.php</strong> est
un exemple de ce fichier. Il n&#8217;est pas nécessaire de définir de configuration
d&#8217;email dans <strong>config/app.php</strong>. <code class="docutils literal"><span class="pre">Email</span></code> peut être utilisé sans cela
et utilise les méthodes séparément pour définir toutes les configurations
ou charger un tableau de configs.</p>
<p>En définissant des profiles et des transports, vous pouvez garder le code de
votre application sans données de configuration, et éviter de dupliquer, ce qui
rend la maintenance et le déploiement moins compliqués.</p>
<p>Pour charger une configuration prédéfinie, vous pouvez utiliser la méthode
<code class="docutils literal"><span class="pre">profile()</span></code> ou la passer au constructeur d&#8217;<code class="docutils literal"><span class="pre">Email</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">profile</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">);</span>

<span class="c1">//ou dans le constructeur::</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Plutôt que de passer une chaîne avec le bon nom de configuration prédéfini,
vous pouvez aussi juste charger un tableau d&#8217;options:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">profile</span><span class="p">([</span><span class="s1">&#39;from&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;me@example.org&#39;</span><span class="p">,</span> <span class="s1">&#39;transport&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_custom&#39;</span><span class="p">]);</span>

<span class="c1">//or dans le constructeur::</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">([</span><span class="s1">&#39;from&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;me@example.org&#39;</span><span class="p">,</span> <span class="s1">&#39;transport&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my_custom&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Modifié dans la version 3.1: </span>Le profil d&#8217;email <code class="docutils literal"><span class="pre">default</span></code> est automatiquement défini quand une instance
<code class="docutils literal"><span class="pre">Email</span></code> est créée.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setProfile()</span></code> à la place de <code class="docutils literal"><span class="pre">profile()</span></code>.</p>
</div>
<div class="section" id="configurer-les-transports">
<h3>Configurer les Transports<a class="headerlink" href="#configurer-les-transports" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="staticmethod">
<dt id="Cake\Mailer\Email::configTransport">
<em class="property">static </em><code class="descclassname">Cake\Mailer\Email::</code><code class="descname">configTransport</code><span class="sig-paren">(</span><em>$key</em>, <em>$config = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Mailer\Email::configTransport" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Les messages d&#8217;Email sont délivrés par les transports. Différents transports
vous permettent d&#8217;envoyer les messages par la fonction <code class="docutils literal"><span class="pre">mail()</span></code> de PHP,
les serveurs SMTP, ou aucun d&#8217;eux ce qui peut être utile pour débugger. La
configuration des transports vous permet de garder les données de configuration
en dehors du code de votre application et rend le déploiement plus simple
puisque vous pouvez simplement changer les données de configuration. Un
exemple de configuration des transports ressemblerai à ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Mailer\Email</span><span class="p">;</span>

<span class="c1">// Exemple de configuration de Mail</span>
<span class="nx">Email</span><span class="o">::</span><span class="na">configTransport</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Mail&#39;</span>
<span class="p">]);</span>

<span class="c1">// Exemple de configuration SMTP.</span>
<span class="nx">Email</span><span class="o">::</span><span class="na">configTransport</span><span class="p">(</span><span class="s1">&#39;gmail&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ssl://smtp.gmail.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="mi">465</span><span class="p">,</span>
    <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my@gmail.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
    <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Smtp&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Vous pouvez configurer les serveurs SSL SMTP, comme Gmail. pour faire ceci,
mettez le prefix <code class="docutils literal"><span class="pre">ssl://</span></code> dans l&#8217;hôte et configurez le port avec la bonne
valeur. Vous pouvez aussi activer TLS SMTP en utilisant l&#8217;option <code class="docutils literal"><span class="pre">tls</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Cake\Mailer\Email</span><span class="p">;</span>

<span class="nx">Email</span><span class="o">::</span><span class="na">configTransport</span><span class="p">(</span><span class="s1">&#39;gmail&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;smtp.gmail.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
    <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my@gmail.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
    <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Smtp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tls&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>La configuration ci-dessus va activer la communication TLS pour tous les
messages d&#8217;email.</p>
<div class="admonition warning">
<p class="first admonition-title">Avertissement</p>
<p class="last">Vous devrez avoir l&#8217;accès aux applications moins sécurisées activé dans votre
compte Google pour que cela fonctionne:
<a class="reference external" href="https://support.google.com/accounts/answer/6010255">Autoriser les applications moins sécurisées à accéder à votre
compte</a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pour utiliser SSL + SMTP, vous devrez avoir SSL configuré dans votre
installation PHP.</p>
</div>
<p>Les options de configuration peuvent également être fournies en tant que chaine
<a class="reference internal" href="../appendices/glossary.html#term-dsn"><span class="xref std std-term">DSN</span></a>. C&#8217;est utile lorsque vous travaillez avec des variables
d&#8217;environnement ou des fournisseurs <a class="reference internal" href="../appendices/glossary.html#term-paas"><span class="xref std std-term">PaaS</span></a>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Email</span><span class="o">::</span><span class="na">configTransport</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;smtp://my@gmail.com:secret@smtp.gmail.com:465?tls=true&#39;</span><span class="p">,</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Lorsque vous utilisez une chaine DSN, vous pouvez définir des paramètres/options
supplémentaires en tant qu&#8217;arguments de query string.</p>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setConfigTransport()</span></code> à la place de <code class="docutils literal"><span class="pre">configTransport()</span></code>.</p>
</div>
<dl class="staticmethod">
<dt id="Cake\Mailer\Email::dropTransport">
<em class="property">static </em><code class="descclassname">Cake\Mailer\Email::</code><code class="descname">dropTransport</code><span class="sig-paren">(</span><em>$key</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Mailer\Email::dropTransport" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Une fois configuré, les transports ne peuvent pas être modifiés. Afin de
modifier un transport, vous devez d&#8217;abord le supprimer et le reconfigurer.</p>
</div>
<div class="section" id="profiles-de-configurations">
<span id="email-configurations"></span><h3>Profiles de Configurations<a class="headerlink" href="#profiles-de-configurations" title="Lien permanent vers ce titre">¶</a></h3>
<p>Définir des profiles de délivrance vous permet d&#8217;ajouter les configurations
habituelles d&#8217;email dans des profiles réutilisables. Votre application peut
avoir autant de profiles que nécessaire. Les clés de configuration suivantes
sont utilisées:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'from'</span></code>: Email ou un tableau d&#8217;emmeteur. Regardez <code class="docutils literal"><span class="pre">Email::from()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'sender'</span></code>: Email ou un tableau d&#8217;émetteur réel. Regardez
<code class="docutils literal"><span class="pre">Email::sender()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'to'</span></code>: Email ou un tableau de destination. Regardez <code class="docutils literal"><span class="pre">Email::to()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'cc'</span></code>: Email ou un tableau de copy carbon. Regardez <code class="docutils literal"><span class="pre">Email::cc()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'bcc'</span></code>: Email ou un tableau de copy carbon blind. Regardez
<code class="docutils literal"><span class="pre">Email::bcc()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'replyTo'</span></code>: Email ou un tableau de répondre à cet e-mail. Regardez
<code class="docutils literal"><span class="pre">Email::replyTo()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'readReceipt'</span></code>: Adresse Email ou un tableau d&#8217;adresses pour recevoir un
récepissé de lecture. Regardez <code class="docutils literal"><span class="pre">Email::readReceipt()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'returnPath'</span></code>: Adresse Email ou un tableau des adresses à retourner si
vous avez une erreur. Regardez <code class="docutils literal"><span class="pre">Email::returnPath()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'messageId'</span></code>: ID du Message de l&#8217;e-mail. Regardez
<code class="docutils literal"><span class="pre">Email::messageId()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'subject'</span></code>: Sujet du message. Regardez <code class="docutils literal"><span class="pre">Email::subject()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'message'</span></code>: Contenu du message. Ne définissez pas ce champ si vous
utilisez un contenu rendu.</li>
<li><code class="docutils literal"><span class="pre">'priority'</span></code>: Priorité de l&#8217;email, exprimée avec un nombre (généralement de
1 à 5, 1 étant la priorité la plus haute).</li>
<li><code class="docutils literal"><span class="pre">'headers'</span></code>: Headers à inclure. Regardez <code class="docutils literal"><span class="pre">Email::headers()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'viewRender'</span></code>: Si vous utilisez un contenu rendu, définissez le nom de
classe de la vue. Regardez <code class="docutils literal"><span class="pre">Email::viewRenderer()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'template'</span></code>: Si vous utilisez un contenu rendu, définissez le nom du
template. Regardez <code class="docutils literal"><span class="pre">Email::template()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'theme'</span></code>: Theme utilisé pour le rendu du template. Voir
<code class="docutils literal"><span class="pre">Email::theme()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'layout'</span></code>: Si vous utilisez un contenu rendu, définissez le layout à
rendre. Si vous voulez rendre un template sans layout, définissez ce champ
à null. Regardez <code class="docutils literal"><span class="pre">Email::template()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'viewVars'</span></code>: Si vous utilisez un contenu rendu, définissez le tableau avec
les variables devant être rendus dans la vue. Regardez
<code class="docutils literal"><span class="pre">Email::viewVars()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'attachments'</span></code>: Liste des fichiers à attacher. Regardez
<code class="docutils literal"><span class="pre">Email::attachments()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'emailFormat'</span></code>: Format de l&#8217;email (html, text ou both). Regardez
<code class="docutils literal"><span class="pre">Email::emailFormat()</span></code>.</li>
<li><code class="docutils literal"><span class="pre">'transport'</span></code>: Nom du Transport. Regardez
<a class="reference internal" href="#Cake\Mailer\Email::configTransport" title="Cake\Mailer\Email::configTransport"><code class="xref php php-meth docutils literal"><span class="pre">Mailer\Email::configTransport()</span></code></a>.</li>
<li><code class="docutils literal"><span class="pre">'log'</span></code>: Niveau de Log pour connecter les headers de l&#8217;email headers et le
message. <code class="docutils literal"><span class="pre">true</span></code> va utiliser LOG_DEBUG. Regardez aussi <a class="reference internal" href="logging.html#logging-levels"><span class="std std-ref">Utiliser les Niveaux</span></a>.</li>
<li><code class="docutils literal"><span class="pre">'helpers'</span></code>: Tableau de helpers utilisés dans le template email. <code class="docutils literal"><span class="pre">Email::helpers()</span></code>.</li>
</ul>
<p>Toutes ces configurations sont optionnelles, excepté <code class="docutils literal"><span class="pre">'from'</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les valeurs des clés ci-dessus utilisant Email ou un tableau, comme from,
to, cc etc... seront passées en premier paramètre des méthodes
correspondantes. L&#8217;equivalent pour
<code class="docutils literal"><span class="pre">Email::from('my&#64;example.com',</span> <span class="pre">'My</span> <span class="pre">Site')</span></code> sera défini comme
<code class="docutils literal"><span class="pre">'from'</span> <span class="pre">=&gt;</span> <span class="pre">['my&#64;example.com'</span> <span class="pre">=&gt;</span> <span class="pre">'My</span> <span class="pre">Site']</span></code> dans votre config.</p>
</div>
</div>
<div class="section" id="definir-les-headers">
<h3>Définir les Headers<a class="headerlink" href="#definir-les-headers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans <code class="docutils literal"><span class="pre">Email</span></code>, vous êtes libre de définir les headers que vous souhaitez.
Si vous migrez pour utiliser Email, n&#8217;oubliez pas de mettre le préfixe
<code class="docutils literal"><span class="pre">X-</span></code> dans vos headers.</p>
<p>Regardez <code class="docutils literal"><span class="pre">Email::headers()</span></code> et <code class="docutils literal"><span class="pre">Email::addHeaders()</span></code></p>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setHeaders()</span></code> à la place de <code class="docutils literal"><span class="pre">headers()</span></code>.</p>
</div>
</div>
<div class="section" id="envoyer-les-emails-templates">
<h3>Envoyer les Emails Templatés<a class="headerlink" href="#envoyer-les-emails-templates" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les Emails sont souvent bien plus que de simples message textes. Afin de
faciliter cela, CakePHP fournit une façon d&#8217;envoyer les emails en utilisant la
<a class="reference internal" href="../views.html"><span class="doc">view layer</span></a> de CakePHP.</p>
<p>Les templates pour les emails se placent dans un dossier spécial appelé
<code class="docutils literal"><span class="pre">Email</span></code> dans le répertoire <code class="docutils literal"><span class="pre">Template</span></code> de votre application. Les templates
des emails peuvent aussi utiliser les layouts et éléments tout comme les
templates normales:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span>
    <span class="o">-&gt;</span><span class="na">template</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="s1">&#39;fancy&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">emailFormat</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">&#39;bob@example.com&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;app@domain.com&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
<p>Ce qui est au-dessus utilise <strong>src/Template/Email/html/welcome.ctp</strong> pour la
vue, et <strong>src/Template/Layout/Email/html/fancy.ctp</strong> pour le layout. Vous pouvez
aussi envoyer des messages email templaté multipart:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span>
    <span class="o">-&gt;</span><span class="na">template</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="s1">&#39;fancy&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">emailFormat</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="s1">&#39;bob@example.com&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;app@domain.com&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
<p>Ceci utiliserait les fichiers de template suivants:</p>
<ul class="simple">
<li><strong>src/Template/Email/text/welcome.ctp</strong></li>
<li><strong>src/Template/Layout/Email/text/fancy.ctp</strong></li>
<li><strong>src/Template/Email/html/welcome.ctp</strong></li>
<li><strong>src/Template/Layout/Email/html/fancy.ctp</strong></li>
</ul>
<p>Quand on envoie les emails templatés, vous avez la possibilité d&#8217;envoyer soit
<code class="docutils literal"><span class="pre">text</span></code>, <code class="docutils literal"><span class="pre">html</span></code> soit <code class="docutils literal"><span class="pre">both</span></code>.</p>
<p>Vous pouvez définir des variables de vue avec <code class="docutils literal"><span class="pre">Email::viewVars()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">(</span><span class="s1">&#39;templated&#39;</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">viewVars</span><span class="p">([</span><span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="mi">12345</span><span class="p">]);</span>
</pre></div>
</div>
<p>Dans votre email template, vous pouvez utiliser ceux-ci avec:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Ici</span> <span class="nx">est</span> <span class="nx">votre</span> <span class="nx">valeur</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">b</span><span class="o">&gt;&lt;?=</span> <span class="nv">$value</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/b&gt;&lt;/p&gt;</span>
</pre></div>
</div>
<p>Vous pouvez aussi utiliser les helpers dans les emails, un peu comme vous
pouvez dans des fichiers de template normaux. Par défaut, seul
<code class="xref php php-class docutils literal"><span class="pre">HtmlHelper</span></code> est chargé. Vous pouvez chargez des helpers
supplémentaires en utilisant la méthode <code class="docutils literal"><span class="pre">helpers()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span><span class="o">-&gt;</span><span class="na">helpers</span><span class="p">([</span><span class="s1">&#39;Html&#39;</span><span class="p">,</span> <span class="s1">&#39;Custom&#39;</span><span class="p">,</span> <span class="s1">&#39;Text&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Quand vous définissez les helpers, assurez vous d&#8217;inclure &#8216;Html&#8217; ou il sera
retiré des helpers chargés dans votre template d&#8217;email.</p>
<p>Si vous voulez envoyer un email en utilisant templates dans un plugin, vous
pouvez utiliser la <a class="reference internal" href="../appendices/glossary.html#term-syntaxe-de-plugin"><span class="xref std std-term">syntaxe de plugin</span></a> familière pour le faire:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">template</span><span class="p">(</span><span class="s1">&#39;Blog.new_comment&#39;</span><span class="p">,</span> <span class="s1">&#39;Blog.auto_message&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Ce qui est au-dessus utiliserait les templates à partir d&#8217;un plugin de Blog par
exemple.</p>
<p>Dans certains cas, vous devez remplacer le template par défaut fourni par
les plugins. Vous pouvez faire ceci en utilisant les themes en disant à Email
d&#8217;utiliser le bon theme en utilisant la méthode <code class="docutils literal"><span class="pre">Email::theme()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">template</span><span class="p">(</span><span class="s1">&#39;Blog.new_comment&#39;</span><span class="p">,</span> <span class="s1">&#39;Blog.auto_message&#39;</span><span class="p">);</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">theme</span><span class="p">(</span><span class="s1">&#39;TestTheme&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Ceci vous permet de remplacer le template <cite>new_comment</cite> dans votre theme sans
modifier le plugin Blog. Le fichier de template devra être créé dans le
chemin suivant:
<strong>src/Template/Plugin/TestTheme/Plugin/Blog/Email/text/new_comment.ctp</strong>.</p>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setTemplate()</span></code> à la place de <code class="docutils literal"><span class="pre">template()</span></code>. Utilisez
<code class="docutils literal"><span class="pre">setLayout()</span></code> à la place de l&#8217;argument layout de <code class="docutils literal"><span class="pre">template().</span>
<span class="pre">Utilisez</span> <span class="pre">``setTheme()</span></code> à la place de <code class="docutils literal"><span class="pre">theme()</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="envoyer-les-pieces-jointes">
<h2>Envoyer les pièces jointes<a class="headerlink" href="#envoyer-les-pieces-jointes" title="Lien permanent vers ce titre">¶</a></h2>
<dl class="method">
<dt id="Cake\Mailer\Email::attachments">
<code class="descclassname">Cake\Mailer\Email::</code><code class="descname">attachments</code><span class="sig-paren">(</span><em>$attachments = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Mailer\Email::attachments" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Vous pouvez aussi attacher des fichiers aux messages d&#8217;email. Il y a quelques
formats différents qui dépendent de quel type de fichier vous avez, et comment
vous voulez que les noms de fichier apparaissent dans le mail de réception du
client:</p>
<ol class="arabic">
<li><p class="first">Chaîne de caractères: <code class="docutils literal"><span class="pre">$email-&gt;attachments('/full/file/path/file.png')</span></code> va
attacher ce fichier avec le nom file.png.</p>
</li>
<li><p class="first">Tableau: <code class="docutils literal"><span class="pre">$email-&gt;attachments(['/full/file/path/file.png'])</span></code> aura le
même comportement qu&#8217;en utilisant une chaîne de caractères.</p>
</li>
<li><p class="first">Tableau avec clé:
<code class="docutils literal"><span class="pre">$email-&gt;attachments(['photo.png'</span> <span class="pre">=&gt;</span> <span class="pre">'/full/some_hash.png'])</span></code> va
attacher some_hash.png avec le nom photo.png. Le récipiendaire va voir
photo.png, pas some_hash.png.</p>
</li>
<li><p class="first">Tableaux imbriqués:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span><span class="o">-&gt;</span><span class="na">attachments</span><span class="p">([</span>
    <span class="s1">&#39;photo.png&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;file&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/full/some_hash.png&#39;</span><span class="p">,</span>
        <span class="s1">&#39;mimetype&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;image/png&#39;</span><span class="p">,</span>
        <span class="s1">&#39;contentId&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;my-unique-id&#39;</span>
    <span class="p">]</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Ce qui est au-dessus va attacher le fichier avec différent mimetype et avec
un content ID personnalisé (Quand vous définissez le content ID, la pièce
jointe est transformée en inline). Le mimetype et contentId sont optionnels
dans ce formulaire.</p>
<p>4.1. Quand vous utilisez <code class="docutils literal"><span class="pre">contentId</span></code>, vous pouvez utiliser le fichier dans
corps HTML comme <code class="docutils literal"><span class="pre">&lt;img</span> <span class="pre">src=&quot;cid:my-content-id&quot;&gt;</span></code>.</p>
<p>4.2. Vous pouvez utiliser l&#8217;option <code class="docutils literal"><span class="pre">contentDisposition</span></code> pour désactiver le
header <code class="docutils literal"><span class="pre">Content-Disposition</span></code> pour une pièce jointe. C&#8217;est utile pour
l&#8217;envoi d&#8217;invitations ical à des clients utilisant outlook.</p>
<p>4.3 Au lieu de l&#8217;option <code class="docutils literal"><span class="pre">file</span></code>, vous pouvez fournir les contenus de
fichier en chaîne en utilisant l&#8217;option <code class="docutils literal"><span class="pre">data</span></code>. Cela vous permet
d&#8217;attacher les fichiers sans avoir besoin de chemins de fichier vers eux.</p>
</li>
</ol>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setAttachments()</span></code> à la place de <code class="docutils literal"><span class="pre">attachments()</span></code>.</p>
</div>
</div>
<div class="section" id="utiliser-les-transports">
<h2>Utiliser les Transports<a class="headerlink" href="#utiliser-les-transports" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les Transports sont des classes destinées à envoyer l&#8217;email selon certain
protocoles ou méthodes. CakePHP supporte les transports Mail (par défaut),
Debug et SMTP.</p>
<p>Pour configurer votre méthode, vous devez utiliser la méthode
<code class="xref php php-meth docutils literal"><span class="pre">Cake\Mailer\Email::transport()</span></code> ou avoir le transport dans
votre configuration:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">();</span>

<span class="c1">// Use a named transport already configured using Email::setConfigTransport()</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">transport</span><span class="p">(</span><span class="s1">&#39;gmail&#39;</span><span class="p">);</span>

<span class="c1">// Use a constructed object.</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DebugTransport</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">transport</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setTransport()</span></code> à la place de <code class="docutils literal"><span class="pre">transport()</span></code></p>
</div>
<div class="section" id="creer-des-transports-personnalises">
<h3>Créer des Transports Personnalisés<a class="headerlink" href="#creer-des-transports-personnalises" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous pouvez créer vos transports personnalisés pour intégrer avec d&#8217;autres
systèmes email (comme SwiftMailer). Pour créer votre transport, créez tout
d&#8217;abord le fichier <strong>src/Mailer/Transport/ExampleTransport.php</strong> (où
Exemple est le nom de votre transport). Pour commencer, votre fichier devrait
ressembler à cela:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Mailer\Transport</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\Mailer\AbstractTransport</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Cake\Mailer\Email</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExampleTransport</span> <span class="k">extends</span> <span class="nx">AbstractTransport</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">send</span><span class="p">(</span><span class="nx">Email</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Logique d&#39;exécution</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vous devez intégrer la méthode <code class="docutils literal"><span class="pre">send(Email</span> <span class="pre">$email)</span></code> avec votre
logique personnalisée. En option, vous pouvez intégrer la méthode
<code class="docutils literal"><span class="pre">config($config)</span></code>. <code class="docutils literal"><span class="pre">config()</span></code> est appelée avant send() et vous permet
d&#8217;accepter les configurations de l&#8217;utilisateur. Par défaut, cette méthode
met la configuration dans l&#8217;attribut protégé <code class="docutils literal"><span class="pre">$_config</span></code>.</p>
<p>Si vous avez besoin d&#8217;appeler des méthodes supplémentaires sur le transport
avant l&#8217;envoi, vous pouvez utiliser
<code class="xref php php-meth docutils literal"><span class="pre">Cake\Mailer\Email::transportClass()</span></code> pour obtenir une
instance du transport. Exemple:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$yourInstance</span> <span class="o">=</span> <span class="nv">$email</span><span class="o">-&gt;</span><span class="na">transport</span><span class="p">(</span><span class="s1">&#39;your&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">transportClass</span><span class="p">();</span>
<span class="nv">$yourInstance</span><span class="o">-&gt;</span><span class="na">myCustomMethod</span><span class="p">();</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="faciliter-les-regles-de-validation-des-adresses">
<h3>Faciliter les Règles de Validation des Adresses<a class="headerlink" href="#faciliter-les-regles-de-validation-des-adresses" title="Lien permanent vers ce titre">¶</a></h3>
<dl class="method">
<dt id="Cake\Mailer\Email::emailPattern">
<code class="descclassname">Cake\Mailer\Email::</code><code class="descname">emailPattern</code><span class="sig-paren">(</span><em>$pattern = null</em><span class="sig-paren">)</span><a class="headerlink" href="#Cake\Mailer\Email::emailPattern" title="Lien permanent vers cette définition">¶</a></dt>
<dd></dd></dl>

<p>Si vous avez des problèmes de validation lors de l&#8217;envoi vers des adresses
non conformes, vous pouvez faciliter le patron utilisé pour valider les
adresses email. C&#8217;est parfois nécessaire quand il s&#8217;agit de certains
ISP Japonais:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Email</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">);</span>

<span class="c1">// Relax le patron d&#39;email, ainsi vous pouvez envoyer</span>
<span class="c1">// vers des adresses non conformes</span>
<span class="nv">$email</span><span class="o">-&gt;</span><span class="na">emailPattern</span><span class="p">(</span><span class="nv">$newPattern</span><span class="p">);</span>
</pre></div>
</div>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setEmailPattern()</span></code> à la place de <code class="docutils literal"><span class="pre">emailPattern()</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="envoyer-des-messages-rapidement">
<h2>Envoyer des Messages Rapidement<a class="headerlink" href="#envoyer-des-messages-rapidement" title="Lien permanent vers ce titre">¶</a></h2>
<p>Parfois vous avez besoin d&#8217;une façon rapide d&#8217;envoyer un email, et vous n&#8217;avez
pas particulièrement envie en même temps de définir un tas de configuration.
<code class="xref php php-meth docutils literal"><span class="pre">Cake\Mailer\Email::deliver()</span></code> est présent pour ce cas.</p>
<p>Vous pouvez créer votre configuration dans
<code class="xref php php-meth docutils literal"><span class="pre">Cake\Mailer\Email::config()</span></code>, ou utiliser un
tableau avec toutes les options dont vous aurez besoin et utiliser
la méthode statique <code class="docutils literal"><span class="pre">Email::deliver()</span></code>.
Exemple:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Email</span><span class="o">::</span><span class="na">deliver</span><span class="p">(</span><span class="s1">&#39;you@example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;Subject&#39;</span><span class="p">,</span> <span class="s1">&#39;Message&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;from&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;me@example.com&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Cette méthode va envoyer un email à <a class="reference external" href="mailto:you&#37;&#52;&#48;example&#46;com">you<span>&#64;</span>example<span>&#46;</span>com</a>, à partir de <a class="reference external" href="mailto:me&#37;&#52;&#48;example&#46;com">me<span>&#64;</span>example<span>&#46;</span>com</a>
avec le sujet Subject et le contenu Message.</p>
<p>Le retour de <code class="docutils literal"><span class="pre">deliver()</span></code> est une instance de <a class="reference internal" href="#Cake\Mailer\Email" title="Cake\Mailer\Email"><code class="xref php php-class docutils literal"><span class="pre">Cake\Mailer\Email</span></code></a>
avec l&#8217;ensemble des configurations. Si vous ne voulez pas envoyer l&#8217;email
maintenant, et souhaitez configurer quelques trucs avant d&#8217;envoyer, vous pouvez
passer le 5ème paramètre à <code class="docutils literal"><span class="pre">false</span></code>.</p>
<p>Le 3ème paramètre est le contenu du message ou un tableau avec les variables
(quand on utilise le contenu rendu).</p>
<p>Le 4ème paramètre peut être un tableau avec les configurations ou une chaîne de
caractères avec le nom de configuration dans <code class="docutils literal"><span class="pre">Configure</span></code>.</p>
<p>Si vous voulez, vous pouvez passer les to, subject et message à null et faire
toutes les configurations dans le 4ème paramètre (en tableau ou en utilisant
<code class="docutils literal"><span class="pre">Configure</span></code>).
Vérifiez la liste des <a class="reference internal" href="#email-configurations"><span class="std std-ref">configurations</span></a> pour voir
toutes les configs acceptées.</p>
</div>
<div class="section" id="envoyer-des-emails-depuis-cli">
<h2>Envoyer des Emails depuis CLI<a class="headerlink" href="#envoyer-des-emails-depuis-cli" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand vous envoyez des emails à travers un script CLI (Shells, Tasks, ...),
vous devez définir manuellement le nom de domaine que Email doit utiliser.
Il sera utilisé comme nom d&#8217;hôte pour l&#8217;id du message (puisque il n&#8217;y a pas
de nom d&#8217;hôte dans un environnement CLI):</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$email</span><span class="o">-&gt;</span><span class="na">domain</span><span class="p">(</span><span class="s1">&#39;www.example.org&#39;</span><span class="p">);</span>
<span class="c1">// Resulte en ids de message comme ``&lt;UUID@www.example.org&gt;`` (valid)</span>
<span class="c1">// au lieu de `&lt;UUID@&gt;`` (invalid)</span>
</pre></div>
</div>
<p>Un id de message valide peut permettre à ce message de ne pas finir dans un
dossier de spam.</p>
<div class="deprecated">
<p><span class="versionmodified">Obsolète depuis la version 3.4.0: </span>Utilisez <code class="docutils literal"><span class="pre">setDomain()</span></code> à la place de <code class="docutils literal"><span class="pre">domain()</span></code>.</p>
</div>
</div>
<div class="section" id="creer-des-emails-reutilisables">
<h2>Créer des emails réutilisables<a class="headerlink" href="#creer-des-emails-reutilisables" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">Nouveau dans la version 3.1.0.</span></p>
</div>
<p>Les <code class="docutils literal"><span class="pre">Mailers</span></code> vous permettent de créer des emails réutilisables pour votre
application. Ils peuvent aussi servir à contenir plusieurs configurations
d&#8217;emails en un seul et même endroit. Cela vous permet de garder votre code
DRY ainsi que la configuration d&#8217;emails en dehors des autres parties
constituant votre application.</p>
<p>Dans cet exemple, vous allez créer un <code class="docutils literal"><span class="pre">Mailer</span></code> qui contient des emails liés
aux utilisateurs. Pour créer votre <code class="docutils literal"><span class="pre">UserMailer</span></code>, créez un fichier
<strong>src/Mailer/UserMailer.php</strong>. Le contenu de ce fichier devra ressembler à ceci:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Mailer</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\Mailer\Mailer</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserMailer</span> <span class="k">extends</span> <span class="nx">Mailer</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">welcome</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span>
            <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s1">&#39;Welcome %s&#39;</span><span class="p">,</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">))</span>
            <span class="o">-&gt;</span><span class="na">template</span><span class="p">(</span><span class="s1">&#39;welcome_mail&#39;</span><span class="p">,</span> <span class="s1">&#39;custom&#39;</span><span class="p">);</span> <span class="c1">// Par défaut le template avec le même nom que le nom de la méthode est utilisé.</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">resetPassword</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span>
            <span class="o">-&gt;</span><span class="na">to</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">subject</span><span class="p">(</span><span class="s1">&#39;Reset password&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">set</span><span class="p">([</span><span class="s1">&#39;token&#39;</span> <span class="o">=&gt;</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">token</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Dans notre exemple, nous avons créé deux méthodes, une pour envoyer l&#8217;email de
bienvenue et l&#8217;autre pour envoyer un email de réinitialisation de mot de passe.
Chacune de ces méthodes prend une <code class="docutils literal"><span class="pre">Entity</span></code> <code class="docutils literal"><span class="pre">User</span></code> et utilise ses propriétés
pour configurer chacun des emails.</p>
<p>Vous pouvez maintenant utiliser votre <code class="docutils literal"><span class="pre">UserMailer</span></code> pour envoyer tous les
emails liés aux utilisateurs depuis n&#8217;importe où dans l&#8217;application. Par
exemple, si vous souhaitez envoyer l&#8217;email de bienvenue, vous pouvez faire la
chose suivante:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\Mailer\MailerAwareTrait</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UsersController</span> <span class="k">extends</span> <span class="nx">AppController</span>
<span class="p">{</span>
    <span class="k">use</span> <span class="nx">MailerAwareTrait</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">register</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Users</span><span class="o">-&gt;</span><span class="na">newEntity</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;post&#39;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$user</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Users</span><span class="o">-&gt;</span><span class="na">patchEntity</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">())</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Users</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getMailer</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nv">$user</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$user</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Si vous voulez complétement séparer l&#8217;envoi de l&#8217;email de bienvenue du code de
l&#8217;application, vous pouvez utiliser votre <code class="docutils literal"><span class="pre">UserMailer</span></code> via l&#8217;évènement
<code class="docutils literal"><span class="pre">Model.afterSave</span></code>. En utilisant un évènement, vous pouvez complètement
séparer la logique d&#8217;envoi d&#8217;emails du reste de votre logique &#8220;utilisateurs&#8221;.
Vous pourriez par exemple ajouter ce qui suit à votre <code class="docutils literal"><span class="pre">UserMailer</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">implementedEvents</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="s1">&#39;Model.afterSave&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;onRegistration&#39;</span>
    <span class="p">];</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="nf">onRegistration</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">,</span> <span class="nx">EntityInterface</span> <span class="nv">$entity</span><span class="p">,</span> <span class="nx">ArrayObject</span> <span class="nv">$options</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">isNew</span><span class="p">())</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nv">$entity</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>L&#8217;objet mailer serait ainsi enregistré en tant qu&#8217;écouteur (listeners)
d&#8217;événement et la méthode <code class="docutils literal"><span class="pre">onRegistration()</span></code> serait appellée à chaque fois
que l&#8217;événement <code class="docutils literal"><span class="pre">Model.afterSave</span></code> serait déclenché. Plus d&#8217;information sur
comment enregistrer des objets écouteurs d&#8217;événements sont disponibles dans la
documentation <a class="reference internal" href="events.html#registering-event-listeners"><span class="std std-ref">Enregistrer les Listeners</span></a>.</p>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="fr">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Préface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP en un Coup d&#8217;Oeil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Guide de Démarrage Rapide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/3-x-migration-guide.html">3.x Guide de Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutoriels et exemples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer</a></li>
</ul>
<p class="caption"><span class="caption-text">Pour Commencer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Les Objets Request &amp; Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers (Contrôleurs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views (Vues)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orm.html">Accès Base de Données &amp; ORM</a></li>
</ul>
<p class="caption"><span class="caption-text">Généralités</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Console Bake</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">La mise en cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Outils de Console, Shells, &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/debugging.html">Debugger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Déploiement</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/errors.html">Gestion des Erreurs &amp; Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Événements système</a></li>
<li class="toctree-l1"><a class="reference internal" href="internationalization-and-localization.html">Internationalisation &amp; Localisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Journalisation (logging)</a></li>
<li class="toctree-l1"><a class="reference internal" href="form.html">Formulaires Sans Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Sécurité</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utilitaires</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app.html">Classe App</a></li>
<li class="toctree-l1"><a class="reference internal" href="collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="httpclient.html">Client Http</a></li>
<li class="toctree-l1"><a class="reference internal" href="inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="registry-objects.html">Objets Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Divers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global-constants-and-functions.html">Globales &amp; Fonctions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Outil d&#8217;Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Annexes</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Mis à jour le août 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tree - 3.x</title>
    <link href="../../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../../_static/app.js"></script>

    <link rel="alternate" hreflang="pt_BR" href="../../../pt/orm/behaviors/tree.html" /><link rel="alternate" hreflang="es" href="../../../es/orm/behaviors/tree.html" /><link rel="alternate" hreflang="ja" href="../../../ja/orm/behaviors/tree.html" /><link rel="alternate" hreflang="fr" href="../../../fr/orm/behaviors/tree.html" /><link rel="alternate" hreflang="zh" href="../../../zh/orm/behaviors/tree.html" /><link rel="alternate" hreflang="tr" href="../../../tr/orm/behaviors/tree.html" /><link rel="alternate" hreflang="ru" href="../../../ru/orm/behaviors/tree.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 3.5 documentation" href="../../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 3.5 documentation" href="../../index.html" />
    <link rel="up" title="Behaviors" href="../behaviors.html" />
    <link rel="next" title="Schema System" href="../schema-system.html" />
    <link rel="prev" title="Translate" href="translate.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Search" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        en
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li></li>
                                            
                                                <li><a href="../../../pt/orm/behaviors/tree.html">pt</a></li>
                                            
                                                <li><a href="../../../es/orm/behaviors/tree.html">es</a></li>
                                            
                                                <li><a href="../../../ja/orm/behaviors/tree.html">ja</a></li>
                                            
                                                <li><a href="../../../fr/orm/behaviors/tree.html">fr</a></li>
                                            
                                                <li><a href="../../../zh/orm/behaviors/tree.html">zh</a></li>
                                            
                                                <li><a href="../../../tr/orm/behaviors/tree.html">tr</a></li>
                                            
                                                <li><a href="../../../ru/orm/behaviors/tree.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/en">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/en">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/en/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/en/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/en/orm/behaviors/tree.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Tree</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#a-quick-tour">A Quick Tour</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#node-level-depth">Node Level (Depth)</a></li>
<li><a class="reference internal" href="#scoping-and-multi-trees">Scoping and Multi Trees</a></li>
<li><a class="reference internal" href="#recovering-with-custom-sort-field">Recovering with custom sort field</a></li>
<li><a class="reference internal" href="#saving-hierarchical-data">Saving Hierarchical Data</a></li>
<li><a class="reference internal" href="#deleting-nodes">Deleting Nodes</a></li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="namespace-Cake\ORM\Behavior">
<span id="tree"></span><h1>Tree<a class="headerlink" href="#namespace-Cake\ORM\Behavior" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Cake\ORM\Behavior\TreeBehavior">
<em class="property">class </em><code class="descclassname">Cake\ORM\Behavior\</code><code class="descname">TreeBehavior</code><a class="headerlink" href="#Cake\ORM\Behavior\TreeBehavior" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>It&#8217;s fairly common to want to store hierarchical data in a database
table. Examples of such data might be categories with unlimited
subcategories, data related to a multilevel menu system or a
literal representation of hierarchy such as departments in a company.</p>
<p>Relational databases are usually not well suited for storing and retrieving this
type of data, but there are a few known techniques that can make them effective
for working with multi-level information.</p>
<p>The TreeBehavior helps you maintain a hierarchical data structure in the
database that can be queried without much overhead and helps reconstruct the
tree data for finding and displaying processes.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>This behavior requires the following columns in your table:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">parent_id</span></code> (nullable) The column holding the ID of the parent row</li>
<li><code class="docutils literal"><span class="pre">lft</span></code> (integer, signed) Used to maintain the tree structure</li>
<li><code class="docutils literal"><span class="pre">rght</span></code> (integer, signed) Used to maintain the tree structure</li>
</ul>
<p>You can configure the name of those fields should you need to customize them.
More information on the meaning of the fields and how they are used can be found
in this article describing the <a class="reference external" href="http://www.sitepoint.com/hierarchical-data-database-2/">MPTT logic</a></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The TreeBehavior does not support composite primary keys at this point in
time.</p>
</div>
</div>
<div class="section" id="a-quick-tour">
<h2>A Quick Tour<a class="headerlink" href="#a-quick-tour" title="Permalink to this headline">¶</a></h2>
<p>You enable the Tree behavior by adding it to the Table you want to store
hierarchical data in:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CategoriesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addBehavior</span><span class="p">(</span><span class="s1">&#39;Tree&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Once added, you can let CakePHP build the internal structure if the table is
already holding some rows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$categories</span> <span class="o">=</span> <span class="nx">TableRegistry</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;Categories&#39;</span><span class="p">);</span>
<span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">recover</span><span class="p">();</span>
</pre></div>
</div>
<p>You can verify it works by getting any row from the table and asking for the
count of descendants it has:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$node</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">childCount</span><span class="p">(</span><span class="nv">$node</span><span class="p">);</span>
</pre></div>
</div>
<p>Getting a flat list of the descendants for a node is equally easy:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$descendants</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$descendants</span> <span class="k">as</span> <span class="nv">$category</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you need to pass conditions you do so as per normal:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$descendants</span> <span class="o">=</span> <span class="nv">$categories</span>
    <span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;name LIKE&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%Foo%&#39;</span><span class="p">]);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$descendants</span> <span class="k">as</span> <span class="nv">$category</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$category</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you instead need a threaded list, where children for each node are nested
in a hierarchy, you can stack the &#8216;threaded&#8217; finder:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$children</span> <span class="o">=</span> <span class="nv">$categories</span>
    <span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;threaded&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">toArray</span><span class="p">();</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$children</span> <span class="k">as</span> <span class="nv">$child</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">{</span><span class="nv">$child</span><span class="o">-&gt;</span><span class="na">name</span><span class="si">}</span><span class="s2"> has &quot;</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$child</span><span class="o">-&gt;</span><span class="na">children</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot; direct children&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Traversing threaded results usually requires recursive functions in, but if you
only require a result set containing a single field from each level so you can
display a list, in an HTML select for example, it is better to use the
&#8216;treeList&#8217; finder:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$list</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;treeList&#39;</span><span class="p">);</span>

<span class="c1">// In a CakePHP template file:</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Form</span><span class="o">-&gt;</span><span class="na">control</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;options&#39;</span> <span class="o">=&gt;</span> <span class="nv">$list</span><span class="p">]);</span>

<span class="c1">// Or you can output it in plain text, for example in a CLI script</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$list</span> <span class="k">as</span> <span class="nv">$categoryName</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$categoryName</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The output will be similar to:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">My</span> <span class="nx">Categories</span>
<span class="nx">_Fun</span>
<span class="nx">__Sport</span>
<span class="nx">___Surfing</span>
<span class="nx">___Skating</span>
<span class="nx">_Trips</span>
<span class="nx">__National</span>
<span class="nx">__International</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">treeList</span></code> finder takes a number of options:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">keyPath</span></code>: A dot separated path to fetch the field to use for the array key,
or a closure to return the key out of the provided row.</li>
<li><code class="docutils literal"><span class="pre">valuePath</span></code>: A dot separated path to fetch the field to use for the array
value, or a closure to return the value out of the provided row.</li>
<li><code class="docutils literal"><span class="pre">spacer</span></code>: A string to be used as prefix for denoting the depth in the tree
for each item</li>
</ul>
<p>An example of all options in use is:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;treeList&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;keyPath&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span>
    <span class="s1">&#39;valuePath&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;spacer&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39; &#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>One very common task is to find the tree path from a particular node to the root
of the tree. This is useful, for example, for adding the breadcrumbs list for
a menu structure:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$nodeId</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nv">$crumbs</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="nv">$nodeId</span><span class="p">]);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$crumbs</span> <span class="k">as</span> <span class="nv">$crumb</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$crumb</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="s1">&#39; &gt; &#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Trees constructed with the TreeBehavior cannot be sorted by any column other
than <code class="docutils literal"><span class="pre">lft</span></code>, this is because the internal representation of the tree depends on
this sorting. Luckily, you can reorder the nodes inside the same level without
having to change their parent:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$node</span> <span class="o">=</span> <span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>

<span class="c1">// Move the node so it shows up one position up when listing children.</span>
<span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">moveUp</span><span class="p">(</span><span class="nv">$node</span><span class="p">);</span>

<span class="c1">// Move the node to the top of the list inside the same level.</span>
<span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">moveUp</span><span class="p">(</span><span class="nv">$node</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// Move the node to the bottom.</span>
<span class="nv">$categories</span><span class="o">-&gt;</span><span class="na">moveDown</span><span class="p">(</span><span class="nv">$node</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>If the default column names that are used by this behavior don&#8217;t match your own
schema, you can provide aliases for them:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addBehavior</span><span class="p">(</span><span class="s1">&#39;Tree&#39;</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">&#39;parent&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ancestor_id&#39;</span><span class="p">,</span> <span class="c1">// Use this instead of parent_id</span>
        <span class="s1">&#39;left&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;tree_left&#39;</span><span class="p">,</span> <span class="c1">// Use this instead of lft</span>
        <span class="s1">&#39;right&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;tree_right&#39;</span> <span class="c1">// Use this instead of rght</span>
    <span class="p">]);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="node-level-depth">
<h2>Node Level (Depth)<a class="headerlink" href="#node-level-depth" title="Permalink to this headline">¶</a></h2>
<p>Knowing the depth of tree nodes can be useful when you want to retrieve nodes
only upto a certain level for e.g. when generating menus. You can use the
<code class="docutils literal"><span class="pre">level</span></code> option to specify the field that will save level of each node:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addBehavior</span><span class="p">(</span><span class="s1">&#39;Tree&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;level&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="c1">// Defaults to null, i.e. no level saving</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>If you don&#8217;t want to cache the level using a db field you can use
<code class="docutils literal"><span class="pre">TreeBehavior::getLevel()</span></code> method to get level of a node.</p>
</div>
<div class="section" id="scoping-and-multi-trees">
<h2>Scoping and Multi Trees<a class="headerlink" href="#scoping-and-multi-trees" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you want to persist more than one tree structure inside the same
table, you can achieve that by using the &#8216;scope&#8217; configuration. For example, in
a locations table you may want to create one tree per country:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">LocationsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addBehavior</span><span class="p">(</span><span class="s1">&#39;Tree&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;scope&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;country_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">]</span>
        <span class="p">]);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>In the previous example, all tree operations will be scoped to only the rows
having the column <code class="docutils literal"><span class="pre">country_name</span></code> set to &#8216;Brazil&#8217;. You can change the scoping
on the fly by using the &#8216;config&#8217; function:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">behaviors</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">Tree</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;scope&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;country_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;France&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>Optionally, you can have a finer grain control of the scope by passing a closure
as the scope:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">behaviors</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">Tree</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">(</span><span class="s1">&#39;scope&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$query</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$country</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getConfigureContry</span><span class="p">();</span> <span class="c1">// A made-up function</span>
    <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">([</span><span class="s1">&#39;country_name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$country</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="recovering-with-custom-sort-field">
<h2>Recovering with custom sort field<a class="headerlink" href="#recovering-with-custom-sort-field" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.14.</span></p>
</div>
<p>By default, recover() sorts the items using the primary key. This works great
if this is a numeric (auto increment) column, but can lead to weird results if you
use UUIDs.</p>
<p>If you need custom sorting for the recovery, you can set a
custom order clause in your config:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addBehavior</span><span class="p">(</span><span class="s1">&#39;Tree&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;recoverOrder&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;country_name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;DESC&#39;</span><span class="p">],</span>
<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="saving-hierarchical-data">
<h2>Saving Hierarchical Data<a class="headerlink" href="#saving-hierarchical-data" title="Permalink to this headline">¶</a></h2>
<p>When using the Tree behavior, you usually don&#8217;t need to worry about the
internal representation of the hierarchical structure. The positions where nodes
are placed in the tree are deduced from the &#8216;parent_id&#8217; column in each of your
entities:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$aCategory</span> <span class="o">=</span> <span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nv">$aCategory</span><span class="o">-&gt;</span><span class="na">parent_id</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$aCategory</span><span class="p">);</span>
</pre></div>
</div>
<p>Providing inexistent parent ids when saving or attempting to create a loop in
the tree (making a node child of itself) will throw an exception.</p>
<p>You can make a node a root in the tree by setting the &#8216;parent_id&#8217; column to
null:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$aCategory</span> <span class="o">=</span> <span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nv">$aCategory</span><span class="o">-&gt;</span><span class="na">parent_id</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$aCategory</span><span class="p">);</span>
</pre></div>
</div>
<p>Children for the new root node will be preserved.</p>
</div>
<div class="section" id="deleting-nodes">
<h2>Deleting Nodes<a class="headerlink" href="#deleting-nodes" title="Permalink to this headline">¶</a></h2>
<p>Deleting a node and all its sub-tree (any children it may have at any depth in
the tree) is trivial:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$aCategory</span> <span class="o">=</span> <span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$aCategory</span><span class="p">);</span>
</pre></div>
</div>
<p>The TreeBehavior will take care of all internal deleting operations for you. It
is also possible to only delete one node and re-assign all children to the
immediately superior parent node in the tree:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$aCategory</span> <span class="o">=</span> <span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">removeFromTree</span><span class="p">(</span><span class="nv">$aCategory</span><span class="p">);</span>
<span class="nv">$categoriesTable</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$aCategory</span><span class="p">);</span>
</pre></div>
</div>
<p>All children nodes will be kept and a new parent will be assigned to them.</p>
<p>The deletion of a node is based off of the lft and rght values of the entity. This
is important to note when looping through the various children of a node for
conditional deletes:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$descendants</span> <span class="o">=</span> <span class="nv">$teams</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;for&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">]);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$descendants</span> <span class="k">as</span> <span class="nv">$descendant</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$team</span> <span class="o">=</span> <span class="nv">$teams</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$descendant</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">);</span> <span class="c1">// search for the up-to-date entity object</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$team</span><span class="o">-&gt;</span><span class="na">expired</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$teams</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span><span class="nv">$team</span><span class="p">);</span> <span class="c1">// deletion reorders the lft and rght of database entries</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The TreeBehavior reorders the lft and rght values of records in the table when a node
is deleted. As such, the lft and rght values of the entities inside <code class="docutils literal"><span class="pre">$descendants</span></code>
(saved before the delete operation) will be inaccurate. Entities will have to be loaded
and modified on the fly to prevent inconsistencies in the table.</p>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="en">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Preface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">CakePHP at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/3-x-migration-guide.html">3.x Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers/request-response.html">Request &amp; Response Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../views.html">Views</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../orm.html">Database Access &amp; ORM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../database-basics.html">Database Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query-builder.html">Query Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../table-objects.html">Table Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../entities.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../retrieving-data-and-resultsets.html">Retrieving Data &amp; Results Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../validation.html">Validating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../saving-data.html">Saving Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deleting-data.html">Deleting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../associations.html">Associations - Linking Tables Together</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../behaviors.html">Behaviors</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="counter-cache.html">CounterCache</a></li>
<li class="toctree-l3"><a class="reference internal" href="timestamp.html">Timestamp</a></li>
<li class="toctree-l3"><a class="reference internal" href="translate.html">Translate</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tree</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../schema-system.html">Schema System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../console-and-shells/orm-cache.html">ORM Cache Shell</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using CakePHP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controllers/components/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bake.html">Bake Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/caching.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../console-and-shells.html">Console Tools, Shells &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/errors.html">Error &amp; Exception Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/events.html">Events System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/internationalization-and-localization.html">Internationalization &amp; Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/form.html">Modelless Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utility Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/app.html">App Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/httpclient.html">Http Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/registry-objects.html">Registry Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrade-tool.html">Upgrade Tool</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-libraries/global-constants-and-functions.html">Constants &amp; Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices.html">Appendices</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Last updated on Aug 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Associations - Linking Tables Together - 3.x</title>
    <link href="../_static/favicon.png" type="image/png" rel="icon" />

    
    <link rel="stylesheet" href="../_static/css/app.css" type="text/css" />
    
    <script type="text/javascript" src="../_static/app.js"></script>

    <link rel="alternate" hreflang="pt_BR" href="../../pt/orm/associations.html" /><link rel="alternate" hreflang="es" href="../../es/orm/associations.html" /><link rel="alternate" hreflang="ja" href="../../ja/orm/associations.html" /><link rel="alternate" hreflang="fr" href="../../fr/orm/associations.html" /><link rel="alternate" hreflang="zh" href="../../zh/orm/associations.html" /><link rel="alternate" hreflang="tr" href="../../tr/orm/associations.html" /><link rel="alternate" hreflang="ru" href="../../ru/orm/associations.html" />

    <link rel="search" type="application/opensearchdescription+xml" title="Search within CakePHP Cookbook 3.5 documentation" href="../_static/opensearchdescription-book-3-x.xml">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="top" title="CakePHP Cookbook 3.5 documentation" href="../index.html" />
    <link rel="up" title="Database Access &amp; ORM" href="../orm.html" />
    <link rel="next" title="Behaviors" href="behaviors.html" />
    <link rel="prev" title="Deleting Data" href="deleting-data.html" />

    <script type="text/javascript">
    window.lang = "en";
    </script>
  </head>
  <body>

<div id="container">
    
    <header class="nav-down">
        <div class="container-fluid hidden-xs hidden-sm">
            <div class="row">
                <div class="col-sm-3 col-md-3">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-9 col-md-9">
                    <nav class="navbar-right">
                        <ul class="menu">
                            <li class="first">
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Documentation</a>
                                <ul class="submenu">
                                    
<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                                </ul>
                            </li>

                            <li><a href="https://cakephp.org/business-solutions">Business Solutions</a></li>
                            <li><a href="https://cakephp.org/writers">Get Paid To Write</a></li>
                            <li><a href="https://cakephp.org/pages/team">Team</a></li>

                            <li>
                                <a href="#"><i class="fa fa-menu fa-chevron-down"></i>Community</a>
                                <div class="megamenu full">
                                    <div class="row">
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-6 pl30">
                                            <ul class="megamenu-list">
                                                
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="container-fluid hidden-md hidden-lg">
            <div class="row">
                <div class="col-sm-6 col-xs-6">
                    <a class="logo-cake" href="https://cakephp.org">
                        <img src="../_static/logo-cake.png" alt="CakePHP" />
                    </a>
                </div>

                <div class="col-sm-6 col-xs-6">
                    <div class="navbar-right">
                        <button id="btn-menu" class="btn-menu" data-toggle="modal" data-target="#modal">
                            <i class="fa fa-bars toggle-modal"></i>
                        </button>
                    </div>
                    <div id="wrap">
                        <form class="search" action="../search.html" method="get">
                            <input name="q" type="search" placeholder="What are you looking for?">
                            <input id="search_submit" value="Search" type="submit">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <section id="nav-cook" class="hidden-xs hidden-sm">
            <div class="container-fluid ">
                <div class="row ">
                    <div class="col-md-12 back-book">
                        <div class="col-md-5 text-center t-cook-nav p0 hidden-sm hidden-xs">
                            <h2>
                                <a href="../contents.html">
                                    <span class="glyph_range icon-submenu icon-submenu-cook">B</span>
                                    CakePHP 3.5 Red Velvet <strong>Cookbook</strong>
                                </a>
                            </h2>
                        </div>

                        <div class="col-md-4 hidden-sm">
                            <form class="search" action="../search.html" method="get">
                                <input type="hidden" name="check_keywords" value="yes" />
                                <input type="hidden" name="area" value="default" />

                                <div class="col-md-10 p0">
                                    <input class="form-control form-cook" autocomplete="off" type="search" name="q" size="18" placeholder='Cookbook Search' />
                                </div>
                                <div class="col-md-2 p0 search-cook">
                                    <button type="submit">
                                        <span class="glyph_range icon-submenu icon-submenu-cook">A</span>
                                    </button>
                                </div>
                            </form>
                        </div>

                        
                        <div class="col-md-3">
                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Language:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown"
                                                    role="button" aria-haspopup="true" aria-expanded="false" href="#">
                                                        en
                                                        <i class="fa fa-menu-en fa-chevron-down"></i>
                                                    </a>
                                            <ul class="dropdown-menu">
                                            
                                                <li></li>
                                            
                                                <li><a href="../../pt/orm/associations.html">pt</a></li>
                                            
                                                <li><a href="../../es/orm/associations.html">es</a></li>
                                            
                                                <li><a href="../../ja/orm/associations.html">ja</a></li>
                                            
                                                <li><a href="../../fr/orm/associations.html">fr</a></li>
                                            
                                                <li><a href="../../zh/orm/associations.html">zh</a></li>
                                            
                                                <li><a href="../../tr/orm/associations.html">tr</a></li>
                                            
                                                <li><a href="../../ru/orm/associations.html">ru</a></li>
                                            
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="col-md-6 p0">
                                <div class="col-md-7 t-language p0">
                                    <h6>Version:</h6>
                                </div>
                                <div class="col-md-5 p0">
                                    <ul class="nav navbar-nav">
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-hover="dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">3.x <i class="fa fa-menu-en fa-chevron-down"></i></a>
                                            <ul class="dropdown-menu">
                                                <li><a href="https://book.cakephp.org/3.0/en">3.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/2.0/en">2.x Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.3/en/">1.3 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.2/en/">1.2 Book</a></li>
                                                <li><a href="https://book.cakephp.org/1.1/en">1.1 Book</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            
        </section>
    </header>

    
    <section class="nav-btn visible-sm visible-xs">
        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-nav" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Nav</strong></button>
                </div>

                <div class="col-sm-6 col-xs-6 text-center">
                    <button id="btn-toc" class="btn btn-b btn-nav" data-toggle="modal" data-target="#modal"><strong>Table of Contents</strong></button>
                </div>
            </div>
        </div>
    </section>

    
    <div id="modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-header">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title-cookbook" id="modal-header"></h4>
                </div>
                <div class="modal-body"></div>
            </div>
        </div>
    </div>

<div class="container page-container "><div id="improve-slideout">
        <i class="fa fa-pencil icon-improve"></i>
        <a href="https://github.com/cakephp/docs/edit/3.0/en/orm/associations.rst" target="_blank">
            <div id="improve-slideout-inner"><h6>Improve This Doc <i class="fa fa-github git-improve"></i></h6></div>
        </a>
    </div><a id="back-to-contents" href="#page-contents"><i class="fa fa-arrow-circle-up icon-improve" title="Back to Contents"></i></a>

    
    <div class="row">
        <div class="col-sm-12 col-md-9 col-md-push-3"><div class="page-contents col-sm-5">
                <h3>Page Contents</h3>
                <ul>
<li><a class="reference internal" href="#">Associations - Linking Tables Together</a><ul>
<li><a class="reference internal" href="#hasone-associations">HasOne Associations</a></li>
<li><a class="reference internal" href="#belongsto-associations">BelongsTo Associations</a></li>
<li><a class="reference internal" href="#hasmany-associations">HasMany Associations</a></li>
<li><a class="reference internal" href="#belongstomany-associations">BelongsToMany Associations</a><ul>
<li><a class="reference internal" href="#using-the-through-option">Using the &#8216;through&#8217; Option</a></li>
<li><a class="reference internal" href="#default-association-conditions">Default Association Conditions</a></li>
<li><a class="reference internal" href="#loading-associations">Loading Associations</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div><div class="document-body">
            
  <div class="section" id="associations-linking-tables-together">
<h1>Associations - Linking Tables Together<a class="headerlink" href="#associations-linking-tables-together" title="Permalink to this headline">¶</a></h1>
<p>Defining relations between different objects in your application should be
a natural process. For example, an article may have many comments, and belong
to an author. Authors may have many articles and comments. CakePHP makes
managing these associations easy. The four association types in CakePHP are:
hasOne, hasMany, belongsTo, and belongsToMany.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="29%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relationship</th>
<th class="head">Association Type</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>one to one</td>
<td>hasOne</td>
<td>A user has one profile.</td>
</tr>
<tr class="row-odd"><td>one to many</td>
<td>hasMany</td>
<td>A user can have multiple articles.</td>
</tr>
<tr class="row-even"><td>many to one</td>
<td>belongsTo</td>
<td>Many articles belong to a user.</td>
</tr>
<tr class="row-odd"><td>many to many</td>
<td>belongsToMany</td>
<td>Tags belong to many articles.</td>
</tr>
</tbody>
</table>
<p>Associations are defined during the <code class="docutils literal"><span class="pre">initialize()</span></code> method of your table
object. Methods matching the association type allow you to define the
associations in your application. For example if we wanted to define a belongsTo
association in our ArticlesTable:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="nx">App\Model\Table</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Cake\ORM\Table</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The simplest form of any association setup takes the table alias you want to
associate with. By default all of the details of an association will use the
CakePHP conventions. If you want to customize how your associations are handled
you can modify them with setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Publishing.Authors&#39;</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;authorid&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setProperty</span><span class="p">(</span><span class="s1">&#39;person&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also use arrays to customize your associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Authors&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Publishing.Authors&#39;</span><span class="p">,</span>
    <span class="s1">&#39;foreignKey&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;authorid&#39;</span><span class="p">,</span>
    <span class="s1">&#39;propertyName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;person&#39;</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Arrays however do not offer the typehinting and autocomplete benefit the fluent interface does.</p>
<p>The same table can be used multiple times to define different types of
associations. For example consider a case where you want to separate
approved comments and those that have not been moderated yet:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;approved&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;UnapprovedComments&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Comments&#39;</span>
            <span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;approved&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setProperty</span><span class="p">(</span><span class="s1">&#39;unapproved_comments&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see, by specifying the <code class="docutils literal"><span class="pre">className</span></code> key, it is possible to use the
same table as different associations for the same table. You can even create
self-associated tables to create parent-child relationships:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">CategoriesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;SubCategories&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Categories&#39;</span>
        <span class="p">]);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;ParentCategories&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Categories&#39;</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also setup associations in mass by making a single call to
<code class="docutils literal"><span class="pre">Table::addAssociations()</span></code> which accepts an array containing a set of
table names indexed by association type as an argument:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PostsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addAssociations</span><span class="p">([</span>
           <span class="s1">&#39;belongsTo&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
               <span class="s1">&#39;Users&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;className&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;App\Model\Table\UsersTable&#39;</span><span class="p">]</span>
           <span class="p">],</span>
           <span class="s1">&#39;hasMany&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Comments&#39;</span><span class="p">],</span>
           <span class="s1">&#39;belongsToMany&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;Tags&#39;</span><span class="p">]</span>
       <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Each association type accepts multiple associations where the keys are the
aliases, and the values are association config data. If numeric keys are used
the values will be treated as association aliases.</p>
<div class="section" id="hasone-associations">
<span id="has-one-associations"></span><h2>HasOne Associations<a class="headerlink" href="#hasone-associations" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s set up a Users Table with a hasOne relationship to an Addresses Table.</p>
<p>First, your database tables need to be keyed correctly. For a hasOne
relationship to work, one table has to contain a foreign key that points to a
record in the other. In this case the addresses table will contain a field
called <code class="docutils literal"><span class="pre">user_id</span></code>. The basic pattern is:</p>
<p><strong>hasOne:</strong> the <em>other</em> model contains the foreign key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Users hasOne Addresses</td>
<td>addresses.user_id</td>
</tr>
<tr class="row-odd"><td>Doctors hasOne Mentors</td>
<td>mentors.doctor_id</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not mandatory to follow CakePHP conventions, you can override the use
of any foreignKey in your associations definitions. Nevertheless sticking
to conventions will make your code less repetitive, easier to read and to
maintain.</p>
</div>
<p>If we had the <code class="docutils literal"><span class="pre">UsersTable</span></code> and <code class="docutils literal"><span class="pre">AddressesTable</span></code> classes made we could make
the association with the following code:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UsersTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you need more control, you can define your associations using the setters.
For example, you might want to limit the association to include only certain
records:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">UsersTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasOne</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">&#39;Addresses&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setConditions</span><span class="p">([</span><span class="s1">&#39;Addresses.primary&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1&#39;</span><span class="p">])</span>
            <span class="o">-&gt;</span><span class="na">setDependent</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Possible keys for hasOne association arrays include:</p>
<ul class="simple">
<li><strong>className</strong>: the class name of the table being associated to the current
model. If you&#8217;re defining a &#8216;User hasOne Address&#8217; relationship, the className
key should equal &#8216;Addresses&#8217;.</li>
<li><strong>foreignKey</strong>: the name of the foreign key found in the other table. This is
especially handy if you need to define multiple hasOne relationships. The
default value for this key is the underscored, singular name of the current
model, suffixed with &#8216;_id&#8217;. In the example above it would default to
&#8216;user_id&#8217;.</li>
<li><strong>bindingKey</strong>: The name of the column in the current table, that will be used
for matching the <code class="docutils literal"><span class="pre">foreignKey</span></code>. If not specified, the primary key (for
example the id column of the <code class="docutils literal"><span class="pre">Users</span></code> table) will be used.</li>
<li><strong>conditions</strong>: an array of find() compatible conditions such as
<code class="docutils literal"><span class="pre">['Addresses.primary'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code></li>
<li><strong>joinType</strong>: the type of the join to use in the SQL query, default
is LEFT. You can use INNER if your hasOne association is always present.</li>
<li><strong>dependent</strong>: When the dependent key is set to <code class="docutils literal"><span class="pre">true</span></code>, and an entity is
deleted, the associated model records are also deleted. In this case we set it
to <code class="docutils literal"><span class="pre">true</span></code> so that deleting a User will also delete her associated Address.</li>
<li><strong>cascadeCallbacks</strong>: When this and <strong>dependent</strong> are <code class="docutils literal"><span class="pre">true</span></code>, cascaded
deletes will load and delete entities so that callbacks are properly
triggered. When <code class="docutils literal"><span class="pre">false</span></code>, <code class="docutils literal"><span class="pre">deleteAll()</span></code> is used to remove associated data
and no callbacks are triggered.</li>
<li><strong>propertyName</strong>: The property name that should be filled with data from the
associated table into the source table results. By default this is the
underscored &amp; singular name of the association so <code class="docutils literal"><span class="pre">address</span></code> in our example.</li>
<li><strong>strategy</strong>: Defines the query strategy to use. Defaults to &#8216;join&#8217;. The other
valid value is &#8216;select&#8217;, which utilizes a separate query instead.</li>
<li><strong>finder</strong>: The finder method to use when loading associated records.</li>
</ul>
<p>Once this association has been defined, find operations on the Users table can
contain the Address record if it exists:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In a controller or table method.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$users</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Addresses&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">address</span><span class="o">-&gt;</span><span class="na">street</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above would emit SQL that is similar to:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">users</span> <span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">addresses</span> <span class="nx">ON</span> <span class="nx">addresses</span><span class="o">.</span><span class="nx">user_id</span> <span class="o">=</span> <span class="nx">users</span><span class="o">.</span><span class="nx">id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="belongsto-associations">
<span id="belongs-to-associations"></span><h2>BelongsTo Associations<a class="headerlink" href="#belongsto-associations" title="Permalink to this headline">¶</a></h2>
<p>Now that we have Address data access from the User table, let&#8217;s define
a belongsTo association in the Addresses table in order to get access to related
User data. The belongsTo association is a natural complement to the hasOne and
hasMany associations - it allows us to see related data from the other
direction.</p>
<p>When keying your database tables for a belongsTo relationship, follow this
convention:</p>
<p><strong>belongsTo:</strong> the <em>current</em> model contains the foreign key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Addresses belongsTo Users</td>
<td>addresses.user_id</td>
</tr>
<tr class="row-odd"><td>Mentors belongsTo Doctors</td>
<td>mentors.doctor_id</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If a Table contains a foreign key, it belongs to the other Table.</p>
</div>
<p>We can define the belongsTo association in our Addresses table as follows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AddressesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Users&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can also define a more specific relationship using the setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AddressesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Users&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setJoinType</span><span class="p">(</span><span class="s1">&#39;INNER&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Possible keys for belongsTo association arrays include:</p>
<ul class="simple">
<li><strong>className</strong>: the class name of the model being associated to the current
model. If you&#8217;re defining a &#8216;Profile belongsTo User&#8217; relationship, the
className key should equal &#8216;Users&#8217;.</li>
<li><strong>foreignKey</strong>: the name of the foreign key found in the current table. This
is especially handy if you need to define multiple belongsTo relationships to
the same model. The default value for this key is the underscored, singular
name of the other model, suffixed with <code class="docutils literal"><span class="pre">_id</span></code>.</li>
<li><strong>bindingKey</strong>: The name of the column in the other table, that will be used
for matching the <code class="docutils literal"><span class="pre">foreignKey</span></code>. If not specified, the primary key (for
example the id column of the <code class="docutils literal"><span class="pre">Users</span></code> table) will be used.</li>
<li><strong>conditions</strong>: an array of find() compatible conditions or SQL strings such
as <code class="docutils literal"><span class="pre">['Users.active'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code></li>
<li><strong>joinType</strong>: the type of the join to use in the SQL query, default is LEFT
which may not fit your needs in all situations, INNER may be helpful when you
want everything from your main and associated models or nothing at all.</li>
<li><strong>propertyName</strong>: The property name that should be filled with data from the
associated table into the source table results. By default this is the
underscored &amp; singular name of the association so <code class="docutils literal"><span class="pre">user</span></code> in our example.</li>
<li><strong>strategy</strong>: Defines the query strategy to use. Defaults to &#8216;join&#8217;. The other
valid value is &#8216;select&#8217;, which utilizes a separate query instead.</li>
<li><strong>finder</strong>: The finder method to use when loading associated records.</li>
</ul>
<p>Once this association has been defined, find operations on the Addresses table can
contain the User record if it exists:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In a controller or table method.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$addresses</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Users&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$address</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$address</span><span class="o">-&gt;</span><span class="na">user</span><span class="o">-&gt;</span><span class="na">username</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above would emit SQL that is similar to:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">addresses</span> <span class="nx">LEFT</span> <span class="nx">JOIN</span> <span class="nx">users</span> <span class="nx">ON</span> <span class="nx">addresses</span><span class="o">.</span><span class="nx">user_id</span> <span class="o">=</span> <span class="nx">users</span><span class="o">.</span><span class="nx">id</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="hasmany-associations">
<span id="has-many-associations"></span><h2>HasMany Associations<a class="headerlink" href="#hasmany-associations" title="Permalink to this headline">¶</a></h2>
<p>An example of a hasMany association is &#8220;Article hasMany Comments&#8221;. Defining this
association will allow us to fetch an article&#8217;s comments when the article is
loaded.</p>
<p>When creating your database tables for a hasMany relationship, follow this
convention:</p>
<p><strong>hasMany:</strong> the <em>other</em> model contains the foreign key.</p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relation</th>
<th class="head">Schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Article hasMany Comment</td>
<td>Comment.article_id</td>
</tr>
<tr class="row-odd"><td>Product hasMany Option</td>
<td>Option.product_id</td>
</tr>
<tr class="row-even"><td>Doctor hasMany Patient</td>
<td>Patient.doctor_id</td>
</tr>
</tbody>
</table>
<p>We can define the hasMany association in our Articles model as follows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can also define a more specific relationship using the setters:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Comments&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">(</span><span class="s1">&#39;article_id&#39;</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setDependent</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sometimes you may want to configure composite keys in your associations:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Within ArticlesTable::initialize() call</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Reviews&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">([</span>
        <span class="s1">&#39;article_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;article_hash&#39;</span>
    <span class="p">]);</span>
</pre></div>
</div>
<p>Relying on the example above, we have passed an array containing the desired
composite keys to <code class="docutils literal"><span class="pre">setForeignKey()</span></code>. By default the <code class="docutils literal"><span class="pre">bindingKey</span></code> would be
automatically defined as <code class="docutils literal"><span class="pre">id</span></code> and <code class="docutils literal"><span class="pre">hash</span></code> respectively, but let&#8217;s assume that
you need to specify different binding fields than the defaults, you can setup it
manually with <code class="docutils literal"><span class="pre">setBindingKey()</span></code>:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// Within ArticlesTable::initialize() call</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasMany</span><span class="p">(</span><span class="s1">&#39;Reviews&#39;</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">setForeignKey</span><span class="p">([</span>
        <span class="s1">&#39;article_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;article_hash&#39;</span>
    <span class="p">])</span>
    <span class="o">-&gt;</span><span class="na">setBindingKey</span><span class="p">([</span>
        <span class="s1">&#39;whatever_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;whatever_hash&#39;</span>
    <span class="p">]);</span>
</pre></div>
</div>
<p>It is important to note that <code class="docutils literal"><span class="pre">foreignKey</span></code> values refers to the <strong>reviews</strong>
table and <code class="docutils literal"><span class="pre">bindingKey</span></code> values refers to the <strong>articles</strong> table.</p>
<p>Possible keys for hasMany association arrays include:</p>
<ul class="simple">
<li><strong>className</strong>: the class name of the model being associated to
the current model. If you&#8217;re defining a &#8216;User hasMany Comment&#8217;
relationship, the className key should equal &#8216;Comments&#8217;.</li>
<li><strong>foreignKey</strong>: the name of the foreign key found in the other
table. This is especially handy if you need to define multiple
hasMany relationships. The default value for this key is the
underscored, singular name of the actual model, suffixed with
&#8216;_id&#8217;.</li>
<li><strong>bindingKey</strong>: The name of the column in the current table, that will be used
for matching the <code class="docutils literal"><span class="pre">foreignKey</span></code>. If not specified, the primary key (for
example the id column of the <code class="docutils literal"><span class="pre">Articles</span></code> table) will be used.</li>
<li><strong>conditions</strong>: an array of find() compatible conditions or SQL
strings such as <code class="docutils literal"><span class="pre">['Comments.visible'</span> <span class="pre">=&gt;</span> <span class="pre">true]</span></code></li>
<li><strong>sort</strong>: an array of find() compatible order clauses or SQL
strings such as <code class="docutils literal"><span class="pre">['Comments.created'</span> <span class="pre">=&gt;</span> <span class="pre">'ASC']</span></code></li>
<li><strong>dependent</strong>: When dependent is set to <code class="docutils literal"><span class="pre">true</span></code>, recursive model
deletion is possible. In this example, Comment records will be
deleted when their associated Article record has been deleted.</li>
<li><strong>cascadeCallbacks</strong>: When this and <strong>dependent</strong> are <code class="docutils literal"><span class="pre">true</span></code>, cascaded
deletes will load and delete entities so that callbacks are properly
triggered. When <code class="docutils literal"><span class="pre">false</span></code>, <code class="docutils literal"><span class="pre">deleteAll()</span></code> is used to remove associated data
and no callbacks are triggered.</li>
<li><strong>propertyName</strong>: The property name that should be filled with data from the
associated table into the source table results. By default this is the
underscored &amp; plural name of the association so <code class="docutils literal"><span class="pre">comments</span></code> in our example.</li>
<li><strong>strategy</strong>: Defines the query strategy to use. Defaults to &#8216;select&#8217;. The
other valid value is &#8216;subquery&#8217;, which replaces the <code class="docutils literal"><span class="pre">IN</span></code> list with an
equivalent subquery.</li>
<li><strong>saveStrategy</strong>: Either &#8216;append&#8217; or &#8216;replace&#8217;. Defaults to &#8216;append&#8217;. When &#8216;append&#8217; the current
records are appended to any records in the database. When &#8216;replace&#8217; associated
records not in the current set will be removed. If the foreign key is a null
able column or if <code class="docutils literal"><span class="pre">dependent</span></code> is true records will be orphaned.</li>
<li><strong>finder</strong>: The finder method to use when loading associated records.</li>
</ul>
<p>Once this association has been defined, find operations on the Articles table
can contain the Comment records if they exist:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In a controller or table method.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Comments&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above would emit SQL that is similar to:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">comments</span> <span class="nx">WHERE</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>When the subquery strategy is used, SQL similar to the following will be
generated:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">comments</span> <span class="nx">WHERE</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="nx">SELECT</span> <span class="nx">id</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">);</span>
</pre></div>
</div>
<p>You may want to cache the counts for your hasMany associations. This is useful
when you often need to show the number of associated records, but don&#8217;t want to
load all the records just to count them. For example, the comment count on any
given article is often cached to make generating lists of articles more
efficient. You can use the <a class="reference internal" href="behaviors/counter-cache.html"><span class="doc">CounterCacheBehavior</span></a> to cache counts of associated records.</p>
<p>You should make sure that your database tables do not contain columns that match
association property names. If for example you have counter fields that conflict
with association properties, you must either rename the association property, or
the column name.</p>
</div>
<div class="section" id="belongstomany-associations">
<span id="belongs-to-many-associations"></span><h2>BelongsToMany Associations<a class="headerlink" href="#belongstomany-associations" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In 3.0 and onward <code class="docutils literal"><span class="pre">hasAndBelongsToMany</span></code> / <code class="docutils literal"><span class="pre">HABTM</span></code> has been renamed to
<code class="docutils literal"><span class="pre">belongsToMany</span></code> / <code class="docutils literal"><span class="pre">BTM</span></code>.</p>
</div>
<p>An example of a BelongsToMany association is &#8220;Article BelongsToMany Tags&#8221;, where
the tags from one article are shared with other articles.  BelongsToMany is
often referred to as &#8220;has and belongs to many&#8221;, and is a classic &#8220;many to many&#8221;
association.</p>
<p>The main difference between hasMany and BelongsToMany is that the link between
the models in a BelongsToMany association are not exclusive. For example, we are
joining our Articles table with a Tags table. Using &#8216;funny&#8217; as a Tag for my
Article, doesn&#8217;t &#8220;use up&#8221; the tag. I can also use it on the next article
I write.</p>
<p>Three database tables are required for a BelongsToMany association. In the
example above we would need tables for <code class="docutils literal"><span class="pre">articles</span></code>, <code class="docutils literal"><span class="pre">tags</span></code> and
<code class="docutils literal"><span class="pre">articles_tags</span></code>.  The <code class="docutils literal"><span class="pre">articles_tags</span></code> table contains the data that links
tags and articles together. The joining table is named after the two tables
involved, separated with an underscore by convention. In its simplest form, this
table consists of <code class="docutils literal"><span class="pre">article_id</span></code> and <code class="docutils literal"><span class="pre">tag_id</span></code>.</p>
<p><strong>belongsToMany</strong> requires a separate join table that includes both <em>model</em>
names.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Relationship</th>
<th class="head">Join Table Fields</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Article belongsToMany Tag</td>
<td>articles_tags.id, articles_tags.tag_id, articles_tags.article_id</td>
</tr>
<tr class="row-odd"><td>Patient belongsToMany Doctor</td>
<td>doctors_patients.id, doctors_patients.doctor_id,
doctors_patients.patient_id.</td>
</tr>
</tbody>
</table>
<p>We can define the belongsToMany association in both our models as follows:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In src/Model/Table/ArticlesTable.php</span>
<span class="k">class</span> <span class="nc">ArticlesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Tags&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// In src/Model/Table/TagsTable.php</span>
<span class="k">class</span> <span class="nc">TagsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can also define a more specific relationship using configuration:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In src/Model/Table/TagsTable.php</span>
<span class="k">class</span> <span class="nc">TagsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Articles&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;joinTable&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;articles_tags&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Possible keys for belongsToMany association arrays include:</p>
<ul class="simple">
<li><strong>className</strong>: the class name of the model being associated to
the current model. If you&#8217;re defining a &#8216;Article belongsToMany Tag&#8217;
relationship, the className key should equal &#8216;Tags&#8217;.</li>
<li><strong>joinTable</strong>: The name of the join table used in this
association (if the current table doesn&#8217;t adhere to the naming
convention for belongsToMany join tables). By default this table
name will be used to load the Table instance for the join table.</li>
<li><strong>foreignKey</strong>: The name of the foreign key that references the current model
found on the join table, or list in case of composite foreign keys.
This is especially handy if you need to define multiple
belongsToMany relationships. The default value for this key is the
underscored, singular name of the current model, suffixed with &#8216;_id&#8217;.</li>
<li><strong>bindingKey</strong>: The name of the column in the current table, that will be used
for matching the <code class="docutils literal"><span class="pre">foreignKey</span></code>. Defaults to the primary key.</li>
<li><strong>targetForeignKey</strong>: The name of the foreign key that references the target
model found on the join model, or list in case of composite foreign keys.
The default value for this key is the underscored, singular name of
the target model, suffixed with &#8216;_id&#8217;.</li>
<li><strong>conditions</strong>: an array of <code class="docutils literal"><span class="pre">find()</span></code> compatible conditions.  If you have
conditions on an associated table, you should use a &#8216;through&#8217; model, and
define the necessary belongsTo associations on it.</li>
<li><strong>sort</strong>: an array of find() compatible order clauses.</li>
<li><strong>dependent</strong>: When the dependent key is set to <code class="docutils literal"><span class="pre">false</span></code>, and an entity is
deleted, the data of the join table will not be deleted.</li>
<li><strong>through</strong>: Allows you to provide either the name of the Table instance you
want used on the join table, or the instance itself. This makes customizing
the join table keys possible, and allows you to customize the behavior of the
pivot table.</li>
<li><strong>cascadeCallbacks</strong>: When this is <code class="docutils literal"><span class="pre">true</span></code>, cascaded deletes will load and
delete entities so that callbacks are properly triggered on join table
records. When <code class="docutils literal"><span class="pre">false</span></code>, <code class="docutils literal"><span class="pre">deleteAll()</span></code> is used to remove associated data and
no callbacks are triggered. This defaults to <code class="docutils literal"><span class="pre">false</span></code> to help reduce
overhead.</li>
<li><strong>propertyName</strong>: The property name that should be filled with data from the
associated table into the source table results. By default this is the
underscored &amp; plural name of the association, so <code class="docutils literal"><span class="pre">tags</span></code> in our example.</li>
<li><strong>strategy</strong>: Defines the query strategy to use. Defaults to &#8216;select&#8217;. The
other valid value is &#8216;subquery&#8217;, which replaces the <code class="docutils literal"><span class="pre">IN</span></code> list with an
equivalent subquery.</li>
<li><strong>saveStrategy</strong>: Either &#8216;append&#8217; or &#8216;replace&#8217;. Defaults to &#8216;replace&#8217;.
Indicates the mode to be used for saving associated entities. The former will
only create new links between both side of the relation and the latter will
do a wipe and replace to create the links between the passed entities when
saving.</li>
<li><strong>finder</strong>: The finder method to use when loading associated records.</li>
</ul>
<p>Once this association has been defined, find operations on the Articles table can
contain the Tag records if they exist:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="c1">// In a controller or table method.</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$articles</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">contain</span><span class="p">([</span><span class="s1">&#39;Tags&#39;</span><span class="p">]);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span> <span class="k">as</span> <span class="nv">$article</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$article</span><span class="o">-&gt;</span><span class="na">tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above would emit SQL that is similar to:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">tags</span>
<span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">articles_tags</span> <span class="nx">ON</span> <span class="p">(</span>
  <span class="nx">tags</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">article_tags</span><span class="o">.</span><span class="nx">tag_id</span>
  <span class="k">AND</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>When the subquery strategy is used, SQL similar to the following will be
generated:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">;</span>
<span class="nx">SELECT</span> <span class="o">*</span> <span class="nx">FROM</span> <span class="nx">tags</span>
<span class="nx">INNER</span> <span class="nx">JOIN</span> <span class="nx">articles_tags</span> <span class="nx">ON</span> <span class="p">(</span>
  <span class="nx">tags</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">article_tags</span><span class="o">.</span><span class="nx">tag_id</span>
  <span class="k">AND</span> <span class="nx">article_id</span> <span class="nx">IN</span> <span class="p">(</span><span class="nx">SELECT</span> <span class="nx">id</span> <span class="nx">FROM</span> <span class="nx">articles</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="section" id="using-the-through-option">
<span id="id1"></span><h3>Using the &#8216;through&#8217; Option<a class="headerlink" href="#using-the-through-option" title="Permalink to this headline">¶</a></h3>
<p>If you plan on adding extra information to the join/pivot table, or if you need
to use join columns outside of the conventions, you will need to define the
<code class="docutils literal"><span class="pre">through</span></code> option. The <code class="docutils literal"><span class="pre">through</span></code> option provides you full control over how
the belongsToMany association will be created.</p>
<p>It is sometimes desirable to store additional data with a many to many
association. Consider the following:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">Student</span> <span class="nx">BelongsToMany</span> <span class="nx">Course</span>
<span class="nx">Course</span> <span class="nx">BelongsToMany</span> <span class="nx">Student</span>
</pre></div>
</div>
<p>A Student can take many Courses and a Course can be taken by many Students. This
is a simple many to many association. The following table would suffice:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">id</span> <span class="o">|</span> <span class="nx">student_id</span> <span class="o">|</span> <span class="nx">course_id</span>
</pre></div>
</div>
<p>Now what if we want to store the number of days that were attended by the
student on the course and their final grade? The table we&#8217;d want would be:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="nx">id</span> <span class="o">|</span> <span class="nx">student_id</span> <span class="o">|</span> <span class="nx">course_id</span> <span class="o">|</span> <span class="nx">days_attended</span> <span class="o">|</span> <span class="nx">grade</span>
</pre></div>
</div>
<p>The way to implement our requirement is to use a <strong>join model</strong>, otherwise known
as a <strong>hasMany through</strong> association. That is, the association is a model
itself. So, we can create a new model CoursesMemberships. Take a look at the
following models:</p>
<div class="highlight-phpinline"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">StudentsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Courses&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;through&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CoursesMemberships&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">CoursesTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsToMany</span><span class="p">(</span><span class="s1">&#39;Students&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;through&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;CoursesMemberships&#39;</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">CoursesMembershipsTable</span> <span class="k">extends</span> <span class="nx">Table</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Students&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">belongsTo</span><span class="p">(</span><span class="s1">&#39;Courses&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The CoursesMemberships join table uniquely identifies a given Student&#8217;s
participation on a Course in addition to extra meta-information.</p>
</div>
<div class="section" id="default-association-conditions">
<h3>Default Association Conditions<a class="headerlink" href="#default-association-conditions" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">finder</span></code> option allows you to use a <a class="reference internal" href="retrieving-data-and-resultsets.html#custom-find-methods"><span class="std std-ref">custom finder</span></a> to load associated record data. This lets you encapsulate
your queries better and keep your code DRY&#8217;er. There are some limitations when
using finders to load data in associations that are loaded using joins
(belongsTo/hasOne). Only the following aspects of the query will be applied to
the root query:</p>
<ul class="simple">
<li>WHERE conditions.</li>
<li>Additional joins.</li>
<li>Contained associations.</li>
</ul>
<p>Other aspects of the query, such as selected columns, order, group by, having
and other sub-statements, will not be applied to the root query. Associations
that are <em>not</em> loaded through joins (hasMany/belongsToMany), do not have the
above restrictions and can also use result formatters or map/reduce functions.</p>
</div>
<div class="section" id="loading-associations">
<h3>Loading Associations<a class="headerlink" href="#loading-associations" title="Permalink to this headline">¶</a></h3>
<p>Once you&#8217;ve defined your associations you can <a class="reference internal" href="retrieving-data-and-resultsets.html#eager-loading-associations"><span class="std std-ref">eager load associations</span></a> when fetching results.</p>
</div>
</div>
</div>


            </div>
        </div>

        
        <div class="col-md-3 col-md-pull-9 hidden-xs hidden-sm" lang="en">
            <aside class="sidebar">
                <div class="mb30 row">
<div id="sidebar-navigation" class="hidden-xs">
	<p class="caption"><span class="caption-text">Preface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">CakePHP at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices/3-x-migration-guide.html">3.x Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples.html">Tutorials &amp; Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/routing.html">Routing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/request-response.html">Request &amp; Response Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/middleware.html">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../orm.html">Database Access &amp; ORM</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="database-basics.html">Database Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="query-builder.html">Query Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="table-objects.html">Table Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="entities.html">Entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="retrieving-data-and-resultsets.html">Retrieving Data &amp; Results Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Validating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="saving-data.html">Saving Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="deleting-data.html">Deleting Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Associations - Linking Tables Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="behaviors.html">Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema-system.html">Schema System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console-and-shells/orm-cache.html">ORM Cache Shell</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using CakePHP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bake.html">Bake Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/caching.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../console-and-shells.html">Console Tools, Shells &amp; Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/email.html">Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/errors.html">Error &amp; Exception Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/events.html">Events System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/internationalization-and-localization.html">Internationalization &amp; Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/form.html">Modelless Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers/components/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/rest.html">REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/validation.html">Validation</a></li>
</ul>
<p class="caption"><span class="caption-text">Utility Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/app.html">App Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/collections.html">Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/file-folder.html">Folder &amp; File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/hash.html">Hash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/httpclient.html">Http Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/inflector.html">Inflector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/number.html">Number</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/registry-objects.html">Registry Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/time.html">Date &amp; Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/xml.html">Xml</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../chronos.html">Chronos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug-kit.html">Debug Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elasticsearch.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade-tool.html">Upgrade Tool</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-libraries/global-constants-and-functions.html">Constants &amp; Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendices.html">Appendices</a></li>
</ul>

</div>

                </div>
            </aside>
            <aside class="sidebar">
                <div class="mb30 row">
                </div>
            </aside>
        </div>
    </div>
</div>

<section id="socials" class="back-3">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-5  social text-center">
                <div class="col-sm-3 col-xs-3">
                    <div id="fb-root"></div>
                        <script>(function(d, s, id) {
                          var js, fjs = d.getElementsByTagName(s)[0];
                          if (d.getElementById(id)) return;
                          js = d.createElement(s); js.id = id;
                          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
                          fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                        </script>
                        <div id="fb-root-face" class="fb-like" data-href="https://www.facebook.com/CakePHP/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=star&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <iframe src="https://ghbtns.com/github-btn.html?user=cakephp&amp;repo=cakephp&amp;type=fork&amp;count=true&amp;size=small" frameborder="0" scrolling="0" width="120px" height="30px"></iframe>
                </div>

                <div class="col-sm-3 col-xs-3">
                    <a href="https://twitter.com/CakePHP" class="twitter-follow-button" data-show-count="false" data-show-screen-name="false">Follow @CakePHP</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-7 social-footer text-center ">
                <a href="https://twitter.com/cakephp" data-toggle="tooltip" title="Twitter"><i class="fa icon-social fa-twitter"></i>
                <a href="https://www.facebook.com/groups/cake.community" data-toggle="tooltip" title="Facebook"><i class="fa icon-social fa-facebook"></i></a>
                <a href="https://goo.gl/mSC0s" data-toggle="tooltip" title="Google Plus"><i class="fa icon-social  fa-google-plus"></i></a>
                <a href="https://www.youtube.com/user/CakePHP" data-toggle="tooltip" title="Youtube"><i class="fa icon-social fa-youtube-play"></i></a>
                <a href="https://github.com/cakephp" data-toggle="tooltip" title="Github"><i class="fa icon-social fa-git"></i></a>
                <a href="https://cakesf.herokuapp.com/" target="_blank" title="Slack" data-toggle="tooltip"><i class="fa fa-slack icon-social"></i></a>
                <a href="https://stackoverflow.com/tags/cakephp" data-toggle="tooltip" title="Stack Overflow"><i class="fa icon-social fa-stack-overflow"></i></a>
                <a href="https://webchat.freenode.net/?channels=cakephp" data-toggle="tooltip" title="IRC" class="icon-irc">#IRC</a>
            </div>
        </div>
    </div>
</section>

<footer id="footer" class="footer-wrapper">
    <div class="container">

        <div class="row col-p30">
            <div class="col-sm-12 col-md-3">
                <div class="footer-widget t-footer">
                    <div class="col-md-12">
                        <a href="https://www.openhub.net/p/cakephp">
                            <img src="../_static/open-hub.png">
                        </a>
                        <div class="mt10">
                            <a href="https://www.rackspace.com/">
                                <img src="../_static/rackspace.png">
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 col-md-9">
                <div class="col-md-3 col-sm-6 business-solution">
                    <ul class="footer-menu">
                        <li class="menu-title">
    <a href="https://cakephp.org/business-solutions"><i class="fa fa-menu-title fa-briefcase"></i>Business Solutions</a>
</li>
<li class="menu-title mt30">
    <a href="https://cakephp.org/showcase"><i class="fa fa-menu-title fa-desktop"></i>Showcase</a>
</li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title">
	<i class="fa fa-menu-title fa-book"></i>Documentation
</li>

<li><a href="https://book.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Book</a></li>
<li><a href="https://api.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>API</a></li>

<li><a href="https://cakephp.org/documentation/videos"><i class="fa fa-menu fa-chevron-right"></i>Videos</a></li>
<li><a href="https://cakephp.org/privacy"><i class="fa fa-menu fa-chevron-right"></i>Privacy Policy</a></li>
<li><a href="https://cakephp.org/pages/trademark"><i class="fa fa-menu fa-chevron-right"></i>Logos &amp; Trademarks</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-users"></i>Community</li>

<li><a href="https://cakephp.org/team"><i class="fa fa-menu fa-chevron-right"></i>Team</a></li>
<li><a href="https://github.com/cakephp/cakephp/issues"><i class="fa fa-menu fa-chevron-right"></i>Issues (Github)</a></li>
<li><a href="https://www.youtube.com/user/CakePHP"><i class="fa fa-menu fa-chevron-right"></i>YouTube Channel</a></li>
<li><a href="https://cakephp.org/get-involved"><i class="fa fa-menu fa-chevron-right"></i>Get Involved</a></li>

<li><a href="https://bakery.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Bakery</a></li>
<li><a href="https://github.com/FriendsOfCake/awesome-cakephp"><i class="fa fa-menu fa-chevron-right"></i>Featured Resources</a></li>
<li><a href="https://cakephp.org/newsletter/signup"><i class="fa fa-menu fa-chevron-right"></i>Newsletter</a></li>
<li><a href="http://certification.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Certification</a></li>
<li><a href="http://my.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>My CakePHP</a></li>
<li><a href="http://cakefest.org"><i class="fa fa-menu fa-chevron-right"></i>CakeFest</a></li>
<li><a href="https://www.facebook.com/groups/cake.community"><i class="fa fa-menu fa-chevron-right"></i>Facebook</a></li>
<li><a href="https://twitter.com/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Twitter</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6">
                    <ul class="footer-menu">
                        
<li class="menu-title"><i class="fa fa-menu-title fa-comments-o"></i>Help &amp; Support</li>

<li><a href="http://discourse.cakephp.org"><i class="fa fa-menu fa-chevron-right"></i>Forum</a></li>
<li><a href="https://stackoverflow.com/tags/cakephp"><i class="fa fa-menu fa-chevron-right"></i>Stack Overflow</a></li>
<li><a href="https://webchat.freenode.net/?channels=cakephp"><i class="fa fa-menu fa-chevron-right"></i>IRC</a></li>
<li><a href="https://cakesf.herokuapp.com/"><i class="fa fa-menu fa-chevron-right"></i>Slack</a></li>
<li><a href="https://www.cakedc.com/"><i class="fa fa-menu fa-chevron-right"></i>Paid Support</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12 text-center mt30">
                <p class="copyright">
                            &copy; Copyright 2017, Cake Software Foundation, Inc.
                        Last updated on Aug 30, 2017.
                        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
                </p>
            </div>
        </div>
    </div>
</footer>

<div id="inline-search-results"></div>


</div>

<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-743287-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </body>
</html>